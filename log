=== Docker run test-datakit
[2017-01-25 15:21.13] Starting...
[2017-01-25 15:21.13] Running "docker" "run" "--rm" "--entrypoint" "/bin/sh" "sha256:159f818f3dfe03bc0f9b66f253d4c2b13200c8955022b0b467809da8b144d226" "-c" "opam remove -y \"datakit\" && opam depext -i -y \"conf-gmp\" \"conf-libpcre\" \"conf-perl\" \"conf-autoconf\"&& opam install -y -t --deps-only \"datakit\" && opam install -y -v -t \"datakit\""
The following actions will be performed:
  - remove datakit dev*

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> removed   datakit.dev
Done.
# Run eval `opam config env` to update the current shell environment
# Detecting depexts using flags: x86_64 linux alpine
# The following system packages are needed:
#  - autoconf
#  - gmp-dev
#  - pcre-dev
#  - perl
#  - pkgconfig
gmp-dev
pcre-dev
perl
pkgconf
# The following new OS packages need to be installed: autoconf
The following command needs to be run through "sudo":
    apk add autoconf
(1/1) Installing autoconf (2.69-r0)
Executing busybox-1.25.1-r0.trigger
OK: 661 MiB in 107 packages
# OS packages installation successful
# Now letting OPAM install the packages
The following actions will be performed:
  - install conf-gmp        1  
  - install conf-which      1                                   [required by conf-autoconf]
  - install conf-perl       1  
  - install conf-pkg-config 1.0                                 [required by conf-libpcre]
  - install conf-autoconf   0.1
  - install conf-libpcre    1  
===== 6 to install =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/12: [conf-gmp: sh]
Processing  2/12: [conf-gmp: sh] [conf-perl: perl]
Processing  3/12: [conf-gmp: sh] [conf-perl: perl] [conf-pkg-config: pkg-config]
Processing  4/12: [conf-gmp: sh] [conf-perl: perl] [conf-pkg-config: pkg-config] [conf-which: which which]
Processing  4/12: [conf-gmp: sh] [conf-perl: perl] [conf-which: which which]
-> installed conf-pkg-config.1.0
Processing  5/12: [conf-gmp: sh] [conf-perl: perl] [conf-which: which which]
Processing  6/12: [conf-gmp: sh] [conf-libpcre: pkg-config libpcre] [conf-perl: perl] [conf-which: which which]
Processing  6/12: [conf-libpcre: pkg-config libpcre] [conf-perl: perl] [conf-which: which which]
-> installed conf-gmp.1
Processing  7/12: [conf-libpcre: pkg-config libpcre] [conf-perl: perl] [conf-which: which which]
Processing  7/12: [conf-libpcre: pkg-config libpcre] [conf-which: which which]
-> installed conf-perl.1
Processing  8/12: [conf-libpcre: pkg-config libpcre] [conf-which: which which]
Processing  8/12: [conf-libpcre: pkg-config libpcre]
-> installed conf-which.1
Processing  9/12: [conf-libpcre: pkg-config libpcre]
Processing 10/12: [conf-autoconf: which autoconf] [conf-libpcre: pkg-config libpcre]
Processing 10/12: [conf-autoconf: which autoconf]
-> installed conf-libpcre.1
Processing 11/12: [conf-autoconf: which autoconf]
-> installed conf-autoconf.0.1
Done.
# Run eval `opam config env` to update the current shell environment

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/1: [datakit: git]
[datakit] git+file:///home/opam/src/datakit changed
The following actions will be performed:
  - install   datakit-client   0.8.0   
  - install   menhir           20170101
  - install   mirage-no-xen    1       
  - install   zarith           1.4.1   
  - install   ocamlify         0.0.1   
  - install   ocamlmod         0.0.8   
  - install   easy-format      1.2.0   
  - install   asn1-combinators 0.1.3   
  - install   oasis            0.4.8   
  - install   biniou           1.0.12  
  - install   atd              1.2.0   
  - install   nocrypto         0.5.3   
  - install   yojson           1.3.3   
  - install   x509             0.5.3   
  - install   atdgen           1.10.0  
  - install   tls              0.7.1   
  - recompile conduit          0.14.4  
  - recompile cohttp           0.21.0  
  - install   github           2.2.0   
  - recompile prometheus-app   dev*    
  - recompile git              1.9.3   
  - install   github-hooks     0.1.1   
  - recompile irmin            0.12.0  
  - install   datakit-github   0.8.1   
===== 19 to install | 5 to recompile =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/24: [asn1-combinators: http]
Processing  2/24: [asn1-combinators: http] [atd: http]
Processing  3/24: [asn1-combinators: http] [atd: http] [atdgen: http]
[asn1-combinators.0.1.3] https://github.com/mirleft/ocaml-asn1-combinators/releases/download/v0.1.3/asn1-combinators-0.1.3.tbz downloaded
Processing  3/24: [atd: http] [atdgen: http]
Processing  4/24: [atd: http] [atdgen: http] [biniou: http]
[atd.1.2.0] https://github.com/mjambon/atd/archive/v1.2.0.tar.gz downloaded
Processing  4/24: [atdgen: http] [biniou: http]
Processing  5/24: [atdgen: http] [biniou: http]
Processing  6/24: [atdgen: http] [biniou: http]
Processing  7/24: [atdgen: http] [biniou: http] [datakit-client: http]
[atdgen.1.10.0] https://github.com/mjambon/atdgen/archive/v1.10.0.tar.gz downloaded
Processing  7/24: [biniou: http] [datakit-client: http]
Processing  8/24: [biniou: http] [datakit-client: http] [datakit-github: http]
[biniou.1.0.12] https://github.com/mjambon/biniou/archive/v1.0.12.tar.gz downloaded
Processing  8/24: [datakit-client: http] [datakit-github: http]
Processing  9/24: [datakit-client: http] [datakit-github: http] [easy-format: http]
[datakit-client.0.8.0] https://github.com/docker/datakit/releases/download/0.8.0/datakit-0.8.0.tbz downloaded
Processing  9/24: [datakit-github: http] [easy-format: http]
Processing 10/24: [datakit-github: http] [easy-format: http]
Processing 11/24: [datakit-github: http] [easy-format: http] [github: http]
[datakit-github.0.8.1] https://github.com/docker/datakit/releases/download/0.8.1/datakit-0.8.1.tbz downloaded
Processing 11/24: [easy-format: http] [github: http]
Processing 12/24: [easy-format: http] [github: http] [github-hooks: http]
[easy-format.1.2.0] https://github.com/mjambon/easy-format/archive/v1.2.0.tar.gz downloaded
Processing 12/24: [github: http] [github-hooks: http]
Processing 13/24: [github: http] [github-hooks: http]
Processing 14/24: [github: http] [github-hooks: http] [menhir: http]
[menhir.20170101] http://gallium.inria.fr/~fpottier/menhir/menhir-20170101.tar.gz downloaded
Processing 14/24: [github: http] [github-hooks: http]
Processing 15/24: [github: http] [github-hooks: http]
Processing 16/24: [github: http] [github-hooks: http] [nocrypto: http]
[github-hooks.0.1.1] https://github.com/dsheets/ocaml-github-hooks/releases/download/0.1.1/github-hooks-0.1.1.tbz downloaded
Processing 16/24: [github: http] [nocrypto: http]
Processing 17/24: [github: http] [nocrypto: http] [oasis: http]
[github.2.2.0] https://github.com/mirage/ocaml-github/archive/v2.2.0.tar.gz downloaded
Processing 17/24: [nocrypto: http] [oasis: http]
Processing 18/24: [nocrypto: http] [oasis: http] [ocamlify: http]
[ocamlify.0.0.1] http://forge.ocamlcore.org/frs/download.php/379/ocamlify-0.0.1.tar.gz downloaded
Processing 18/24: [nocrypto: http] [oasis: http]
Processing 19/24: [nocrypto: http] [oasis: http] [ocamlmod: http]
[oasis.0.4.8] https://forge.ocamlcore.org/frs/download.php/1669/oasis-0.4.8.tar.gz downloaded
Processing 19/24: [nocrypto: http] [ocamlmod: http]
Processing 20/24: [nocrypto: http] [ocamlmod: http] [prometheus-app: rsync]
[prometheus-app.dev] file:///home/opam/src/datakit/ synchronized
Processing 20/24: [nocrypto: http] [ocamlmod: http]
Processing 21/24: [nocrypto: http] [ocamlmod: http] [tls: http]
[ocamlmod.0.0.8] https://forge.ocamlcore.org/frs/download.php/1544/ocamlmod-0.0.8.tar.gz downloaded
Processing 21/24: [nocrypto: http] [tls: http]
Processing 22/24: [nocrypto: http] [tls: http] [x509: http]
[nocrypto.0.5.3] https://github.com/mirleft/ocaml-nocrypto/archive/v0.5.3.tar.gz downloaded
Processing 22/24: [tls: http] [x509: http]
Processing 23/24: [tls: http] [x509: http] [yojson: http]
[x509.0.5.3] https://github.com/mirleft/ocaml-x509/archive/0.5.3.tar.gz downloaded
Processing 23/24: [tls: http] [yojson: http]
Processing 24/24: [tls: http] [yojson: http] [zarith: http]
[tls.0.7.1] https://github.com/mirleft/ocaml-tls/archive/0.7.1.tar.gz downloaded
Processing 24/24: [yojson: http] [zarith: http]
[zarith.1.4.1] https://forge.ocamlcore.org/frs/download.php/1574/zarith-1.4.1.tgz downloaded
Processing 24/24: [yojson: http]
[yojson.1.3.3] https://github.com/mjambon/yojson/archive/v1.3.3.tar.gz downloaded

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/53:
Processing  2/53:
Processing  3/53:
Processing  4/53:
Processing  5/53:
Processing  6/53:
Processing  7/53:
-> installed mirage-no-xen.1
Processing  8/53:
Processing  8/53: [datakit-client: ocaml build]
Processing  8/53: [datakit-client: ocaml build] [easy-format: make]
Processing  8/53: [datakit-client: ocaml build] [easy-format: make] [menhir: make Makefile]
Processing  8/53: [datakit-client: ocaml build] [easy-format: make] [menhir: make Makefile] [ocamlify: ocaml setup.ml]
Processing  8/53: [datakit-client: ocaml build] [easy-format: make] [menhir: make Makefile] [ocamlify: ocaml setup.ml] [ocamlmod: ocaml setup.ml]
Processing  8/53: [datakit-client: ocaml build] [easy-format: make] [menhir: make Makefile] [ocamlify: ocaml setup.ml] [ocamlmod: ocaml setup.ml] [zarith: ./configure]
Processing  8/53: [datakit-client: ocaml build] [menhir: make Makefile] [ocamlify: ocaml setup.ml] [ocamlmod: ocaml setup.ml] [zarith: ./configure]
Processing  9/53: [datakit-client: ocaml build] [menhir: make Makefile] [ocamlify: ocaml setup.ml] [ocamlmod: ocaml setup.ml] [zarith: ./configure] [easy-format: make install]
-> installed easy-format.1.2.0
Processing  9/53: [datakit-client: ocaml build] [menhir: make Makefile] [ocamlify: ocaml setup.ml] [ocamlmod: ocaml setup.ml] [zarith: ./configure]
Processing 10/53: [datakit-client: ocaml build] [menhir: make Makefile] [ocamlify: ocaml setup.ml] [ocamlmod: ocaml setup.ml] [zarith: ./configure]
Processing 10/53: [datakit-client: ocaml build] [menhir: make Makefile] [ocamlify: ocaml setup.ml] [ocamlmod: ocaml setup.ml] [zarith: make]
Processing 10/53: [biniou: make] [datakit-client: ocaml build] [menhir: make Makefile] [ocamlify: ocaml setup.ml] [ocamlmod: ocaml setup.ml] [zarith: make]
Processing 10/53: [datakit-client: ocaml build] [menhir: make Makefile] [ocamlify: ocaml setup.ml] [ocamlmod: ocaml setup.ml] [zarith: make]
Processing 11/53: [datakit-client: ocaml build] [menhir: make Makefile] [ocamlify: ocaml setup.ml] [ocamlmod: ocaml setup.ml] [zarith: make] [biniou: make install]
Processing 11/53: [menhir: make Makefile] [ocamlify: ocaml setup.ml] [ocamlmod: ocaml setup.ml] [zarith: make] [biniou: make install]
-> installed biniou.1.0.12
Processing 11/53: [menhir: make Makefile] [ocamlify: ocaml setup.ml] [ocamlmod: ocaml setup.ml] [zarith: make]
Processing 12/53: [menhir: make Makefile] [ocamlify: ocaml setup.ml] [ocamlmod: ocaml setup.ml] [zarith: make]
-> installed datakit-client.0.8.0
Processing 13/53: [menhir: make Makefile] [ocamlify: ocaml setup.ml] [ocamlmod: ocaml setup.ml] [zarith: make]
Processing 13/53: [menhir: make Makefile] [ocamlmod: ocaml setup.ml] [zarith: make]
Processing 14/53: [menhir: make Makefile] [ocamlmod: ocaml setup.ml] [zarith: make] [ocamlify: ocaml setup.ml]
Processing 14/53: [menhir: make Makefile] [ocamlmod: ocaml setup.ml] [yojson: make] [zarith: make] [ocamlify: ocaml setup.ml]
Processing 14/53: [menhir: make Makefile] [yojson: make] [zarith: make] [ocamlify: ocaml setup.ml]
Processing 14/53: [menhir: make Makefile] [yojson: make] [ocamlify: ocaml setup.ml]
-> installed ocamlify.0.0.1
Processing 14/53: [menhir: make Makefile] [yojson: make]
-> removed   irmin.0.12.0
Processing 15/53: [menhir: make Makefile] [yojson: make]
-> removed   git.1.9.3
Processing 16/53: [menhir: make Makefile] [yojson: make]
-> removed   prometheus-app.dev
Processing 17/53: [menhir: make Makefile] [yojson: make]
Processing 18/53: [cohttp: ocamlfind remove] [menhir: make Makefile] [yojson: make]
-> removed   cohttp.0.21.0
Processing 18/53: [menhir: make Makefile] [yojson: make]
Processing 19/53: [conduit: ocamlfind remove] [menhir: make Makefile] [yojson: make]
-> removed   conduit.0.14.4
Processing 19/53: [menhir: make Makefile] [yojson: make]
Processing 20/53: [menhir: make Makefile] [yojson: make] [ocamlmod: ocaml setup.ml]
-> installed ocamlmod.0.0.8
Processing 20/53: [menhir: make Makefile] [yojson: make]
Processing 21/53: [menhir: make Makefile] [yojson: make]
Processing 22/53: [menhir: make Makefile] [yojson: make] [zarith: make install]
Processing 22/53: [menhir: make Makefile] [oasis: ocaml setup.ml] [yojson: make] [zarith: make install]
-> installed zarith.1.4.1
Processing 22/53: [menhir: make Makefile] [oasis: ocaml setup.ml] [yojson: make]
Processing 23/53: [menhir: make Makefile] [oasis: ocaml setup.ml] [yojson: make]
Processing 23/53: [asn1-combinators: ocaml build] [menhir: make Makefile] [oasis: ocaml setup.ml] [yojson: make]
Processing 23/53: [asn1-combinators: ocaml build] [menhir: make Makefile] [oasis: ocaml setup.ml]
Processing 24/53: [asn1-combinators: ocaml build] [menhir: make Makefile] [oasis: ocaml setup.ml] [yojson: make install-lib]
-> installed yojson.1.3.3
Processing 24/53: [asn1-combinators: ocaml build] [menhir: make Makefile] [oasis: ocaml setup.ml]
Processing 24/53: [menhir: make Makefile] [oasis: ocaml setup.ml]
-> installed asn1-combinators.0.1.3
Processing 25/53: [menhir: make Makefile] [oasis: ocaml setup.ml]
Processing 25/53: [oasis: ocaml setup.ml]
Processing 26/53: [oasis: ocaml setup.ml] [menhir: make Makefile]
-> installed menhir.20170101
Processing 26/53: [oasis: ocaml setup.ml]
Processing 27/53: [oasis: ocaml setup.ml]
Processing 27/53: [atd: make] [oasis: ocaml setup.ml]
Processing 27/53: [oasis: ocaml setup.ml]
Processing 28/53: [oasis: ocaml setup.ml] [atd: make install]
-> installed atd.1.2.0
Processing 28/53: [oasis: ocaml setup.ml]
Processing 29/53: [oasis: ocaml setup.ml]
Processing 29/53: [atdgen: make] [oasis: ocaml setup.ml]
Processing 29/53: [oasis: ocaml setup.ml]
Processing 30/53: [oasis: ocaml setup.ml] [atdgen: make findlib-install]
-> installed atdgen.1.10.0
Processing 30/53: [oasis: ocaml setup.ml]
Processing 31/53: [oasis: ocaml setup.ml]
-> installed oasis.0.4.8
Processing 32/53:
Processing 32/53: [nocrypto: ./configure]
Processing 32/53: [nocrypto: make]
Processing 33/53: [nocrypto: make install]
-> installed nocrypto.0.5.3
Processing 34/53:
Processing 34/53: [x509: ./configure]
Processing 34/53: [x509: make]
Processing 35/53: [x509: make install]
-> installed x509.0.5.3
Processing 36/53:
Processing 36/53: [tls: ./configure]
Processing 36/53: [tls: make]
Processing 37/53: [tls: make install]
-> installed tls.0.7.1
Processing 38/53:
Processing 38/53: [conduit: ./configure]
Processing 38/53: [conduit: make]
Processing 39/53: [conduit: make install]
-> installed conduit.0.14.4
Processing 40/53:
Processing 40/53: [cohttp: make]
Processing 41/53: [cohttp: make install]
-> installed cohttp.0.21.0
Processing 42/53:
Processing 43/53:
Processing 44/53: [prometheus-app: ocaml build]
Processing 44/53: [git: ocaml build] [prometheus-app: ocaml build]
Processing 44/53: [git: ocaml build] [github: ocaml setup.ml] [prometheus-app: ocaml build]
Processing 44/53: [git: ocaml build] [github: ocaml setup.ml]
-> installed prometheus-app.dev
Processing 45/53: [git: ocaml build] [github: ocaml setup.ml]
Processing 45/53: [github: ocaml setup.ml]
-> installed git.1.9.3
Processing 46/53: [github: ocaml setup.ml]
Processing 47/53: [github: ocaml setup.ml]
Processing 47/53: [github: ocaml setup.ml] [irmin: ocaml build]
Processing 47/53: [github: ocaml setup.ml]
-> installed irmin.0.12.0
Processing 48/53: [github: ocaml setup.ml]
Processing 49/53: [github: ocaml setup.ml]
-> installed github.2.2.0
Processing 50/53:
Processing 50/53: [github-hooks: ocaml build]
-> installed github-hooks.0.1.1
Processing 52/53:
Processing 52/53: [datakit-github: ocaml build]
-> installed datakit-github.0.8.1
Done.
# Run eval `opam config env` to update the current shell environment

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/1: [datakit: git]
[datakit] git+file:///home/opam/src/datakit changed
The following actions will be performed:
  - install datakit dev*

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit] git+file:///home/opam/src/datakit changed

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/2: [datakit: ocaml build]
+ ocaml "pkg/pkg.ml" "build" "--pinned" "true" "--tests" "false" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit.dev)
- pkg.ml: [WARNING] Watermarks: OPAM fields of opam: topkg: no such command. Did you install topkg-care ?
- pkg.ml: [WARNING] file opam: opam field "maintainer" undefined or unsupported
- pkg.ml: [WARNING] file opam: opam field "authors" undefined or unsupported
- pkg.ml: [WARNING] file opam: opam field "homepage" undefined or unsupported
- pkg.ml: [WARNING] file opam: opam field "bug-reports" undefined or unsupported
- pkg.ml: [WARNING] file opam: opam field "doc" undefined or unsupported
- pkg.ml: [WARNING] file opam: opam field "license" undefined or unsupported
- pkg.ml: [WARNING] file opam: opam field "dev-repo" undefined or unsupported
- ocamlfind ocamlopt unix.cmxa -I /home/opam/.opam/default/lib/ocamlbuild /home/opam/.opam/default/lib/ocamlbuild/ocamlbuildlib.cmxa -linkpkg myocamlbuild.ml /home/opam/.opam/default/lib/ocamlbuild/ocamlbuild.cmx -o myocamlbuild
- ocamlfind ocamldep -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit/ivfs.ml > src/datakit/ivfs.ml.depends
- ocamlfind ocamldep -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit/ivfs.mli > src/datakit/ivfs.mli.depends
- ocamlfind ocamldep -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit/ivfs_tree.mli > src/datakit/ivfs_tree.mli.depends
- ocamlfind ocamldep -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit/ivfs_blob.mli > src/datakit/ivfs_blob.mli.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit -I src -o src/datakit/ivfs_blob.cmi src/datakit/ivfs_blob.mli
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit -I src -o src/datakit/ivfs_tree.cmi src/datakit/ivfs_tree.mli
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit -I src -o src/datakit/ivfs.cmi src/datakit/ivfs.mli
- ocamlfind ocamldep -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit/ivfs_blob.ml > src/datakit/ivfs_blob.ml.depends
- ocamlfind ocamldep -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit/ivfs_merge.ml > src/datakit/ivfs_merge.ml.depends
- ocamlfind ocamldep -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit/ivfs_merge.mli > src/datakit/ivfs_merge.mli.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit -I src -o src/datakit/ivfs_merge.cmi src/datakit/ivfs_merge.mli
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit -I src -o src/datakit/ivfs_blob.cmx src/datakit/ivfs_blob.ml
- ocamlfind ocamldep -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit/ivfs_tree.ml > src/datakit/ivfs_tree.ml.depends
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit -I src -o src/datakit/ivfs_tree.cmx src/datakit/ivfs_tree.ml
- ocamlfind ocamldep -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit/ivfs_remote.ml > src/datakit/ivfs_remote.ml.depends
- ocamlfind ocamldep -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit/ivfs_remote.mli > src/datakit/ivfs_remote.mli.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit -I src -o src/datakit/ivfs_remote.cmi src/datakit/ivfs_remote.mli
- ocamlfind ocamldep -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit/ivfs_rw.ml > src/datakit/ivfs_rw.ml.depends
- ocamlfind ocamldep -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit/ivfs_rw.mli > src/datakit/ivfs_rw.mli.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit -I src -o src/datakit/ivfs_rw.cmi src/datakit/ivfs_rw.mli
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit -I src -o src/datakit/ivfs_merge.cmx src/datakit/ivfs_merge.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit -I src -o src/datakit/ivfs_remote.cmx src/datakit/ivfs_remote.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit -I src -o src/datakit/ivfs_rw.cmx src/datakit/ivfs_rw.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit -I src -o src/datakit/ivfs.cmx src/datakit/ivfs.ml
- ocamlfind ocamlopt -a -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' src/datakit/ivfs_blob.cmx src/datakit/ivfs_tree.cmx src/datakit/ivfs_merge.cmx src/datakit/ivfs_remote.cmx src/datakit/ivfs_rw.cmx src/datakit/ivfs.cmx -o src/datakit/ivfs.cmxa
- ocamlfind ocamlopt -shared -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' src/datakit/ivfs.cmx -o src/datakit/ivfs.cmxs
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit -I src -o src/datakit/ivfs.cmo src/datakit/ivfs.ml
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit -I src -o src/datakit/ivfs_tree.cmo src/datakit/ivfs_tree.ml
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit -I src -o src/datakit/ivfs_remote.cmo src/datakit/ivfs_remote.ml
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit -I src -o src/datakit/ivfs_blob.cmo src/datakit/ivfs_blob.ml
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit -I src -o src/datakit/ivfs_merge.cmo src/datakit/ivfs_merge.ml
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit -I src -o src/datakit/ivfs_rw.cmo src/datakit/ivfs_rw.ml
- ocamlfind ocamlc -a -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'irmin tc datakit-server.vfs asetmap' -package 'bytes lwt astring logs result cstruct fmt rresult' src/datakit/ivfs_blob.cmo src/datakit/ivfs_tree.cmo src/datakit/ivfs_merge.cmo src/datakit/ivfs_remote.cmo src/datakit/ivfs_rw.cmo src/datakit/ivfs.cmo -o src/datakit/ivfs.cma
- ocamlfind ocamldep -package 'asl win-eventlog cmdliner mtime.os logs.cli' -package 'protocol-9p.unix datakit-server.fs9p' -package 'hvsock.lwt-unix named-pipe.lwt uri mirage-flow' -package 'threads conduit.lwt-unix hvsock.lwt' -package 'protocol-9p.unix camlzip' -package 'datakit-server.vfs datakit-server.fs9p' -package 'irmin.http cohttp.lwt irmin-watcher' -package 'git irmin irmin.git irmin.mem irmin-watcher' -package 'cmdliner fmt.cli fmt.tty logs.fmt asetmap' -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit/main.ml > src/datakit/main.ml.depends
- ocamlfind ocamldep -package 'protocol-9p.unix datakit-server.fs9p' -package 'hvsock.lwt-unix named-pipe.lwt uri mirage-flow' -package 'threads conduit.lwt-unix hvsock.lwt' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit_conduit.mli > src/datakit_conduit.mli.depends
- ocamlfind ocamldep -package 'asl win-eventlog cmdliner logs.cli mtime.os' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit_log.mli > src/datakit_log.mli.depends
- ocamlfind ocamldep -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit/ir_io.mli > src/datakit/ir_io.mli.depends
- ocamlfind ocamldep -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/version.ml > src/version.ml.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -thread -package 'protocol-9p.unix datakit-server.fs9p' -package 'hvsock.lwt-unix named-pipe.lwt uri mirage-flow' -package 'threads conduit.lwt-unix hvsock.lwt' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src -I src/datakit -o src/datakit_conduit.cmi src/datakit_conduit.mli
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'asl win-eventlog cmdliner logs.cli mtime.os' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src -I src/datakit -o src/datakit_log.cmi src/datakit_log.mli
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit -I src -o src/datakit/ir_io.cmi src/datakit/ir_io.mli
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src -I src/datakit -o src/version.cmo src/version.ml
- ocamlfind ocamlc -c -g -bin-annot -safe-string -thread -package 'asl win-eventlog cmdliner mtime.os logs.cli' -package 'protocol-9p.unix datakit-server.fs9p' -package 'hvsock.lwt-unix named-pipe.lwt uri mirage-flow' -package 'threads conduit.lwt-unix hvsock.lwt' -package 'protocol-9p.unix camlzip' -package 'datakit-server.vfs datakit-server.fs9p' -package 'irmin.http cohttp.lwt irmin-watcher' -package 'git irmin irmin.git irmin.mem irmin-watcher' -package 'cmdliner fmt.cli fmt.tty logs.fmt asetmap' -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit -I src -o src/datakit/main.cmo src/datakit/main.ml
- ocamlfind ocamldep -package 'protocol-9p.unix datakit-server.fs9p' -package 'hvsock.lwt-unix named-pipe.lwt uri mirage-flow' -package 'threads conduit.lwt-unix hvsock.lwt' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit_conduit.ml > src/datakit_conduit.ml.depends
- ocamlfind ocamldep -package 'asl win-eventlog cmdliner logs.cli mtime.os' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit_log.ml > src/datakit_log.ml.depends
- ocamlfind ocamldep -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit/ir_io.ml > src/datakit/ir_io.ml.depends
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -thread -package 'protocol-9p.unix datakit-server.fs9p' -package 'hvsock.lwt-unix named-pipe.lwt uri mirage-flow' -package 'threads conduit.lwt-unix hvsock.lwt' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src -I src/datakit -o src/datakit_conduit.cmx src/datakit_conduit.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'asl win-eventlog cmdliner logs.cli mtime.os' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src -I src/datakit -o src/datakit_log.cmx src/datakit_log.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit -I src -o src/datakit/ir_io.cmx src/datakit/ir_io.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src -I src/datakit -o src/version.cmx src/version.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -thread -package 'asl win-eventlog cmdliner mtime.os logs.cli' -package 'protocol-9p.unix datakit-server.fs9p' -package 'hvsock.lwt-unix named-pipe.lwt uri mirage-flow' -package 'threads conduit.lwt-unix hvsock.lwt' -package 'protocol-9p.unix camlzip' -package 'datakit-server.vfs datakit-server.fs9p' -package 'irmin.http cohttp.lwt irmin-watcher' -package 'git irmin irmin.git irmin.mem irmin-watcher' -package 'cmdliner fmt.cli fmt.tty logs.fmt asetmap' -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit -I src -o src/datakit/main.cmx src/datakit/main.ml
- ocamlfind ocamlopt -linkpkg -g -thread -package 'asl win-eventlog cmdliner mtime.os logs.cli' -package 'protocol-9p.unix datakit-server.fs9p' -package 'hvsock.lwt-unix named-pipe.lwt uri mirage-flow' -package 'threads conduit.lwt-unix hvsock.lwt' -package 'protocol-9p.unix camlzip' -package 'datakit-server.vfs datakit-server.fs9p' -package 'irmin.http cohttp.lwt irmin-watcher' -package 'git irmin irmin.git irmin.mem irmin-watcher' -package 'cmdliner fmt.cli fmt.tty logs.fmt asetmap' -package prometheus-app -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'bytes lwt astring logs result cstruct fmt rresult' src/datakit/ir_io.cmx src/datakit/ivfs_blob.cmx src/datakit/ivfs_tree.cmx src/datakit/ivfs_merge.cmx src/datakit/ivfs_remote.cmx src/datakit/ivfs_rw.cmx src/datakit/ivfs.cmx src/datakit_conduit.cmx src/datakit_log.cmx src/version.cmx src/datakit/main.cmx -o src/datakit/main.native
- ocamlfind ocamldep -package 'cmdliner fmt.cli fmt.tty logs.fmt' -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit-client/mount.ml > src/datakit-client/mount.ml.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'cmdliner fmt.cli fmt.tty logs.fmt' -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit-client -I src -I src/datakit -o src/datakit-client/mount.cmo src/datakit-client/mount.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'cmdliner fmt.cli fmt.tty logs.fmt' -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit-client -I src -I src/datakit -o src/datakit-client/mount.cmx src/datakit-client/mount.ml
- ocamlfind ocamlopt -linkpkg -g -package 'cmdliner fmt.cli fmt.tty logs.fmt' -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' src/version.cmx src/datakit-client/mount.cmx -o src/datakit-client/mount.native
- pkg.ml: [WARNING] Package description has 8 warning(s), see log above.
+ ocaml "pkg/pkg.ml" "build" "--pinned" "true" "--tests" "true" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit.dev)
- pkg.ml: [WARNING] Watermarks: OPAM fields of opam: topkg: no such command. Did you install topkg-care ?
- pkg.ml: [WARNING] file opam: opam field "maintainer" undefined or unsupported
- pkg.ml: [WARNING] file opam: opam field "authors" undefined or unsupported
- pkg.ml: [WARNING] file opam: opam field "homepage" undefined or unsupported
- pkg.ml: [WARNING] file opam: opam field "bug-reports" undefined or unsupported
- pkg.ml: [WARNING] file opam: opam field "doc" undefined or unsupported
- pkg.ml: [WARNING] file opam: opam field "license" undefined or unsupported
- pkg.ml: [WARNING] file opam: opam field "dev-repo" undefined or unsupported
- ocamlfind ocamldep -package 'conduit.lwt-unix hvsock.lwt-unix named-pipe.lwt' -package datakit-github -package 'datakit-client datakit-server.vfs datakit-server.fs9p' -package 'git irmin.git' -package 'mirage-types.lwt protocol-9p.unix irmin irmin.mem camlzip' -package 'alcotest conduit.lwt-unix str logs.fmt fmt.tty mtime.os' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules tests/test.ml > tests/test.ml.depends
- ocamlfind ocamldep -package 'conduit.lwt-unix hvsock.lwt-unix named-pipe.lwt' -package datakit-github -package 'datakit-client datakit-server.vfs datakit-server.fs9p' -package 'git irmin.git' -package 'mirage-types.lwt protocol-9p.unix irmin irmin.mem camlzip' -package 'alcotest conduit.lwt-unix str logs.fmt fmt.tty mtime.os' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules tests/test_client.mli > tests/test_client.mli.depends
- ocamlfind ocamldep -package 'conduit.lwt-unix hvsock.lwt-unix named-pipe.lwt' -package datakit-github -package 'datakit-client datakit-server.vfs datakit-server.fs9p' -package 'git irmin.git' -package 'mirage-types.lwt protocol-9p.unix irmin irmin.mem camlzip' -package 'alcotest conduit.lwt-unix str logs.fmt fmt.tty mtime.os' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules tests/test_github.ml > tests/test_github.ml.depends
- ocamlfind ocamldep -package 'conduit.lwt-unix hvsock.lwt-unix named-pipe.lwt' -package datakit-github -package 'datakit-client datakit-server.vfs datakit-server.fs9p' -package 'git irmin.git' -package 'mirage-types.lwt protocol-9p.unix irmin irmin.mem camlzip' -package 'alcotest conduit.lwt-unix str logs.fmt fmt.tty mtime.os' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules tests/test_utils.ml > tests/test_utils.ml.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -thread -package 'conduit.lwt-unix hvsock.lwt-unix named-pipe.lwt' -package datakit-github -package 'datakit-client datakit-server.vfs datakit-server.fs9p' -package 'git irmin.git' -package 'mirage-types.lwt protocol-9p.unix irmin irmin.mem camlzip' -package 'alcotest conduit.lwt-unix str logs.fmt fmt.tty mtime.os' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I tests -I src -I src/datakit -o tests/test_utils.cmo tests/test_utils.ml
- ocamlfind ocamlc -c -g -bin-annot -safe-string -thread -package 'conduit.lwt-unix hvsock.lwt-unix named-pipe.lwt' -package datakit-github -package 'datakit-client datakit-server.vfs datakit-server.fs9p' -package 'git irmin.git' -package 'mirage-types.lwt protocol-9p.unix irmin irmin.mem camlzip' -package 'alcotest conduit.lwt-unix str logs.fmt fmt.tty mtime.os' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I tests -I src -I src/datakit -o tests/test_client.cmi tests/test_client.mli
- ocamlfind ocamlc -c -g -bin-annot -safe-string -thread -package 'conduit.lwt-unix hvsock.lwt-unix named-pipe.lwt' -package datakit-github -package 'datakit-client datakit-server.vfs datakit-server.fs9p' -package 'git irmin.git' -package 'mirage-types.lwt protocol-9p.unix irmin irmin.mem camlzip' -package 'alcotest conduit.lwt-unix str logs.fmt fmt.tty mtime.os' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I tests -I src -I src/datakit -o tests/test_github.cmo tests/test_github.ml
- ocamlfind ocamlc -c -g -bin-annot -safe-string -thread -package 'conduit.lwt-unix hvsock.lwt-unix named-pipe.lwt' -package datakit-github -package 'datakit-client datakit-server.vfs datakit-server.fs9p' -package 'git irmin.git' -package 'mirage-types.lwt protocol-9p.unix irmin irmin.mem camlzip' -package 'alcotest conduit.lwt-unix str logs.fmt fmt.tty mtime.os' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I tests -I src -I src/datakit -o tests/test.cmo tests/test.ml
- ocamlfind ocamldep -package 'conduit.lwt-unix hvsock.lwt-unix named-pipe.lwt' -package datakit-github -package 'datakit-client datakit-server.vfs datakit-server.fs9p' -package 'git irmin.git' -package 'mirage-types.lwt protocol-9p.unix irmin irmin.mem camlzip' -package 'alcotest conduit.lwt-unix str logs.fmt fmt.tty mtime.os' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules tests/test_client.ml > tests/test_client.ml.depends
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -thread -package 'conduit.lwt-unix hvsock.lwt-unix named-pipe.lwt' -package datakit-github -package 'datakit-client datakit-server.vfs datakit-server.fs9p' -package 'git irmin.git' -package 'mirage-types.lwt protocol-9p.unix irmin irmin.mem camlzip' -package 'alcotest conduit.lwt-unix str logs.fmt fmt.tty mtime.os' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I tests -I src -I src/datakit -o tests/test_utils.cmx tests/test_utils.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -thread -package 'conduit.lwt-unix hvsock.lwt-unix named-pipe.lwt' -package datakit-github -package 'datakit-client datakit-server.vfs datakit-server.fs9p' -package 'git irmin.git' -package 'mirage-types.lwt protocol-9p.unix irmin irmin.mem camlzip' -package 'alcotest conduit.lwt-unix str logs.fmt fmt.tty mtime.os' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I tests -I src -I src/datakit -o tests/test_client.cmx tests/test_client.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -thread -package 'conduit.lwt-unix hvsock.lwt-unix named-pipe.lwt' -package datakit-github -package 'datakit-client datakit-server.vfs datakit-server.fs9p' -package 'git irmin.git' -package 'mirage-types.lwt protocol-9p.unix irmin irmin.mem camlzip' -package 'alcotest conduit.lwt-unix str logs.fmt fmt.tty mtime.os' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I tests -I src -I src/datakit -o tests/test_github.cmx tests/test_github.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -thread -package 'conduit.lwt-unix hvsock.lwt-unix named-pipe.lwt' -package datakit-github -package 'datakit-client datakit-server.vfs datakit-server.fs9p' -package 'git irmin.git' -package 'mirage-types.lwt protocol-9p.unix irmin irmin.mem camlzip' -package 'alcotest conduit.lwt-unix str logs.fmt fmt.tty mtime.os' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I tests -I src -I src/datakit -o tests/test.cmx tests/test.ml
- ocamlfind ocamlopt -linkpkg -g -thread -package 'conduit.lwt-unix hvsock.lwt-unix named-pipe.lwt' -package datakit-github -package 'datakit-client datakit-server.vfs datakit-server.fs9p' -package 'git irmin.git' -package 'mirage-types.lwt protocol-9p.unix irmin irmin.mem camlzip' -package 'alcotest conduit.lwt-unix str logs.fmt fmt.tty mtime.os' -package 'bytes lwt astring logs result cstruct fmt rresult' src/datakit/ir_io.cmx src/datakit/ivfs_blob.cmx src/datakit/ivfs_tree.cmx src/datakit/ivfs_merge.cmx src/datakit/ivfs_remote.cmx src/datakit/ivfs_rw.cmx src/datakit/ivfs.cmx src/datakit_conduit.cmx tests/test_utils.cmx tests/test_client.cmx tests/test_github.cmx tests/test.cmx -o tests/test.native
- ocamlfind ocamldep -package 'datakit-client protocol-9p.unix' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules examples/ocaml-client/example.ml > examples/ocaml-client/example.ml.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -strict-sequence -package 'datakit-client protocol-9p.unix' -w A -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I examples/ocaml-client -I src -I src/datakit -o examples/ocaml-client/example.cmo examples/ocaml-client/example.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -strict-sequence -package 'datakit-client protocol-9p.unix' -w A -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I examples/ocaml-client -I src -I src/datakit -o examples/ocaml-client/example.cmx examples/ocaml-client/example.ml
- ocamlfind ocamlopt -linkpkg -g -package 'datakit-client protocol-9p.unix' -package 'bytes lwt astring logs result cstruct fmt rresult' examples/ocaml-client/example.cmx -o examples/ocaml-client/example.native
- pkg.ml: [WARNING] Package description has 8 warning(s), see log above.
Processing  1/2: [datakit: ocaml test]
+ ocaml "pkg/pkg.ml" "test" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit.dev)
- /bin/sh: tput: not found
- stty: standard input: Not a tty
- Testing datakit.
-  ...                server           0   Transaction.[OK]                server           0   Transaction.
-  ...                server           1   Qids.[OK]                server           1   Qids.
-  ...                server           2   Watch.[OK]                server           2   Watch.
-  ...                server           3   Range.[OK]                server           3   Range.
-  ...                server           4   Writes.[OK]                server           4   Writes.
-  ...                server           5   Rename branch.[OK]                server           5   Rename branch.
-  ...                server           6   Rename file.[OK]                server           6   Rename file.
-  ...                server           7   Truncate.[OK]                server           7   Truncate.
-  ...                server           8   Parents.[OK]                server           8   Parents.
-  ...                server           9   Merge.[OK]                server           9   Merge.
-  ...                server          10   Merge_metadata.[OK]                server          10   Merge_metadata.
-  ...                server          11   Merge empty.[OK]                server          11   Merge empty.
-  ...                server          12   Conflicts.[OK]                server          12   Conflicts.
-  ...                server          13   Stable inodes.[OK]                server          13   Stable inodes.
-  ...                server          14   RW.[OK]                server          14   RW.
-  ...                server          15   Remotes.[SKIP]              server          15   Remotes.
-  ...                server          16   Blobs fast.[OK]                server          16   Blobs fast.
-  ...                server          17   Blobs random.[OK]                server          17   Blobs random.
-  ...                server          18   Streams.[OK]                server          18   Streams.
-  ...                server          19   Debug.[OK]                server          19   Debug.
-  ...                client           0   Transaction.[OK]                client           0   Transaction.
-  ...                client           1   Watch.[OK]                client           1   Watch.
-  ...                client           2   Make dirs.[OK]                client           2   Make dirs.
-  ...                client           3   Rename branch.[OK]                client           3   Rename branch.
-  ...                client           4   Rename dir.[OK]                client           4   Rename dir.
-  ...                client           5   Rename file.[OK]                client           5   Rename file.
-  ...                client           6   Truncate.[OK]                client           6   Truncate.
-  ...                client           7   Parents.[OK]                client           7   Parents.
-  ...                client           8   Merge.[OK]                client           8   Merge.
-  ...                client           9   Diff.[OK]                client           9   Diff.
-  ...                client          10   Merge_metadata.[OK]                client          10   Merge_metadata.
-  ...                client          11   Merge empty.[OK]                client          11   Merge empty.
-  ...                client          12   Conflicts.[OK]                client          12   Conflicts.
-  ...                client          13   Large write.
- [OK]                client          13   Large write.
-  ...                client          14   Remove.[OK]                client          14   Remove.
-  ...                client          15   Remotes.[SKIP]              client          15   Remotes.
-  ...                client          16   Create_or_replace.[SKIP]              client          16   Create_or_replace.
-  ...                github           0   basic-snapshot.[OK]                github           0   basic-snapshot.
-  ...                github           1   snapshot.[OK]                github           1   snapshot.
-  ...                github           2   capabilities.[OK]                github           2   capabilities.
-  ...                github           3   cleanup.[ERROR]             github           3   cleanup.
-  ...                github           4   events.[OK]                github           4   events.
-  ...                github           5   updates.[OK]                github           5   updates.
-  ...                github           6   startup.[OK]                github           6   startup.
-  ...                github           7   random-github.
- [OK]                github           7   random-github.
-  ...                github           8   random-github-*.[SKIP]              github           8   random-github-*.
-  ...                github           9   random-datakit.[OK]                github           9   random-datakit.
-  ...                github          10   random-datakit-*.[SKIP]              github          10   random-datakit-*.
-  ...                conduit          0   basic.[OK]                conduit          0   basic.
- -- github.003 Failed --
- cleanup.
- _build/_tests/github.003.output:
- +1333675us irmin.git  [DEBUG] remove ["test-snapshot"]
- +1333710us ivfs-remote [DEBUG] create
- +1333726us fs9p       [INFO] accepted a new connection on test
- +1333754us fs9p       [INFO] Using protocol TwoThousandU msize 8215
- +1333795us datakit.client [DEBUG] create_dir ["branch"; "test"]
- +1333868us dkt-github [DEBUG] [sync] test
- +1333888us dkt-github [DEBUG] init_sync test
- +1333960us datakit.client [DEBUG] read_all branch/test/head -> "\n"
- +1333984us datakit.client [DEBUG] create_dir ["branch"; "test";
-                                               "transactions";
-                                               "8837395325023518023"]
- +1334082us datakit.client [DEBUG] create_file ["branch"; "test";
-                                                "transactions";
-                                                "8837395325023518023"; 
-                                                "rw"; "README.md"]
- +1334181us datakit.client [DEBUG] write "Initial commit" to ["branch";
-                                                              "test";
-                                                              "transactions";
-                                                              "8837395325023518023";
-                                                              "msg"]
- +1334267us datakit.client [DEBUG] write "commit" to ["branch"; "test";
-                                                      "transactions";
-                                                      "8837395325023518023";
-                                                      "ctl"]
- +1334397us irmin.git  [DEBUG] compare_and_set
- +1334423us irmin.git  [DEBUG] write_index
- +1334462us datakit.client [DEBUG] create_dir ["branch"; "test";
-                                               "transactions";
-                                               "7273465832554936651"]
- +1334866us dkt-github [DEBUG] snapshot first-sync old=*
- +1334955us datakit.client [DEBUG] read_all branch/test/transactions/7273465832554936651/parents -> "053f0ebe9735b100ea9a0ebf5099b5bf9f424a41\n"
- +1335129us dkt-github [DEBUG] repos ->  
- +1335157us dkt-github [DEBUG] commits ->  
- +1335173us dkt-github [DEBUG] prs ->  
- +1335188us dkt-github [DEBUG] statuses_of_commits  ->  
- +1335203us dkt-github [DEBUG] statuses ->  
- +1335216us dkt-github [DEBUG] refs ->  
- +1335602us dkt-github [DEBUG] repos ->  
- +1335633us dkt-github [DEBUG] [first_sync] bridge: {}
-                               datakit:
-                                 053f0ebe9735b100ea9a0ebf5099b5bf9f424a41: {}
- +1335662us datakit.client [DEBUG] write "close" to ["branch"; "test";
-                                                     "transactions";
-                                                     "7273465832554936651";
-                                                     "ctl"]
- +1335746us datakit.client [DEBUG] create_dir ["branch"; "test";
-                                               "transactions";
-                                               "4662518519888793150"]
- +1335835us datakit.client [DEBUG] make_dirs.aux(["test"; "test"])
- +1335863us datakit.client [DEBUG] create_dir ["branch"; "test";
-                                               "transactions";
-                                               "4662518519888793150"; 
-                                               "rw"; "test"; "test"]
- +1335921us datakit.client [DEBUG] make_dirs.aux(["test"])
- +1335944us datakit.client [DEBUG] create_dir ["branch"; "test";
-                                               "transactions";
-                                               "4662518519888793150"; 
-                                               "rw"; "test"]
- +1336141us datakit.client [DEBUG] create_dir ["branch"; "test";
-                                               "transactions";
-                                               "4662518519888793150"; 
-                                               "rw"; "test"; "test"]
- +1336254us datakit.client [DEBUG] create_file ["branch"; "test";
-                                                "transactions";
-                                                "4662518519888793150"; 
-                                                "rw"; "test"; "test";
-                                                ".monitor"]
- +1336359us datakit.client [DEBUG] write "init" to ["branch"; "test";
-                                                    "transactions";
-                                                    "4662518519888793150";
-                                                    "msg"]
- +1336435us datakit.client [DEBUG] write "commit" to ["branch"; "test";
-                                                      "transactions";
-                                                      "4662518519888793150";
-                                                      "ctl"]
- +1336606us irmin.merge [DEBUG] some ["9a1a97df53ffcd82902a83cbb275c4bd3b4656a8"] | ["053f0ebe9735b100ea9a0ebf5099b5bf9f424a41"]
- +1336634us irmin.merge [DEBUG] default ["9a1a97df53ffcd82902a83cbb275c4bd3b4656a8"] | ["053f0ebe9735b100ea9a0ebf5099b5bf9f424a41"]
- +1336652us irmin.merge [DEBUG] default old=["9a1a97df53ffcd82902a83cbb275c4bd3b4656a8"]
- +1336668us irmin.git  [DEBUG] compare_and_set
- +1336685us irmin.git  [DEBUG] write_index
- +1336720us datakit.client [DEBUG] create_dir ["branch"; "test"]
- --------------------------------------------------------------------------------
- ASSERT counter: 0
- --------------------------------------------------------------------------------
- +1336800us dkt-github [DEBUG] [sync] test
- +1336813us dkt-github [DEBUG] init_sync test
- +1336882us datakit.client [DEBUG] read_all branch/test/head -> "9a1a97df53ffcd82902a83cbb275c4bd3b4656a8\n"
- +1336906us datakit.client [DEBUG] create_dir ["branch"; "test";
-                                               "transactions";
-                                               "419202338891464493"]
- +1336987us dkt-github [DEBUG] snapshot first-sync old=*
- +1337065us datakit.client [DEBUG] read_all branch/test/transactions/419202338891464493/parents -> "9a1a97df53ffcd82902a83cbb275c4bd3b4656a8\n"
- +1337577us datakit.client [DEBUG] read_all snapshots/9a1a97df53ffcd82902a83cbb275c4bd3b4656a8/ro/test/test/.monitor -> ""
- +1337618us dkt-github [DEBUG] repos ->  test/test
- +1337694us dkt-github [DEBUG] commits_of_repo test/test ->  
- +1337716us dkt-github [DEBUG] commits ->  
- +1337778us dkt-github [DEBUG] prs_of_repo test/test ->  
- +1337799us dkt-github [DEBUG] prs ->  
- +1337814us dkt-github [DEBUG] statuses_of_commits  ->  
- +1337831us dkt-github [DEBUG] statuses ->  
- +1337926us dkt-github [DEBUG] refs_of_repo test/test ->  
- +1337948us dkt-github [DEBUG] refs ->  
- +1338668us datakit.client [DEBUG] read_all snapshots/9a1a97df53ffcd82902a83cbb275c4bd3b4656a8/ro/test/test/.monitor -> ""
- +1338708us dkt-github [DEBUG] repos ->  test/test
- +1338839us dkt-github [DEBUG] [first_sync] bridge: {}
-                               datakit:
-                                 9a1a97df53ffcd82902a83cbb275c4bd3b4656a8:
-                                 {repos: test/test }
- +1338878us dkt-github [INFO] API.prs test/test
- +1338892us dkt-github [DEBUG] X.check r read true
- +1338910us dkt-github [INFO] API.refs test/test
- +1338922us dkt-github [DEBUG] X.check r read true
- +1338938us dkt-github [INFO] API.status {test/test bar}
- +1338953us dkt-github [DEBUG] X.check r read true
- +1338970us dkt-github [DEBUG] State.import test/test
-                               new:{repos: test/test refs:
-                                                       {test/test heho[bar]} 
-                                 commits: {test/test bar} }
- +1339010us dkt-github [DEBUG] Snapshot.diff x={repos: test/test }
-                               y={repos: test/test refs: {test/test heho[bar]} 
-                               commits: {test/test bar} }
-                               r=[update: 
-                                 remove: {test/test heho} {test/test bar}]
- +1339059us dkt-github [DEBUG] X.check r excl false
- +1339073us dkt-github [DEBUG] X.check r excl false
- +1339086us dkt-github [DEBUG] call_github_api: [update: 
-                                                remove: {test/test heho}
-                                                  {test/test bar}] [update: 
-                                                                   remove: ]
- +1339123us dkt-github [DEBUG] State.apply [update:  remove: ]
- +1339149us dkt-github [DEBUG] [prune]+prs: 
- +1339161us dkt-github [DEBUG] [prune]-prs: 
- +1339173us dkt-github [DEBUG] [prune]+commits: {test/test bar}
- +1339186us dkt-github [DEBUG] [prune]-commits: 
- +1339198us dkt-github [DEBUG] [prune]+status: 
- +1339209us dkt-github [DEBUG] [prune]-status: 
- +1339223us dkt-github [DEBUG] Snapshot.diff
-                               x={repos: test/test refs: {test/test heho[bar]} 
-                               commits: {test/test bar} }
-                               y={repos: test/test }
-                               r=[update: {test/test heho[bar]}
-                                    {test/test bar}
-                                 remove: ]
- +1339283us dkt-github [DEBUG] update_snapshot (from commit):
-                               {test/test heho[bar]} {test/test bar}
- +1339340us dkt-github [DEBUG] update_ref test/test/ref/heho
- +1339356us datakit.client [DEBUG] make_dirs.aux(["test"; "test"; "ref";
-                                                  "heho"])
- +1339380us datakit.client [DEBUG] create_dir ["branch"; "test";
-                                               "transactions";
-                                               "419202338891464493"; "rw";
-                                               "test"; "test"; "ref"; 
-                                               "heho"]
- +1339444us datakit.client [DEBUG] make_dirs.aux(["test"; "test"; "ref"])
- +1339468us datakit.client [DEBUG] create_dir ["branch"; "test";
-                                               "transactions";
-                                               "419202338891464493"; "rw";
-                                               "test"; "test"; "ref"]
- +1339553us datakit.client [DEBUG] create_dir ["branch"; "test";
-                                               "transactions";
-                                               "419202338891464493"; "rw";
-                                               "test"; "test"; "ref"; 
-                                               "heho"]
- +1339675us datakit.client [DEBUG] create_file ["branch"; "test";
-                                                "transactions";
-                                                "419202338891464493"; 
-                                                "rw"; "test"; "test"; 
-                                                "ref"; "heho"; "head"]
- +1339793us datakit.client [DEBUG] make_dirs.aux(["test"; "test"; "commit"])
- +1339820us datakit.client [DEBUG] create_dir ["branch"; "test";
-                                               "transactions";
-                                               "419202338891464493"; "rw";
-                                               "test"; "test"; "commit"]
- +1339904us datakit.client [DEBUG] write "2 items updated \n{test/test heho[bar]} {test/test bar}" to 
-                                   ["branch"; "test"; "transactions";
-                                    "419202338891464493"; "msg"]
- +1339990us datakit.client [DEBUG] write "commit" to ["branch"; "test";
-                                                      "transactions";
-                                                      "419202338891464493";
-                                                      "ctl"]
- +1340204us irmin.merge [DEBUG] some ["772a022ef5d8666e77a9592c079951d4171d00a6"] | ["9a1a97df53ffcd82902a83cbb275c4bd3b4656a8"]
- +1340236us irmin.merge [DEBUG] default ["772a022ef5d8666e77a9592c079951d4171d00a6"] | ["9a1a97df53ffcd82902a83cbb275c4bd3b4656a8"]
- +1340256us irmin.merge [DEBUG] default old=["772a022ef5d8666e77a9592c079951d4171d00a6"]
- +1340272us irmin.git  [DEBUG] compare_and_set
- +1340291us irmin.git  [DEBUG] write_index
- +1340389us datakit.client [DEBUG] read_all branch/test/head -> "772a022ef5d8666e77a9592c079951d4171d00a6\n"
- +1340604us datakit.client [DEBUG] read_all snapshots/772a022ef5d8666e77a9592c079951d4171d00a6/ro/test/test/ref/heho/head -> "bar\n"
- --------------------------------------------------------------------------------
- ASSERT bar
- --------------------------------------------------------------------------------
- --------------------------------------------------------------------------------
- ASSERT exists commit bar
- --------------------------------------------------------------------------------
- --------------------------------------------------------------------------------
- ASSERT heho is bar
- --------------------------------------------------------------------------------
- --------------------------------------------------------------------------------
- ASSERT counter: 1
- --------------------------------------------------------------------------------
- +1340747us test       [INFO] TEST: add_event Ref: *{test/test heho[foo]}
- +1340771us dkt-github [DEBUG] [sync] test
- +1340785us dkt-github [DEBUG] init_sync test
- +1341016us datakit.client [DEBUG] read_all branch/test/head -> "772a022ef5d8666e77a9592c079951d4171d00a6\n"
- +1341046us datakit.client [DEBUG] create_dir ["branch"; "test";
-                                               "transactions";
-                                               "5004987665530783649"]
- +1341135us dkt-github [DEBUG] snapshot sync-once old=9a1a97df53ffcd82902a83cbb275c4bd3b4656a8
- +1341218us datakit.client [DEBUG] read_all branch/test/transactions/5004987665530783649/parents -> "772a022ef5d8666e77a9592c079951d4171d00a6\n"
- +1341335us datakit.client [DEBUG] read_all snapshots/772a022ef5d8666e77a9592c079951d4171d00a6/diff/9a1a97df53ffcd82902a83cbb275c4bd3b4656a8 -> "+ test/test/ref/heho/head\n"
- +1341363us dkt-github [DEBUG] apply
- +1341559us datakit.client [DEBUG] read_all snapshots/772a022ef5d8666e77a9592c079951d4171d00a6/ro/test/test/ref/heho/head -> "bar\n"
- +1341596us dkt-github [DEBUG] ref_ test/test:heho -> bar
- +1341617us dkt-github [DEBUG] apply {test/test heho}
-                               ->[update: {test/test heho[bar]} remove: ]
- +1341653us dkt-github [DEBUG] [sync_once]
-                               old:bridge: {repos: test/test refs:
-                                                               {test/test heho[bar]}
-                                                               commits:
-                                                                 {test/test bar}
-                                                                 }
-                               datakit:
-                                 9a1a97df53ffcd82902a83cbb275c4bd3b4656a8:
-                                 {repos: test/test }
-                               new:bridge: {repos: test/test refs:
-                                                               {test/test heho[bar]}
-                                                               commits:
-                                                                 {test/test bar}
-                                                                 }
-                               datakit:
-                                 772a022ef5d8666e77a9592c079951d4171d00a6:
-                                 {repos: test/test refs: {test/test heho[bar]} 
-                                   commits: {test/test bar} }
- +1341744us dkt-github [DEBUG] [add_webhooks] repos: 
- +1341760us dkt-github [DEBUG] [sync_webhook] events:
-                               [Ref: *{test/test heho[foo]};
-                                Ref: *{test/test heho[foo]}]
- +1341786us dkt-github [INFO] API.status {test/test foo}
- +1341801us dkt-github [DEBUG] X.check r read true
- +1341823us dkt-github [DEBUG] State.import  new:{}
- +1341846us dkt-github [DEBUG] Snapshot.diff
-                               x={repos: test/test refs: {test/test heho[bar]} 
-                               commits: {test/test bar} }
-                               y={repos: test/test refs: {test/test heho[foo]} 
-                               commits: {test/test bar} {test/test foo} }
-                               r=[update: {test/test heho[bar]}
-                                 remove: {test/test foo}]
- +1341904us dkt-github [DEBUG] X.check r write false
- +1341918us dkt-github [DEBUG] X.check r write false
- +1341932us dkt-github [DEBUG] call_github_api: [update: {test/test heho[bar]}
-                                                remove: {test/test foo}] 
-                               [update:  remove: ]
- +1341971us dkt-github [DEBUG] State.apply [update:  remove: ]
- +1341996us dkt-github [DEBUG] [prune]+prs: 
- +1342008us dkt-github [DEBUG] [prune]-prs: 
- +1342020us dkt-github [DEBUG] [prune]+commits: {test/test foo}
- +1342033us dkt-github [DEBUG] [prune]-commits: {test/test bar}
- +1342047us dkt-github [DEBUG] [prune]+status: 
- +1342058us dkt-github [DEBUG] [prune]-status: 
- +1342073us dkt-github [DEBUG] Snapshot.diff
-                               x={repos: test/test refs: {test/test heho[foo]} 
-                               commits: {test/test foo} }
-                               y={repos: test/test refs: {test/test heho[bar]} 
-                               commits: {test/test bar} }
-                               r=[update: {test/test heho[foo]}
-                                    {test/test foo}
-                                 remove: {test/test bar}]
- +1342141us dkt-github [DEBUG] remove_snapshot (from commit): {test/test bar}
- +1342159us datakit.client [DEBUG] remove ["branch"; "test"; "transactions";
-                                           "5004987665530783649"; "rw";
-                                           "test"; "test"; "commit"; "bar"]
- +1342247us dkt-github [DEBUG] update_snapshot (from commit):
-                               {test/test heho[foo]} {test/test foo}
- +1342269us dkt-github [DEBUG] update_ref test/test/ref/heho
- +1342282us datakit.client [DEBUG] make_dirs.aux(["test"; "test"; "ref";
-                                                  "heho"])
- +1342304us datakit.client [DEBUG] create_dir ["branch"; "test";
-                                               "transactions";
-                                               "5004987665530783649"; 
-                                               "rw"; "test"; "test"; "ref";
-                                               "heho"]
- +1342697us datakit.client [DEBUG] replace_file ["branch"; "test";
-                                                 "transactions";
-                                                 "5004987665530783649"; 
-                                                 "rw"; "test"; "test"; 
-                                                 "ref"; "heho"; "head"] -> "foo\n"
- +1342846us datakit.client [DEBUG] make_dirs.aux(["test"; "test"; "commit"])
- +1342880us datakit.client [DEBUG] create_dir ["branch"; "test";
-                                               "transactions";
-                                               "5004987665530783649"; 
-                                               "rw"; "test"; "test"; "commit"]
- +1342969us datakit.client [DEBUG] write "3 items modified  Updated  {test/test heho[foo]} {test/test foo} \nRemoved  {test/test bar}" to 
-                                   ["branch"; "test"; "transactions";
-                                    "5004987665530783649"; "msg"]
- +1343053us datakit.client [DEBUG] write "commit" to ["branch"; "test";
-                                                      "transactions";
-                                                      "5004987665530783649";
-                                                      "ctl"]
- +1343262us irmin.merge [DEBUG] some ["7e3e4bd103acf27c0d344d6e13677a589800a949"] | ["772a022ef5d8666e77a9592c079951d4171d00a6"]
- +1343293us irmin.merge [DEBUG] default ["7e3e4bd103acf27c0d344d6e13677a589800a949"] | ["772a022ef5d8666e77a9592c079951d4171d00a6"]
- +1343353us irmin.merge [DEBUG] default old=["7e3e4bd103acf27c0d344d6e13677a589800a949"]
- +1343379us irmin.git  [DEBUG] compare_and_set
- +1343399us irmin.git  [DEBUG] write_index
- +1343490us datakit.client [DEBUG] read_all branch/test/head -> "7e3e4bd103acf27c0d344d6e13677a589800a949\n"
- +1343813us datakit.client [DEBUG] read_all snapshots/7e3e4bd103acf27c0d344d6e13677a589800a949/ro/test/test/ref/heho/head -> "foo\n"
- --------------------------------------------------------------------------------
- ASSERT foo
- --------------------------------------------------------------------------------
- --------------------------------------------------------------------------------
- ASSERT exists commit foo
- --------------------------------------------------------------------------------
- --------------------------------------------------------------------------------
- ASSERT heho is foo
- --------------------------------------------------------------------------------
- +1344003us datakit.client [DEBUG] read_all branch/test/head -> "7e3e4bd103acf27c0d344d6e13677a589800a949\n"
- +1344025us dkt-github [DEBUG] [sync] test
- +1344039us dkt-github [DEBUG] init_sync test
- +1344101us datakit.client [DEBUG] read_all branch/test/head -> "7e3e4bd103acf27c0d344d6e13677a589800a949\n"
- +1344122us datakit.client [DEBUG] create_dir ["branch"; "test";
-                                               "transactions";
-                                               "8600108769805409647"]
- +1344196us dkt-github [DEBUG] snapshot sync-once old=772a022ef5d8666e77a9592c079951d4171d00a6
- +1344267us datakit.client [DEBUG] read_all branch/test/transactions/8600108769805409647/parents -> "7e3e4bd103acf27c0d344d6e13677a589800a949\n"
- +1344369us datakit.client [DEBUG] read_all snapshots/7e3e4bd103acf27c0d344d6e13677a589800a949/diff/772a022ef5d8666e77a9592c079951d4171d00a6 -> "* test/test/ref/heho/head\n"
- +1344393us dkt-github [DEBUG] apply
- +1344572us datakit.client [DEBUG] read_all snapshots/7e3e4bd103acf27c0d344d6e13677a589800a949/ro/test/test/ref/heho/head -> "foo\n"
- +1344606us dkt-github [DEBUG] ref_ test/test:heho -> foo
- +1344625us dkt-github [DEBUG] apply {test/test heho}
-                               ->[update: {test/test heho[foo]} remove: ]
- +1344659us dkt-github [DEBUG] [sync_once]
-                               old:bridge: {repos: test/test refs:
-                                                               {test/test heho[foo]}
-                                                               commits:
-                                                                 {test/test foo}
-                                                                 }
-                               datakit:
-                                 772a022ef5d8666e77a9592c079951d4171d00a6:
-                                 {repos: test/test refs: {test/test heho[bar]} 
-                                   commits: {test/test bar} }
-                               new:bridge: {repos: test/test refs:
-                                                               {test/test heho[foo]}
-                                                               commits:
-                                                                 {test/test foo}
-                                                                 }
-                               datakit:
-                                 7e3e4bd103acf27c0d344d6e13677a589800a949:
-                                 {repos: test/test refs: {test/test heho[foo]} 
-                                   commits: {test/test bar} {test/test foo} }
- +1344760us dkt-github [DEBUG] State.import  new:{}
- +1344784us dkt-github [DEBUG] Snapshot.diff
-                               x={repos: test/test refs: {test/test heho[foo]} 
-                               commits: {test/test bar} {test/test foo} }
-                               y={repos: test/test refs: {test/test heho[foo]} 
-                               commits: {test/test foo} }
-                               r=[update: {test/test bar} remove: ]
- +1344839us dkt-github [DEBUG] X.check r write false
- +1344855us dkt-github [DEBUG] call_github_api: [update: {test/test bar}
-                                                remove: ] [update:  remove: ]
- +1344881us dkt-github [DEBUG] State.apply [update:  remove: ]
- +1344905us dkt-github [DEBUG] [prune]+prs: 
- +1344919us dkt-github [DEBUG] [prune]-prs: 
- +1344931us dkt-github [DEBUG] [prune]+commits: {test/test foo}
- +1344945us dkt-github [DEBUG] [prune]-commits: 
- +1344956us dkt-github [DEBUG] [prune]+status: 
- +1344967us dkt-github [DEBUG] [prune]-status: 
- +1344983us dkt-github [DEBUG] Snapshot.diff
-                               x={repos: test/test refs: {test/test heho[foo]} 
-                               commits: {test/test foo} }
-                               y={repos: test/test refs: {test/test heho[foo]} 
-                               commits: {test/test bar} {test/test foo} }
-                               r=[update:  remove: {test/test bar}]
- +1345200us dkt-github [DEBUG] remove_snapshot (from commit): {test/test bar}
- +1345220us datakit.client [DEBUG] remove ["branch"; "test"; "transactions";
-                                           "8600108769805409647"; "rw";
-                                           "test"; "test"; "commit"; "bar"]
- +1345305us datakit.client [DEBUG] write "1 item removed \n{test/test bar}" to 
-                                   ["branch"; "test"; "transactions";
-                                    "8600108769805409647"; "msg"]
- +1345388us datakit.client [DEBUG] write "commit" to ["branch"; "test";
-                                                      "transactions";
-                                                      "8600108769805409647";
-                                                      "ctl"]
- +1345513us irmin.merge [DEBUG] some ["f4d7c6f769da1bc69c1f027ecc39b5f104a7e697"] | ["7e3e4bd103acf27c0d344d6e13677a589800a949"]
- +1345548us irmin.merge [DEBUG] default ["f4d7c6f769da1bc69c1f027ecc39b5f104a7e697"] | ["7e3e4bd103acf27c0d344d6e13677a589800a949"]
- +1345573us irmin.merge [DEBUG] default old=["f4d7c6f769da1bc69c1f027ecc39b5f104a7e697"]
- +1345594us irmin.git  [DEBUG] compare_and_set
- +1345612us irmin.git  [DEBUG] write_index
- +1345700us datakit.client [DEBUG] read_all branch/test/head -> "f4d7c6f769da1bc69c1f027ecc39b5f104a7e697\n"
- --------------------------------------------------------------------------------
- ASSERT same head
- --------------------------------------------------------------------------------
- [failure] Error same head: expecting 7e3e4bd103acf27c0d344d6e13677a589800a949, got f4d7c6f769da1bc69c1f027ecc39b5f104a7e697.
- Raised at file "src/core/lwt.ml", line 805, characters 16-23
- Called from file "src/unix/lwt_main.ml", line 34, characters 8-18
- Called from file "src/alcotest.ml", line 268, characters 8-12
- 
- 
- [failure] Error same head: expecting 7e3e4bd103acf27c0d344d6e13677a589800a949, got f4d7c6f769da1bc69c1f027ecc39b5f104a7e697.
- Raised at file "src/core/lwt.ml", line 805, characters 16-23
- Called from file "src/unix/lwt_main.ml", line 34, characters 8-18
- Called from file "src/alcotest.ml", line 268, characters 8-12
- 
- 
- The full test results are available in `_build/_tests`.
- 1 error! in 3.380s. 44 tests run.
- pkg.ml: [ERROR] Some tests failed.


=-=- Error report -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
+- The following actions failed
| - build datakit dev
+- 
- No changes have been performed
[ERROR] The compilation of datakit failed at "ocaml pkg/pkg.ml test".

#=== ERROR while compiling datakit.dev ========================================#
# command              ocaml pkg/pkg.ml test
# path                 /home/opam/.opam/default/.opam-switch/build/datakit.dev
# exit-code            1
# env-file             /home/opam/.opam/default/.opam-switch/build/datakit.dev/datakit-13393-d8a4ae.env
# output-file          /home/opam/.opam/default/.opam-switch/build/datakit.dev/datakit-13393-d8a4ae.out
### output ###
# [...]
# Called from file "src/alcotest.ml", line 268, characters 8-12
# 
# 
# [failure] Error same head: expecting 7e3e4bd103acf27c0d344d6e13677a589800a949, got f4d7c6f769da1bc69c1f027ecc39b5f104a7e697.
# Raised at file "src/core/lwt.ml", line 805, characters 16-23
# Called from file "src/unix/lwt_main.ml", line 34, characters 8-18
# Called from file "src/alcotest.ml", line 268, characters 8-12
# 
# 
# The full test results are available in `_build/_tests`.
# 1 error! in 3.380s. 44 tests run.
# pkg.ml: [ERROR] Some tests failed.

# Run eval `opam config env` to update the current shell environment
'opam install -y -v -t datakit' failed.
[2017-01-25 15:27.28] Failed: Command "docker" "run" "--rm" "--entrypoint" "/bin/sh" "sha256:159f818f3dfe03bc0f9b66f253d4c2b13200c8955022b0b467809da8b144d226" "-c" "opam remove -y \"datakit\" && opam depext -i -y \"conf-gmp\" \"conf-libpcre\" \"conf-perl\" \"conf-autoconf\"&& opam install -y -t --deps-only \"datakit\" && opam install -y -v -t \"datakit\"" exited with status 4
