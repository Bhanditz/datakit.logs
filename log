=== Docker build Dockerfile.client
[2017-09-28 14:25.49] Starting...
Cloning into '/tmp/with_clone320faf8b'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at f1d8c14 Update conduit upper-bounds in all opam files
[2017-09-28 14:25.54] Rewrite Dockerfile's first line to:
FROM ocaml/opam:alpine_ocaml-4.03.0
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 6.128 MBSending build context to Docker daemon 6.685 MBSending build context to Docker daemon 7.242 MBSending build context to Docker daemon 7.799 MBSending build context to Docker daemon 8.356 MBSending build context to Docker daemon 8.913 MBSending build context to Docker daemon 8.915 MB
Step 1/22 : FROM ocaml/opam:alpine_ocaml-4.03.0
 ---> 2a6e40273e97
Step 2/22 : RUN git -C /home/opam/opam-repository fetch origin &&     git -C /home/opam/opam-repository reset 21da79c65 --hard &&     opam update -u
 ---> Using cache
 ---> 5626611e2b54
Step 3/22 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> 8aeb89b88517
Step 4/22 : RUN opam depext -ui lwt alcotest conf-libev
 ---> Using cache
 ---> bb13b5e75a12
Step 5/22 : COPY datakit-client.opam /home/opam/src/datakit/datakit-client.opam
 ---> Using cache
 ---> c7cea63e3c75
Step 6/22 : RUN opam pin add datakit-client.dev /home/opam/src/datakit -n
 ---> Using cache
 ---> e6576d4f062a
Step 7/22 : COPY datakit-client-9p.opam /home/opam/src/datakit/datakit-client-9p.opam
 ---> Using cache
 ---> cb89da0d7ce0
Step 8/22 : RUN opam pin add datakit-client-9p.dev /home/opam/src/datakit -n
 ---> Using cache
 ---> f13b8d90c357
Step 9/22 : COPY datakit-client-git.opam /home/opam/src/datakit/datakit-client-git.opam
 ---> Using cache
 ---> e9b0f609c22f
Step 10/22 : RUN opam pin add datakit-client-git.dev /home/opam/src/datakit -n
 ---> Using cache
 ---> ed4296aaf7ae
Step 11/22 : RUN opam depext datakit-client datakit-client-9p datakit-client-git inotify
 ---> Using cache
 ---> 317a5183c712
Step 12/22 : RUN opam install datakit-client --deps
 ---> Using cache
 ---> d3443e51bac7
Step 13/22 : RUN opam install irmin-git irmin-watcher git-unix inotify     astring logs fmt cstruct protocol-9p-unix cmdliner     irmin-mem irmin-git alcotest
 ---> Using cache
 ---> d38c891e0133
Step 14/22 : RUN opam depext camlzip && opam install ounit camlzip fpath conf-which qcheck     fileutils bos qtest
 ---> Using cache
 ---> ac41b141f7f6
Step 15/22 : COPY . /home/opam/src/datakit
 ---> 8ba454b48061
Error removing intermediate container 86efbf7dafc0: Driver aufs failed to remove root filesystem 86efbf7dafc0477427b8bd1ece3a5c7f956a9beb04e271580f07ba95285f4d62: rename /var/lib/docker/aufs/mnt/0f6d9146903e348419cde6c39601c46a4b2f79fc1e6112c3959eddad9744e4f6 /var/lib/docker/aufs/mnt/0f6d9146903e348419cde6c39601c46a4b2f79fc1e6112c3959eddad9744e4f6-removing: device or resource busy
Step 16/22 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in a6b100cc2066
 ---> 5b8d941d177f
Error removing intermediate container 86efbf7dafc0: No such container: 86efbf7dafc0477427b8bd1ece3a5c7f956a9beb04e271580f07ba95285f4d62
Step 17/22 : RUN opam update datakit-client datakit-client-9p datakit-client-git
 ---> Running in 9868f874abf4

=-=- Synchronizing development packages -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
[datakit-client-9p: local] Command started
[datakit-client-git: local] Command started
[datakit-client-9p] /home/opam/src/datakit/ synchronized
[datakit-client] /home/opam/src/datakit/ synchronized
[datakit-client-git] /home/opam/src/datakit/ synchronized
 ---> 678a4d659fd4
Removing intermediate container a6b100cc2066
Removing intermediate container 9868f874abf4
Error removing intermediate container 86efbf7dafc0: No such container: 86efbf7dafc0477427b8bd1ece3a5c7f956a9beb04e271580f07ba95285f4d62
Step 18/22 : RUN opam install datakit-client.dev -vv -t
 ---> Running in 60c0140e3799

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.03.0/packages.dev/datakit-client"
- sending incremental file list
- 
- sent 9,003 bytes  received 52 bytes  18,110.00 bytes/sec
- total size is 1,340,573  speedup is 148.05
[datakit-client] /home/opam/src/datakit/ already up-to-date
The following actions will be performed:
  - install datakit-client dev*

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.03.0/packages.dev/datakit-client"
- sending incremental file list
- 
- sent 9,003 bytes  received 52 bytes  18,110.00 bytes/sec
- total size is 1,340,573  speedup is 148.05
[datakit-client.dev] /home/opam/src/datakit/ already up-to-date

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: jbuilder build] Command started
+ jbuilder "build" "-p" "datakit-client" "-j" "4" (CWD=/home/opam/.opam/4.03.0/build/datakit-client.dev)
-     ocamldep api/ocaml/datakit_client.depends.ocamldep-output
-     ocamldep api/ocaml/datakit_client.dependsi.ocamldep-output
-       ocamlc api/ocaml/datakit_client.{cmi,cmti}
-       ocamlc api/ocaml/datakit_client.{cmo,cmt}
-       ocamlc api/ocaml/datakit_client.cma
-     ocamlopt api/ocaml/datakit_client.{cmx,o}
-     ocamlopt api/ocaml/datakit_client.{a,cmxa}
-     ocamlopt api/ocaml/datakit_client.cmxs
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/META" "/home/opam/.opam/4.03.0/lib/datakit-client/META"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/opam" "/home/opam/.opam/4.03.0/lib/datakit-client/opam"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.cmi" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client.cmi"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.cmx" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client.cmx"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.cmt" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client.cmt"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.cmti" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client.cmti"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.mli" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client.mli"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.cma" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client.cma"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.cmxa" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client.cmxa"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.a" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client.a"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.cmxs" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client.cmxs"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/doc/datakit-client/README.md" "/home/opam/.opam/4.03.0/doc/datakit-client/README.md"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/doc/datakit-client/LICENSE.md" "/home/opam/.opam/4.03.0/doc/datakit-client/LICENSE.md"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/doc/datakit-client/CHANGES.md" "/home/opam/.opam/4.03.0/doc/datakit-client/CHANGES.md"
-> installed datakit-client.dev
Done.
 ---> d5bce97b8670
Error removing intermediate container 86efbf7dafc0: No such container: 86efbf7dafc0477427b8bd1ece3a5c7f956a9beb04e271580f07ba95285f4d62
Step 19/22 : RUN opam install datakit-client-9p -vv -t
 ---> Running in bf90f0d476ed

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client-9p: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.03.0/packages.dev/datakit-client-9p"
- sending incremental file list
- 
- sent 9,003 bytes  received 52 bytes  18,110.00 bytes/sec
- total size is 1,340,573  speedup is 148.05
[datakit-client-9p] /home/opam/src/datakit/ already up-to-date
The following actions will be performed:
  - install datakit-client-9p dev*

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client-9p: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.03.0/packages.dev/datakit-client-9p"
- sending incremental file list
- 
- sent 9,003 bytes  received 52 bytes  18,110.00 bytes/sec
- total size is 1,340,573  speedup is 148.05
[datakit-client-9p.dev] /home/opam/src/datakit/ already up-to-date

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client-9p: jbuilder build] Command started
+ jbuilder "build" "-p" "datakit-client-9p" "-j" "4" (CWD=/home/opam/.opam/4.03.0/build/datakit-client-9p.dev)
-     ocamldep api/ocaml/9p/mount/mount.depends.ocamldep-output
-     ocamldep api/ocaml/9p/datakit_client_9p.depends.ocamldep-output
-     ocamldep api/ocaml/9p/datakit_client_9p.dependsi.ocamldep-output
-       ocamlc api/ocaml/9p/mount/version.{cmi,cmo,cmt}
-       ocamlc api/ocaml/9p/datakit_client_9p.{cmi,cmti}
-     ocamlopt api/ocaml/9p/mount/version.{cmx,o}
-       ocamlc api/ocaml/9p/mount/mount.{cmi,cmo,cmt}
-     ocamlopt api/ocaml/9p/mount/mount.{cmx,o}
-     ocamlopt api/ocaml/9p/mount/mount.exe
-       ocamlc api/ocaml/9p/datakit_client_9p.{cmo,cmt}
-       ocamlc api/ocaml/9p/datakit_client_9p.cma
-     ocamlopt api/ocaml/9p/datakit_client_9p.{cmx,o}
-     ocamlopt api/ocaml/9p/datakit_client_9p.{a,cmxa}
-     ocamlopt api/ocaml/9p/datakit_client_9p.cmxs
+ install "-m" "0755" "/home/opam/.opam/4.03.0/build/datakit-client-9p.dev/_build/install/default/bin/datakit-mount" "/home/opam/.opam/4.03.0/bin/datakit-mount"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client-9p.dev/_build/install/default/lib/datakit-client-9p/META" "/home/opam/.opam/4.03.0/lib/datakit-client-9p/META"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client-9p.dev/_build/install/default/lib/datakit-client-9p/opam" "/home/opam/.opam/4.03.0/lib/datakit-client-9p/opam"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client-9p.dev/_build/install/default/lib/datakit-client-9p/datakit_client_9p.cmi" "/home/opam/.opam/4.03.0/lib/datakit-client-9p/datakit_client_9p.cmi"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client-9p.dev/_build/install/default/lib/datakit-client-9p/datakit_client_9p.cmx" "/home/opam/.opam/4.03.0/lib/datakit-client-9p/datakit_client_9p.cmx"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client-9p.dev/_build/install/default/lib/datakit-client-9p/datakit_client_9p.cmt" "/home/opam/.opam/4.03.0/lib/datakit-client-9p/datakit_client_9p.cmt"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client-9p.dev/_build/install/default/lib/datakit-client-9p/datakit_client_9p.cmti" "/home/opam/.opam/4.03.0/lib/datakit-client-9p/datakit_client_9p.cmti"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client-9p.dev/_build/install/default/lib/datakit-client-9p/datakit_client_9p.mli" "/home/opam/.opam/4.03.0/lib/datakit-client-9p/datakit_client_9p.mli"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client-9p.dev/_build/install/default/lib/datakit-client-9p/datakit_client_9p.cma" "/home/opam/.opam/4.03.0/lib/datakit-client-9p/datakit_client_9p.cma"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client-9p.dev/_build/install/default/lib/datakit-client-9p/datakit_client_9p.cmxa" "/home/opam/.opam/4.03.0/lib/datakit-client-9p/datakit_client_9p.cmxa"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client-9p.dev/_build/install/default/lib/datakit-client-9p/datakit_client_9p.a" "/home/opam/.opam/4.03.0/lib/datakit-client-9p/datakit_client_9p.a"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client-9p.dev/_build/install/default/lib/datakit-client-9p/datakit_client_9p.cmxs" "/home/opam/.opam/4.03.0/lib/datakit-client-9p/datakit_client_9p.cmxs"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client-9p.dev/_build/install/default/doc/datakit-client-9p/README.md" "/home/opam/.opam/4.03.0/doc/datakit-client-9p/README.md"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client-9p.dev/_build/install/default/doc/datakit-client-9p/LICENSE.md" "/home/opam/.opam/4.03.0/doc/datakit-client-9p/LICENSE.md"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client-9p.dev/_build/install/default/doc/datakit-client-9p/CHANGES.md" "/home/opam/.opam/4.03.0/doc/datakit-client-9p/CHANGES.md"
-> installed datakit-client-9p.dev
Done.
 ---> 36971c6ed014
Error removing intermediate container 86efbf7dafc0: No such container: 86efbf7dafc0477427b8bd1ece3a5c7f956a9beb04e271580f07ba95285f4d62
Step 20/22 : RUN opam install datakit-client-git.dev -vv -t
 ---> Running in 9f4683b8287a

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client-git: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.03.0/packages.dev/datakit-client-git"
- sending incremental file list
- 
- sent 9,003 bytes  received 52 bytes  6,036.67 bytes/sec
- total size is 1,340,573  speedup is 148.05
[datakit-client-git] /home/opam/src/datakit/ already up-to-date
The following actions will be performed:
  - install datakit-client-git dev*

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client-git: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.03.0/packages.dev/datakit-client-git"
- sending incremental file list
- 
- sent 9,003 bytes  received 52 bytes  18,110.00 bytes/sec
- total size is 1,340,573  speedup is 148.05
[datakit-client-git.dev] /home/opam/src/datakit/ already up-to-date

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client-git: jbuilder build] Command started
+ jbuilder "build" "-p" "datakit-client-git" "-j" "4" (CWD=/home/opam/.opam/4.03.0/build/datakit-client-git.dev)
-     ocamldep api/ocaml/git/datakit_client_git.dependsi.ocamldep-output
-     ocamldep api/ocaml/git/datakit_client_git.depends.ocamldep-output
-       ocamlc api/ocaml/git/datakit_client_git.{cmi,cmti}
-       ocamlc api/ocaml/git/datakit_client_git.{cmo,cmt}
-       ocamlc api/ocaml/git/datakit_client_git.cma
-     ocamlopt api/ocaml/git/datakit_client_git.{cmx,o}
-     ocamlopt api/ocaml/git/datakit_client_git.{a,cmxa}
-     ocamlopt api/ocaml/git/datakit_client_git.cmxs
[datakit-client-git: jbuilder runtest] Command started
+ jbuilder "runtest" "tests/datakit-git" (CWD=/home/opam/.opam/4.03.0/build/datakit-client-git.dev)
- Error: External library "conduit.lwt-unix" not found.
- -> required by "src/datakit-io/jbuild (context default)"
- Hint: try: jbuilder external-lib-deps --missing @tests/datakit-git/runtest
[91m[ERROR] The compilation of datakit-client-git failed at "jbuilder runtest
        tests/datakit-git".
[0m[91m
#=== ERROR while installing datakit-client-git.dev ============================#
# opam-version         1.2.2
# os                   linux
# command              jbuilder runtest tests/datakit-git
# path                 /home/opam/.opam/4.03.0/build/datakit-client-git.dev
# compiler             4.03.0
# exit-code            1
# env-file             /home/opam/.opam/4.03.0/build/datakit-client-git.dev/datakit-client-git-7-05296d.env
# stdout-file          /home/opam/.opam/4.03.0/build/datakit-client-git.dev/datakit-client-git-7-05296d.out
# stderr-file          /home/opam/.opam/4.03.0/build/datakit-client-git.dev/datakit-client-git-7-05296d.err
### stderr ###
# Error: External library "conduit.lwt-unix" not found.
# -> required by "src/datakit-io/jbuild (context default)"
# Hint: try: jbuilder external-lib-deps --missing @tests/datakit-git/runtest

[0m

=-=- Error report -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
The following actions failed
  - install datakit-client-git dev
No changes have been performed
[91m'opam install datakit-client-git.dev -vv -t' failed.
[0mThe command '/bin/sh -c opam install datakit-client-git.dev -vv -t' returned a non-zero code: 4
[2017-09-28 14:27.25] Failed: Command "docker" "build" "-f" "Dockerfile.client" "." exited with status 4
