=== Docker build Dockerfile.bridge-local-git
[2017-05-09 12:36.22] Starting...
Cloning into '/tmp/with_clone9ced6c'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at 7d24c1e Update CHANGES
[2017-05-09 12:36.23] Rewrite Dockerfile's first line to:
FROM sha256:b46e662735b47bd5e316da63d788d365ee2fd1ac875c2daccf38af6e34aeadb8
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 6.099 MBSending build context to Docker daemon 6.099 MB
Step 1/21 : FROM sha256:b46e662735b47bd5e316da63d788d365ee2fd1ac875c2daccf38af6e34aeadb8
 ---> b46e662735b4
Step 2/21 : RUN opam pin add github --dev -n
 ---> Running in 5a36c79230c3
github is now git-pinned to https://github.com/mirage/ocaml-github.git

[github: git]
[github: git]
[github: git]
[github: git]
[github: git]
[github: git]
[github] https://github.com/mirage/ocaml-github.git updated

 ---> 5540cd09635c
Removing intermediate container 5a36c79230c3
Step 3/21 : RUN opam pin add datakit-github.dev /home/opam/src/datakit -n
 ---> Running in bace4a89d0f2
datakit-github is now path-pinned to /home/opam/src/datakit

[datakit-github: local]
[datakit-github] /home/opam/src/datakit/ synchronized
[datakit-github] Installing new package description from /home/opam/src/datakit

 ---> ab7f20d045f1
Removing intermediate container bace4a89d0f2
Step 4/21 : RUN opam pin add irmin.1.1.0 -n https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0
 ---> Running in 051ae031d3a3
irmin is now git-pinned to https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0

[irmin: git]
[irmin: git]
[irmin: git]
[irmin: git]
[irmin: git]
[irmin: git]
[irmin: git]
[irmin: git]
[irmin] https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0 updated

 ---> d335f993a578
Removing intermediate container 051ae031d3a3
Step 5/21 : RUN opam pin add irmin-git.1.1.0 -n https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0
 ---> Running in 63175d370a7c
irmin-git is now git-pinned to https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0

[irmin-git: git]
[irmin-git: git]
[irmin-git: git]
[irmin-git: git]
[irmin-git: git]
[irmin-git: git]
[irmin-git: git]
[irmin-git: git]
[irmin-git] https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0 updated

 ---> 50241a39fba7
Removing intermediate container 63175d370a7c
Step 6/21 : RUN opam pin add irmin-unix.1.1.0 -n https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0
 ---> Running in cb612ee9ac31
irmin-unix is now git-pinned to https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0

[irmin-unix: git]
[irmin-unix: git]
[irmin-unix: git]
[irmin-unix: git]
[irmin-unix: git]
[irmin-unix: git]
[irmin-unix: git]
[irmin-unix: git]
[irmin-unix] https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0 updated
[irmin-unix] Installing new package description from
https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0

 ---> ed1813789096
Removing intermediate container cb612ee9ac31
Step 7/21 : RUN opam depext datakit-github && opam install datakit-github --deps
 ---> Running in 6207c7566bf5
# Detecting depexts using flags: x86_64 linux alpine
# The following system packages are needed:
#  - m4
#  - ncurses-dev
#  - pkgconfig
m4
ncurses-dev
pkgconf
# All required OS packages found.

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-github: local] Command started
[datakit-github] /home/opam/src/datakit/ already up-to-date
 ---> b236154cb534
Removing intermediate container 6207c7566bf5
Step 8/21 : COPY datakit-bridge-local-git.opam /home/opam/src/datakit/datakit-bridge-local-git.opam
 ---> 09f51a43ec12
Removing intermediate container caf5d048332a
Step 9/21 : RUN opam pin add datakit-bridge-local-git.dev /home/opam/src/datakit -n
 ---> Running in ef1ec464aea8
datakit-bridge-local-git is now path-pinned to /home/opam/src/datakit

[datakit-bridge-local-git: local]
[datakit-bridge-local-git] /home/opam/src/datakit/ synchronized
[datakit-bridge-local-git] Installing new package description from
/home/opam/src/datakit

 ---> 695717829893
Removing intermediate container ef1ec464aea8
Step 10/21 : RUN opam depext datakit-bridge-local-git && opam install datakit-bridge-local-git --deps
 ---> Running in 6f51d165754f
# Detecting depexts using flags: x86_64 linux alpine
# The following system packages are needed:
#  - gmp-dev
#  - linux-headers
#  - m4
#  - ncurses-dev
#  - openssl-dev
#  - perl
#  - pkgconfig
#  - zlib-dev
m4
ncurses-dev
pkgconf
# The following new OS packages need to be installed: gmp-dev linux-headers openssl-dev perl zlib-dev
The following command needs to be run through "sudo":
    apk add gmp-dev linux-headers openssl-dev perl zlib-dev
(1/8) Installing libgmpxx (6.1.1-r0)
(2/8) Installing gmp-dev (6.1.1-r0)
(3/8) Installing linux-headers (4.4.6-r1)
(4/8) Installing zlib-dev (1.2.8-r2)
(5/8) Installing libcrypto1.0 (1.0.2k-r0)
(6/8) Installing libssl1.0 (1.0.2k-r0)
(7/8) Installing openssl-dev (1.0.2k-r0)
(8/8) Installing perl (5.24.0-r0)
Executing busybox-1.25.1-r0.trigger
OK: 654 MiB in 101 packages
# OS packages installation successful

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-bridge-local-git: local] Command started
[datakit-bridge-local-git] /home/opam/src/datakit/ already up-to-date
The following actions will be performed:
  - install conf-perl       1     
  - install camlzip         1.07  
  - install calendar        2.03.2
  - install mtime           0.8.4 
  - install magic-mime      1.0.0 
  - install datakit-github  dev*  
  - install fieldslib       v0.9.0
  - install conf-gmp        1     
  - install ocamlgraph      1.8.7 
  - install cpuid           0.1.1 
  - install uutf            1.0.1 
  - install mirage-no-solo5 1     
  - install crunch          2.0.0 
  - install ipaddr          2.7.2 
  - install base64          2.1.2 
  - install irmin-watcher   0.2.0 
  - install mstruct         1.3.2 
  - install dispatch        0.3.0 
  - install mirage-no-xen   1     
  - install hex             1.0.0 
  - install ppx_fields_conv v0.9.0
  - install zarith          1.4.1 
  - install jsonm           1.0.1 
  - install conduit         0.15.3
  - install git             1.10.0
  - install nocrypto        0.5.4 
  - install irmin           1.1.0*
  - install cohttp          0.22.0
  - install irmin-git       1.1.0*
  - install webmachine      0.4.0 
  - install git-http        1.10.0
  - install irmin-http      1.0.0 
  - install git-unix        1.10.1
  - install irmin-unix      1.1.0*
===== 34 to install =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[base64: http] Command started
[calendar: http] Command started
[camlzip: http] Command started
[calendar: http] Command started
[calendar.2.03.2] http://forge.ocamlcore.org/frs/download.php/915/calendar-2.03.2.tar.gz downloaded
[cohttp: http] Command started
[base64: http] Command started
[base64.2.1.2] https://github.com/mirage/ocaml-base64/releases/download/v2.1.2/base64-2.1.2.tbz downloaded
[conduit: http] Command started
[camlzip: http] Command started
[camlzip.1.07] https://github.com/xavierleroy/camlzip/archive/rel107.zip downloaded
[cpuid: http] Command started
[cohttp: http] Command started
[cohttp.0.22.0] https://github.com/mirage/ocaml-cohttp/archive/v0.22.0.tar.gz downloaded
[crunch: http] Command started
[conduit: http] Command started
[conduit.0.15.3] https://github.com/mirage/ocaml-conduit/archive/v0.15.3.tar.gz downloaded
[datakit-github: local] Command started
[datakit-github.dev] /home/opam/src/datakit/ already up-to-date
[dispatch: http] Command started
[cpuid: http] Command started
[cpuid.0.1.1] https://github.com/pqwy/cpuid/releases/download/v0.1.1/cpuid-0.1.1.tbz downloaded
[fieldslib: http] Command started
[fieldslib: http] Command started
[fieldslib.v0.9.0] https://ocaml.janestreet.com/ocaml-core/v0.9/files/fieldslib-v0.9.0.tar.gz downloaded
[git: http] Command started
[crunch: http] Command started
[crunch.2.0.0] https://github.com/mirage/ocaml-crunch/releases/download/2.0.0/crunch-2.0.0.tbz downloaded
[git-http: http] Command started
[dispatch: http] Command started
[dispatch.0.3.0] https://github.com/inhabitedtype/ocaml-dispatch/archive/0.3.0.tar.gz downloaded
[git-unix: http] Command started
[git-http: http] Command started
[git-http.1.10.0] https://github.com/mirage/ocaml-git/releases/download/1.10.0/git-1.10.0.tbz downloaded
[hex: http] Command started
[git-unix: http] Command started
[git: http] Command started
[git-unix.1.10.1] https://github.com/mirage/ocaml-git/releases/download/1.10.1/git-1.10.1.tbz downloaded
[ipaddr: http] Command started
[git.1.10.0] https://github.com/mirage/ocaml-git/releases/download/1.10.0/git-1.10.0.tbz downloaded
[irmin: git] Command started
[irmin: git] Command started
[irmin: git] Command started
[irmin: git] Command started
[irmin] https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0 already up-to-date
[irmin-git: git] Command started
[irmin-git: git] Command started
[hex: http] Command started
[hex.1.0.0] https://github.com/mirage/ocaml-hex/archive/1.0.0.tar.gz downloaded
[irmin-http: http] Command started
[ipaddr: http] Command started
[ipaddr.2.7.2] https://github.com/mirage/ocaml-ipaddr/releases/download/2.7.2/ipaddr-2.7.2.tbz downloaded
[irmin-unix: git] Command started
[irmin-unix: git] Command started
[irmin-git: git] Command started
[irmin-git: git] Command started
[irmin-git] https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0 already up-to-date
[irmin-watcher: http] Command started
[irmin-unix: git] Command started
[irmin-unix: git] Command started
[irmin-unix] https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0 already up-to-date
[jsonm: http] Command started
[jsonm: http] Command started
[jsonm.1.0.1] http://erratique.ch/software/jsonm/releases/jsonm-1.0.1.tbz downloaded
[magic-mime: http] Command started
[irmin-watcher: http] Command started
[irmin-watcher.0.2.0] https://github.com/samoht/irmin-watcher/releases/download/0.2.0/irmin-watcher-0.2.0.tbz downloaded
[mstruct: http] Command started
[magic-mime: http] Command started
[magic-mime.1.0.0] https://github.com/mirage/ocaml-magic-mime/archive/v1.0.0.tar.gz downloaded
[mtime: http] Command started
[mtime: http] Command started
[mtime.0.8.4] http://erratique.ch/software/mtime/releases/mtime-0.8.4.tbz downloaded
[nocrypto: http] Command started
[irmin-http: http] Command started
[irmin-http.1.0.0] https://github.com/mirage/irmin/releases/download/1.0.0/irmin-1.0.0.tbz downloaded
[ocamlgraph: http] Command started
[ocamlgraph: http] Command started
[ocamlgraph.1.8.7] http://ocamlgraph.lri.fr/download/ocamlgraph-1.8.7.tar.gz downloaded
[ppx_fields_conv: http] Command started
[mstruct: http] Command started
[mstruct.1.3.2] https://github.com/mirage/ocaml-mstruct/archive/1.3.2.tar.gz downloaded
[uutf: http] Command started
[uutf: http] Command started
[uutf.1.0.1] http://erratique.ch/software/uutf/releases/uutf-1.0.1.tbz downloaded
[webmachine: http] Command started
[ppx_fields_conv: http] Command started
[ppx_fields_conv.v0.9.0] https://ocaml.janestreet.com/ocaml-core/v0.9/files/ppx_fields_conv-v0.9.0.tar.gz downloaded
[zarith: http] Command started
[zarith: http] Command started
[zarith.1.4.1] https://forge.ocamlcore.org/frs/download.php/1574/zarith-1.4.1.tgz downloaded
[webmachine: http] Command started
[webmachine.0.4.0] https://github.com/inhabitedtype/ocaml-webmachine/archive/0.4.0.tar.gz downloaded
[nocrypto: http] Command started
[nocrypto.0.5.4] https://github.com/mirleft/ocaml-nocrypto/releases/download/v0.5.4/nocrypto-0.5.4.tbz downloaded

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[base64: ocaml build] Command started
[calendar: ./configure] Command started
[camlzip: make all] Command started
[conf-gmp: sh] Command started
-> installed conf-gmp.1
[conf-perl: perl] Command started
-> installed conf-perl.1
[cpuid: ocaml build] Command started
-> installed base64.2.1.2
[crunch: ocaml build] Command started
[calendar: make] Command started
[camlzip: make allopt] Command started
[camlzip: make install-findlib] Command started
-> installed camlzip.1.07
[datakit-github: jbuilder build] Command started
-> installed cpuid.0.1.1
[dispatch: ocaml setup.ml] Command started
-> installed crunch.2.0.0
[fieldslib: jbuilder build] Command started
-> installed datakit-github.dev
[hex: ./configure] Command started
-> installed fieldslib.v0.9.0
[ipaddr: ocaml build] Command started
[calendar: make install] Command started
-> installed calendar.2.03.2
[irmin-watcher: ocaml build] Command started
[dispatch: ocaml setup.ml] Command started
[hex: make] Command started
-> installed irmin-watcher.0.2.0
[magic-mime: ./configure] Command started
-> installed ipaddr.2.7.2
[conduit: ./configure] Command started
[dispatch: ocaml setup.ml] Command started
[conduit: make] Command started
[magic-mime: make] Command started
[hex: make install] Command started
-> installed dispatch.0.3.0
-> installed mirage-no-solo5.1
-> installed mirage-no-xen.1
[mstruct: ./configure] Command started
-> installed hex.1.0.0
[mtime: ocaml build] Command started
[magic-mime: make install] Command started
[mstruct: make] Command started
-> installed mtime.0.8.4
[ocamlgraph: touch] Command started
[ocamlgraph: ./configure] Command started
[ocamlgraph: make] Command started
-> installed magic-mime.1.0.0
[ppx_fields_conv: jbuilder build] Command started
[conduit: make install] Command started
-> installed conduit.0.15.3
[uutf: ocaml build] Command started
[mstruct: make install] Command started
-> installed ppx_fields_conv.v0.9.0
[cohttp: make] Command started
-> installed uutf.1.0.1
[jsonm: ocaml build] Command started
-> installed mstruct.1.3.2
[zarith: ./configure] Command started
[zarith: make] Command started
-> installed jsonm.1.0.1
[zarith: make install] Command started
-> installed zarith.1.4.1
[nocrypto: ocaml build] Command started
[ocamlgraph: make install-findlib] Command started
-> installed ocamlgraph.1.8.7
[git: ocaml build] Command started
[irmin: ocaml build] Command started
-> installed git.1.10.0
-> installed irmin.1.1.0
[irmin-git: ocaml build] Command started
-> installed nocrypto.0.5.4
-> installed irmin-git.1.1.0
[cohttp: make install] Command started
-> installed cohttp.0.22.0
[git-http: ocaml build] Command started
[webmachine: ocaml setup.ml] Command started
-> installed git-http.1.10.0
[git-unix: ocaml build] Command started
[webmachine: ocaml setup.ml] Command started
-> installed git-unix.1.10.1
[webmachine: ocaml setup.ml] Command started
-> installed webmachine.0.4.0
[irmin-http: ocaml build] Command started
-> installed irmin-http.1.0.0
[irmin-unix: ocaml build] Command started
-> installed irmin-unix.1.1.0
Done.
 ---> c34d44e8947a
Removing intermediate container 6f51d165754f
Step 11/21 : COPY . /home/opam/src/datakit/
 ---> 62713ef34940
Removing intermediate container 1c68f935375a
Step 12/21 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in 37d26bba0af4
 ---> 6face0a62dc7
Removing intermediate container 37d26bba0af4
Step 13/21 : RUN cd /home/opam/src/datakit &&     scripts/watermark.sh &&     git status --porcelain
 ---> Running in 493f8be35ef7
 M Dockerfile.bridge-local-git
 M src/version.ml
 ---> 99950d725d7d
Removing intermediate container 493f8be35ef7
Step 14/21 : RUN opam update datakit-bridge-local-git
 ---> Running in f18c1f639e99

=-=- Synchronizing development packages -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-bridge-local-git: local] Command started
[datakit-bridge-local-git] /home/opam/src/datakit/ synchronized
 ---> 9697aa7d2ab8
Removing intermediate container f18c1f639e99
Step 15/21 : RUN opam install datakit-bridge-local-git -vv
 ---> Running in 6c3dd4156b12

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-bridge-local-git: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/system/packages.dev/datakit-bridge-local-git"
- sending incremental file list
- 
- sent 8,239 bytes  received 47 bytes  16,572.00 bytes/sec
- total size is 1,266,837  speedup is 152.89
[datakit-bridge-local-git] /home/opam/src/datakit/ already up-to-date
The following actions will be performed:
  - install datakit-bridge-local-git dev*

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-bridge-local-git: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/system/packages.dev/datakit-bridge-local-git"
- sending incremental file list
- 
- sent 8,239 bytes  received 47 bytes  16,572.00 bytes/sec
- total size is 1,266,837  speedup is 152.89
[datakit-bridge-local-git.dev] /home/opam/src/datakit/ already up-to-date

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-bridge-local-git: jbuilder build] Command started
+ jbuilder "build" "-p" "datakit-bridge-local-git" "-j" "4" (CWD=/home/opam/.opam/system/build/datakit-bridge-local-git.dev)
-     ocamldep bridge/local/main.depends.ocamldep-output
-     ocamldep bridge/local/main.dependsi.ocamldep-output
-       ocamlc bridge/local/main.{cmi,cmti}
-       ocamlc bridge/local/sync.{cmi,cmti}
-     ocamlopt bridge/local/sync.{cmx,o}
-     ocamlopt bridge/local/main.{cmx,o}
-     ocamlopt bridge/local/main.exe
+ install "-m" "0755" "/home/opam/.opam/system/build/datakit-bridge-local-git.dev/_build/install/default/bin/datakit-bridge-local-git" "/home/opam/.opam/system/bin/datakit-bridge-local-git"
+ install "-m" "0644" "/home/opam/.opam/system/build/datakit-bridge-local-git.dev/_build/install/default/lib/datakit-bridge-local-git/META" "/home/opam/.opam/system/lib/datakit-bridge-local-git/META"
+ install "-m" "0644" "/home/opam/.opam/system/build/datakit-bridge-local-git.dev/_build/install/default/lib/datakit-bridge-local-git/opam" "/home/opam/.opam/system/lib/datakit-bridge-local-git/opam"
+ install "-m" "0644" "/home/opam/.opam/system/build/datakit-bridge-local-git.dev/_build/install/default/doc/datakit-bridge-local-git/README.md" "/home/opam/.opam/system/doc/datakit-bridge-local-git/README.md"
+ install "-m" "0644" "/home/opam/.opam/system/build/datakit-bridge-local-git.dev/_build/install/default/doc/datakit-bridge-local-git/LICENSE.md" "/home/opam/.opam/system/doc/datakit-bridge-local-git/LICENSE.md"
+ install "-m" "0644" "/home/opam/.opam/system/build/datakit-bridge-local-git.dev/_build/install/default/doc/datakit-bridge-local-git/CHANGES.md" "/home/opam/.opam/system/doc/datakit-bridge-local-git/CHANGES.md"
-> installed datakit-bridge-local-git.dev
Done.
 ---> 9bb314232ba6
Removing intermediate container 6c3dd4156b12
Step 16/21 : RUN opam config exec -- ocaml /home/opam/src/datakit/check-libev.ml
 ---> Running in 804d89b14875
[91mFile "/home/opam/src/datakit/check-libev.ml", line 4, characters 16-48:
Warning 3: deprecated: Lwt_engine.Versioned.libev_2
 In Lwt >= 3.0.0, this is an alias for Lwt_engine.libev.
[0m ---> 03eeaf5f3695
Removing intermediate container 804d89b14875
Step 17/21 : RUN sudo cp $(opam config exec -- which datakit-bridge-local-git) /usr/bin/
 ---> Running in 397f5448df9a
 ---> f4693a40b71a
Removing intermediate container 397f5448df9a
Step 18/21 : FROM alpine:3.5
 ---> 4a415e366388
Step 19/21 : RUN apk add --no-cache libev gmp tzdata ca-certificates
 ---> Using cache
 ---> 5da98e5d42ce
Step 20/21 : ENTRYPOINT /usr/bin/datakit-bridge-local-git
 ---> Using cache
 ---> 4c34e5b4b656
Step 21/21 : COPY --from=0 /usr/bin/datakit-bridge-local-git /usr/bin/datakit-bridge-local-git
 ---> 161b4a8d46d6
Removing intermediate container f884fc5600d0
Successfully built 161b4a8d46d6
[2017-05-09 12:39.03] Success
