=== Docker build Dockerfile.client
[2017-05-04 16:16.01] Starting...
Cloning into '/tmp/with_clone354a481b'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at 3de717c dockerfile: use updated custom branch for protocol-9p
[2017-05-04 16:16.03] Rewrite Dockerfile's first line to:
FROM ocaml/opam:alpine_ocaml-4.03.0
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 5.692 MB
Step 1/15 : FROM ocaml/opam:alpine_ocaml-4.03.0
 ---> 1254c1838b00
Step 2/15 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> ceb3f4bbc474
Step 3/15 : RUN cd /home/opam/opam-repository && git pull && opam update -y
 ---> Using cache
 ---> fdaadf179f6d
Step 4/15 : RUN opam depext -ui lwt alcotest conf-libev
 ---> Using cache
 ---> 5949fdbe7a4c
Step 5/15 : COPY datakit-client.opam /home/opam/src/datakit/datakit-client.opam
 ---> Using cache
 ---> 8d067a44f57c
Step 6/15 : RUN opam pin add datakit-client.dev /home/opam/src/datakit -n
 ---> Using cache
 ---> 921f6102b83e
Step 7/15 : RUN opam depext datakit-client &&     opam install datakit-client --deps
 ---> Using cache
 ---> 7083fcca1ece
Step 8/15 : COPY . /home/opam/src/datakit
 ---> 7090856016de
Removing intermediate container d608eecac3f7
Step 9/15 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in 0fbb6a7d06dc
 ---> 9a2890e46fc1
Removing intermediate container 0fbb6a7d06dc
Step 10/15 : RUN cd /home/opam/src/datakit &&     scripts/watermark.sh &&     git status --porcelain
 ---> Running in e1eed30d7f68
 M Dockerfile.client
 M src/version.ml
 ---> 0213a47ee705
Error removing intermediate container e1eed30d7f68: Driver aufs failed to remove root filesystem e1eed30d7f68013b8693ee1f28bb7c52fdffdac84b21fe2f118dee55e6cd3320: rename /var/lib/docker/aufs/mnt/5ddbd4ec9df2079afc6e8b119b034662db7d65e08d2af636549caaf380e3177f /var/lib/docker/aufs/mnt/5ddbd4ec9df2079afc6e8b119b034662db7d65e08d2af636549caaf380e3177f-removing: device or resource busy
Step 11/15 : RUN opam update datakit-client
 ---> Running in c9372d659ce4

=-=- Synchronizing development packages -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
[datakit-client] /home/opam/src/datakit/ synchronized
 ---> 9751a30b96f8
Error removing intermediate container e1eed30d7f68: No such container: e1eed30d7f68013b8693ee1f28bb7c52fdffdac84b21fe2f118dee55e6cd3320
Step 12/15 : RUN opam info datakit-client --raw
 ---> Running in 6a4dec9efaa7
opam-version: "1.2"
name: "datakit-client"
version: "dev"
maintainer: "thomas@gazagnaire.org"
authors: [
  "Thomas Leonard" "Magnus Skjegstad" "David Scott" "Thomas Gazagnaire"
]
homepage: "https://github.com/moby/datakit"
bug-reports: "https://github.com/moby/datakit/issues"
license: "Apache"
doc: "https://docker.github.io/datakit/"
dev-repo: "https://github.com/moby/datakit.git"
build: ["jbuilder" "build" "-p" name "-j" jobs]
depends: [
  "jbuilder" {build}
  "base-bytes"
  "astring"
  "logs"
  "uri"
  "rresult"
  "fmt"
  "cstruct" {> "2.2.0"}
  "protocol-9p-unix" {>= "0.10.0"}
  "cmdliner"
]
 ---> 9bf6d77aba6a
Error removing intermediate container e1eed30d7f68: No such container: e1eed30d7f68013b8693ee1f28bb7c52fdffdac84b21fe2f118dee55e6cd3320
Step 13/15 : RUN opam install datakit-client.dev -vv
 ---> Running in f1d8c0112d96

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.03.0/packages.dev/datakit-client"
- sending incremental file list
- 
- sent 8,055 bytes  received 46 bytes  16,202.00 bytes/sec
- total size is 1,250,476  speedup is 154.36
[datakit-client] /home/opam/src/datakit/ already up-to-date
The following actions will be performed:
  - install datakit-client dev*

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.03.0/packages.dev/datakit-client"
- sending incremental file list
- 
- sent 8,055 bytes  received 46 bytes  16,202.00 bytes/sec
- total size is 1,250,476  speedup is 154.36
[datakit-client.dev] /home/opam/src/datakit/ already up-to-date

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: jbuilder build] Command started
+ jbuilder "build" "-p" "datakit-client" "-j" "4" (CWD=/home/opam/.opam/4.03.0/build/datakit-client.dev)
-     ocamldep api/ocaml/bin/mount.depends.ocamldep-output
-     ocamldep api/ocaml/datakit_client.dependsi.ocamldep-output
-       ocamlc api/ocaml/bin/version.{cmi,cmo,cmt}
-     ocamldep api/ocaml/datakit_client.depends.ocamldep-output
-       ocamlc api/ocaml/datakit_path.{cmi,cmti}
-     ocamlopt api/ocaml/bin/version.{cmx,o}
-       ocamlc api/ocaml/bin/mount.{cmi,cmo,cmt}
-       ocamlc api/ocaml/datakit_path.{cmo,cmt}
-       ocamlc api/ocaml/datakit_S.{cmi,cmo,cmt}
-     ocamlopt api/ocaml/datakit_path.{cmx,o}
-       ocamlc api/ocaml/datakit_client_9p.{cmi,cmti}
-     ocamlopt api/ocaml/bin/mount.{cmx,o}
-     ocamlopt api/ocaml/datakit_S.{cmx,o}
-       ocamlc api/ocaml/datakit_client_9p.{cmo,cmt}
-       ocamlc api/ocaml/datakit_client.cma
-     ocamlopt api/ocaml/bin/mount.exe
-     ocamlopt api/ocaml/datakit_client_9p.{cmx,o}
-     ocamlopt api/ocaml/datakit_client.{a,cmxa}
-     ocamlopt api/ocaml/datakit_client.cmxs
+ install "-m" "0755" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/bin/datakit-mount" "/home/opam/.opam/4.03.0/bin/datakit-mount"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/META" "/home/opam/.opam/4.03.0/lib/datakit-client/META"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/opam" "/home/opam/.opam/4.03.0/lib/datakit-client/opam"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_S.cmi" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_S.cmi"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_S.cmx" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_S.cmx"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_S.cmt" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_S.cmt"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_S.ml" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_S.ml"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client_9p.cmi" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client_9p.cmi"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client_9p.cmx" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client_9p.cmx"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client_9p.cmt" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client_9p.cmt"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client_9p.cmti" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client_9p.cmti"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client_9p.mli" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client_9p.mli"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.cmi" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_path.cmi"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.cmx" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_path.cmx"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.cmt" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_path.cmt"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.cmti" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_path.cmti"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.mli" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_path.mli"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.cma" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client.cma"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.cmxa" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client.cmxa"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.a" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client.a"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.cmxs" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client.cmxs"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/doc/datakit-client/README.md" "/home/opam/.opam/4.03.0/doc/datakit-client/README.md"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/doc/datakit-client/LICENSE.md" "/home/opam/.opam/4.03.0/doc/datakit-client/LICENSE.md"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/doc/datakit-client/CHANGES.md" "/home/opam/.opam/4.03.0/doc/datakit-client/CHANGES.md"
-> installed datakit-client.dev
Done.
 ---> aa8b195b1bba
Removing intermediate container 6a4dec9efaa7
Removing intermediate container f1d8c0112d96
Error removing intermediate container e1eed30d7f68: No such container: e1eed30d7f68013b8693ee1f28bb7c52fdffdac84b21fe2f118dee55e6cd3320
Step 14/15 : RUN sudo mkdir /data && sudo chown opam.nogroup /data && chmod 700 /data &&     sudo cp $(opam config exec -- which datakit-mount) /usr/bin/datakit-mount
 ---> Running in dbce800fd6ab
 ---> b10354c66e16
Removing intermediate container dbce800fd6ab
Error removing intermediate container e1eed30d7f68: No such container: e1eed30d7f68013b8693ee1f28bb7c52fdffdac84b21fe2f118dee55e6cd3320
Step 15/15 : CMD bash -c "/usr/bin/datakit-mount -h $(getent hosts datakit | awk '{print $1}')";     bash
 ---> Running in 218ac6fc8178
 ---> 86eb08b0288c
Error removing intermediate container e1eed30d7f68: No such container: e1eed30d7f68013b8693ee1f28bb7c52fdffdac84b21fe2f118dee55e6cd3320
Successfully built 86eb08b0288c
[2017-05-04 16:16.42] Success
