=== Docker build Dockerfile.github
[2017-04-26 15:00.39] Starting...
Cloning into '/tmp/with_clone1f24e56d'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at 454caa9 Use jbuilder
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.316 MB
Step 1/31 : FROM ocaml/opam-dev@sha256:337fd0f78b182a12da3f66d9d5ca075dbb79df414fc01d6a0aee99ffeb35552a
sha256:337fd0f78b182a12da3f66d9d5ca075dbb79df414fc01d6a0aee99ffeb35552a: Pulling from ocaml/opam-dev
Digest: sha256:337fd0f78b182a12da3f66d9d5ca075dbb79df414fc01d6a0aee99ffeb35552a
Status: Image is up to date for ocaml/opam-dev@sha256:337fd0f78b182a12da3f66d9d5ca075dbb79df414fc01d6a0aee99ffeb35552a
 ---> 9107a2254d1d
Step 2/31 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> 90b67f82c489
Step 3/31 : RUN sudo apk add tzdata aspcud
 ---> Using cache
 ---> 1a4e4ce8b7ee
Step 4/31 : RUN opam pin add hvsock.0.14.0 -n https://github.com/mirage/ocaml-hvsock.git#88397c37a910c61507a9655ed8413c1692294da0
 ---> Using cache
 ---> afaec49f149c
Step 5/31 : RUN opam pin add irmin.1.1.0 -n https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0
 ---> Using cache
 ---> e276a27b48b0
Step 6/31 : RUN opam pin add irmin-git.1.1.0 -n https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0
 ---> Using cache
 ---> ba98ccd23980
Step 7/31 : RUN opam pin add -yn protocol-9p.0.9.0 'https://github.com/talex5/ocaml-9p.git#ping-mirage-3'
 ---> Using cache
 ---> fa7176c4d885
Step 8/31 : RUN opam pin add github --dev -n
 ---> Using cache
 ---> 8db1278421eb
Step 9/31 : RUN opam depext -ui lwt inotify alcotest conf-libev lambda-term cmdliner github protocol-9p rresult prometheus-app asl win-eventlog mtime hex github-hooks hvsock camlzip irmin-watcher git irmin
 ---> Using cache
 ---> 467110fb79b9
Step 10/31 : COPY check-libev.ml /tmp/check-libev.ml
 ---> Using cache
 ---> b461e59034d2
Step 11/31 : RUN opam config exec -- ocaml /tmp/check-libev.ml
 ---> Using cache
 ---> f93cc8075f34
Step 12/31 : COPY datakit.opam /home/opam/src/datakit/datakit.opam
 ---> 2f65eaaa5846
Removing intermediate container 0e410f9bf2b0
Step 13/31 : COPY datakit-client.opam /home/opam/src/datakit/datakit-client.opam
 ---> 318fbb337772
Error removing intermediate container 88c936a8d007: Driver aufs failed to remove root filesystem 88c936a8d007b96e63078a2c14dfbf14eca47974e6586977143fe1337d559760: rename /var/lib/docker/aufs/mnt/77e95dc03957e3355db3b2a5840cd64a1a00e669155c4fa2c184716bf7e34450 /var/lib/docker/aufs/mnt/77e95dc03957e3355db3b2a5840cd64a1a00e669155c4fa2c184716bf7e34450-removing: device or resource busy
Step 14/31 : COPY datakit-server.opam /home/opam/src/datakit/datakit-server.opam
 ---> 2559b045cb58
Error removing intermediate container faad8fe9c6c8: Driver aufs failed to remove root filesystem faad8fe9c6c8ff42324f321aba624a05d50220c630a3731abe83716af0898013: rename /var/lib/docker/aufs/mnt/a5cc376510002f8c640213822e95a100f2fb60150c6fd245b06d9077167ed6ef /var/lib/docker/aufs/mnt/a5cc376510002f8c640213822e95a100f2fb60150c6fd245b06d9077167ed6ef-removing: device or resource busy
Step 15/31 : COPY datakit-github.opam /home/opam/src/datakit/datakit-github.opam
 ---> b587182b9ad0
Error removing intermediate container 88c936a8d007: No such container: 88c936a8d007b96e63078a2c14dfbf14eca47974e6586977143fe1337d559760
Step 16/31 : COPY datakit-bridge-github.opam /home/opam/src/datakit/datakit-bridge-github.opam
 ---> 921346968654
Error removing intermediate container 88c936a8d007: No such container: 88c936a8d007b96e63078a2c14dfbf14eca47974e6586977143fe1337d559760
Step 17/31 : RUN opam pin add datakit.dev /home/opam/src/datakit -yn &&     opam pin add datakit-server.dev /home/opam/src/datakit -yn &&     opam pin add datakit-client.dev /home/opam/src/datakit -yn &&     opam pin add datakit-github.dev /home/opam/src/datakit -yn &&     opam pin add datakit-bridge-github.dev /home/opam/src/datakit -yn
 ---> Running in cf5b37ef233b
[datakit.dev: rsync]
[datakit.dev] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit/datakit.opam from 1.2 to 2.0~beta
[0mdatakit is now pinned to file:///home/opam/src/datakit (version dev)
[datakit-server.dev: rsync]
[datakit-server.dev] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-server/datakit-server.opam from 1.2 to 2.0~beta
[0mdatakit-server is now pinned to file:///home/opam/src/datakit (version dev)
[datakit-client.dev: rsync]
[datakit-client.dev] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-client/datakit-client.opam from 1.2 to 2.0~beta
[0mdatakit-client is now pinned to file:///home/opam/src/datakit (version dev)
[datakit-github.dev: rsync]
[datakit-github.dev] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-github/datakit-github.opam from 1.2 to 2.0~beta
[0mdatakit-github is now pinned to file:///home/opam/src/datakit (version dev)
[datakit-bridge-github.dev: rsync]
[datakit-bridge-github.dev] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-bridge-github/datakit-bridge-github.opam from 1.2 to 2.0~beta
[0mdatakit-bridge-github is now pinned to file:///home/opam/src/datakit (version dev)
 ---> 03ffbd483cd1
Error removing intermediate container 88c936a8d007: No such container: 88c936a8d007b96e63078a2c14dfbf14eca47974e6586977143fe1337d559760
Step 18/31 : COPY . /home/opam/src/datakit
 ---> d3d14c226735
Removing intermediate container 7defed816571
Error removing intermediate container 88c936a8d007: No such container: 88c936a8d007b96e63078a2c14dfbf14eca47974e6586977143fe1337d559760
Step 19/31 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in 17cbc809611b
 ---> 3e3e90525b8b
Removing intermediate container 17cbc809611b
Error removing intermediate container 88c936a8d007: No such container: 88c936a8d007b96e63078a2c14dfbf14eca47974e6586977143fe1337d559760
Step 20/31 : RUN cd /home/opam/src/datakit &&     scripts/watermark.sh &&     git status --porcelain
 ---> Running in 20ea62252e42
 M src/version.ml
 ---> d8f29d1e975a
Error removing intermediate container faad8fe9c6c8: No such container: faad8fe9c6c8ff42324f321aba624a05d50220c630a3731abe83716af0898013
Step 21/31 : RUN opam install datakit
 ---> Running in d3f506264640

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit.dev] synchronised from file:///home/opam/src/datakit

The following actions will be performed:
  - install irmin-git      1.1.0*                               [required by datakit]
  - install datakit-server dev*                                 [required by datakit]
  - install datakit        dev*
===== 3 to install =====
[datakit.dev] synchronised from file:///home/opam/src/datakit
[datakit-server.dev] synchronised from file:///home/opam/src/datakit
[irmin-git.1.1.0] synchronised from git+https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-server.dev
-> installed irmin-git.1.1.0
-> installed datakit.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> e96bd6f770fe
Removing intermediate container cf5b37ef233b
Removing intermediate container 20ea62252e42
Removing intermediate container d3f506264640
Error removing intermediate container 88c936a8d007: No such container: 88c936a8d007b96e63078a2c14dfbf14eca47974e6586977143fe1337d559760
Step 22/31 : RUN opam install datakit-bridge-github -ytv
 ---> Running in dfdb6732f048

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/1: [datakit-bridge-github.dev: rsync]
[datakit-bridge-github.dev] synchronised from file:///home/opam/src/datakit

The following actions will be performed:
  - install datakit-client        dev*                          [required by datakit-bridge-github]
  - install datakit-github        dev*                          [required by datakit-bridge-github]
  - install datakit-bridge-github dev*
===== 3 to install =====
Processing  1/3: [datakit-bridge-github.dev: rsync]
Processing  2/3: [datakit-bridge-github.dev: rsync] [datakit-client.dev: rsync]
Processing  3/3: [datakit-bridge-github.dev: rsync] [datakit-client.dev: rsync] [datakit-github.dev: rsync]
[datakit-client.dev] synchronised from file:///home/opam/src/datakit
Processing  3/3: [datakit-bridge-github.dev: rsync] [datakit-github.dev: rsync]
[datakit-bridge-github.dev] synchronised from file:///home/opam/src/datakit
Processing  3/3: [datakit-github.dev: rsync]
[datakit-github.dev] synchronised from file:///home/opam/src/datakit

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/6: [datakit-client: jbuilder build]
+ jbuilder "build" "-p" "datakit-client" "-j" "1" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit-client.dev)
-> compiled  datakit-client.dev
-> installed datakit-client.dev
Processing  3/6: [datakit-github: jbuilder build]
+ jbuilder "build" "-p" "datakit-github" "-j" "1" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit-github.dev)
[91m[ERROR] The compilation of datakit-github failed at "jbuilder build -p datakit-github -j 1".

#=== ERROR while compiling datakit-github.dev =================================#
# command              jbuilder build -p datakit-github -j 1
# path                 /home/opam/.opam/default/.opam-switch/build/datakit-github.dev
# exit-code            1
# env-file             /home/opam/.opam/log/datakit-github-7-865888.env
# output-file          /home/opam/.opam/log/datakit-github-7-865888.out
### output ###
#     ocamldep src/datakit-github/datakit_github.depends.ocamldep-output
#     ocamldep src/datakit-github/datakit_github.dependsi.ocamldep-output
#       ocamlc src/datakit-github/datakit_github.{cmi,cmti}
#       ocamlc src/datakit-github/datakit_github.{cmo,cmt}
#     ocamlopt src/datakit-github/datakit_github.{cmx,o}
#       ocamlc src/datakit-github/datakit_github_conv.{cmi,cmti} (exit 2)
# (cd _build/default && /usr/bin/ocamlc.opt -w -40 -g -bin-annot -I /home/opam/.opam/default/lib/asetmap -I /home/opam/.opam/default/lib/astring -I /home/opam/.opam/default/lib/bytes -I /home/opam/.opam/default/lib/datakit-client -I /home/opam/.opam/default/lib/fmt -I /home/opam/.opam/default/lib/logs -I /home/opam/.opam/default/lib/lwt -I /home/opam/.opam/default/lib/re -I /home/opam/.opam/default/lib/result -I /home/opam/.opam/default/lib/sexplib -I /home/opam/.opam/default/lib/sexplib/0 -I /home/opam/.opam/default/lib/stringext -I /home/opam/.opam/default/lib/uchar -I /home/opam/.opam/default/lib/uri -I /usr/lib/ocaml -no-alias-deps -I src/datakit-github -o src/datakit-github/datakit_github_conv.cmi -c -intf src/datakit-github/datakit_github_conv.mli)
# File "src/datakit-github/datakit_github_conv.mli", line 7, characters 17-33:
# Error: Unbound module Datakit_S

[0m-     ocamldep src/datakit-github/datakit_github.depends.ocamldep-output
-     ocamldep src/datakit-github/datakit_github.dependsi.ocamldep-output
-       ocamlc src/datakit-github/datakit_github.{cmi,cmti}
-       ocamlc src/datakit-github/datakit_github.{cmo,cmt}
-     ocamlopt src/datakit-github/datakit_github.{cmx,o}
-       ocamlc src/datakit-github/datakit_github_conv.{cmi,cmti} (exit 2)
- (cd _build/default && /usr/bin/ocamlc.opt -w -40 -g -bin-annot -I /home/opam/.opam/default/lib/asetmap -I /home/opam/.opam/default/lib/astring -I /home/opam/.opam/default/lib/bytes -I /home/opam/.opam/default/lib/datakit-client -I /home/opam/.opam/default/lib/fmt -I /home/opam/.opam/default/lib/logs -I /home/opam/.opam/default/lib/lwt -I /home/opam/.opam/default/lib/re -I /home/opam/.opam/default/lib/result -I /home/opam/.opam/default/lib/sexplib -I /home/opam/.opam/default/lib/sexplib/0 -I /home/opam/.opam/default/lib/stringext -I /home/opam/.opam/default/lib/uchar -I /home/opam/.opam/default/lib/uri -I /usr/lib/ocaml -no-alias-deps -I src/datakit-github -o src/datakit-github/datakit_github_conv.cmi -c -intf src/datakit-github/datakit_github_conv.mli)
- File "src/datakit-github/datakit_github_conv.mli", line 7, characters 17-33:
- Error: Unbound module Datakit_S


=-=- Error report -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
+- The following actions were aborted
| - install datakit-bridge-github dev
+- 
+- The following actions failed
| - build datakit-github dev
+- 
+- The following changes have been performed
| - install datakit-client dev
+- 
# Run eval `opam env` to update the current shell environment
[91m
The former state can be restored with:
    opam switch import "/home/opam/.opam/default/.opam-switch/backup/state-20170426150136.export"
'opam install datakit-bridge-github -ytv' failed.
[0mThe command '/bin/sh -c opam install datakit-bridge-github -ytv' returned a non-zero code: 4
[2017-04-26 15:01.51] Failed: Command "docker" "build" "--pull" "-f" "Dockerfile.github" "." exited with status 4
