=== Docker build Dockerfile
[2017-06-08 17:31.42] Starting...
Cloning into '/tmp/with_clone3d1df1bd'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at d60dbb1 github: make user an abstract type
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 6.128 MBSending build context to Docker daemon 6.685 MBSending build context to Docker daemon 7.242 MBSending build context to Docker daemon 7.799 MBSending build context to Docker daemon 8.119 MB
Step 1/29 : FROM ocaml/opam-dev@sha256:1dd4440b3e5f182f705cb5a74f9d4e860c2842b45ed72c199de89a894d13f522
sha256:1dd4440b3e5f182f705cb5a74f9d4e860c2842b45ed72c199de89a894d13f522: Pulling from ocaml/opam-dev
Digest: sha256:1dd4440b3e5f182f705cb5a74f9d4e860c2842b45ed72c199de89a894d13f522
Status: Image is up to date for ocaml/opam-dev@sha256:1dd4440b3e5f182f705cb5a74f9d4e860c2842b45ed72c199de89a894d13f522
 ---> f03bf6a81395
Step 2/29 : RUN git -C /home/opam/opam-repository fetch origin &&     git -C /home/opam/opam-repository reset 79046b8ab --hard &&     opam update -u
 ---> Using cache
 ---> 834afef17701
Step 3/29 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> c4322ca77791
Step 4/29 : RUN sudo apk add tzdata aspcud gmp-dev perl
 ---> Using cache
 ---> 0490cdd41908
Step 5/29 : RUN opam depext -ui lwt inotify alcotest conf-libev asl win-eventlog     irmin-watcher mtime mirage-flow conduit hvsock prometheus-app git irmin     cmdliner protocol-9p rresult win-error named-pipe
 ---> Using cache
 ---> 14f0f245ed07
Step 6/29 : COPY check-libev.ml /tmp/check-libev.ml
 ---> Using cache
 ---> 0f7d81cc305a
Step 7/29 : RUN opam config exec -- ocaml /tmp/check-libev.ml
 ---> Using cache
 ---> 5ba7fd4d64d5
Step 8/29 : COPY datakit.opam /home/opam/src/datakit/
 ---> Using cache
 ---> 7565101018c5
Step 9/29 : COPY datakit-client.opam /home/opam/src/datakit/datakit-client.opam
 ---> Using cache
 ---> 12dd7c353515
Step 10/29 : COPY datakit-client-9p.opam /home/opam/src/datakit/datakit-client-9p.opam
 ---> Using cache
 ---> e5f7ba38eb3d
Step 11/29 : COPY datakit-server.opam /home/opam/src/datakit/datakit-server.opam
 ---> Using cache
 ---> abde86794c02
Step 12/29 : COPY datakit-server-9p.opam /home/opam/src/datakit/datakit-server-9p.opam
 ---> Using cache
 ---> 5305f7a027bc
Step 13/29 : RUN opam pin add datakit-server.dev /home/opam/src/datakit -yn &&     opam pin add datakit-server-9p.dev /home/opam/src/datakit -yn &&     opam pin add datakit-client.dev /home/opam/src/datakit -yn &&     opam pin add datakit-client-9p.dev /home/opam/src/datakit -yn &&     opam pin add datakit.dev /home/opam/src/datakit -yn
 ---> Using cache
 ---> 494d71914216
Step 14/29 : RUN opam depext -y datakit
 ---> Using cache
 ---> 5d5c251720f5
Step 15/29 : RUN opam install -y --deps-only datakit-client datakit-server
 ---> Using cache
 ---> 5ee6b76d5a6c
Step 16/29 : RUN opam install alcotest
 ---> Using cache
 ---> 74d8be1d24d2
Step 17/29 : COPY . /home/opam/src/datakit
 ---> 10a652e4e3a0
Removing intermediate container 742dd0a8000d
Step 18/29 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in 02724a210e8b
 ---> 60379db6b6b3
Error removing intermediate container 02724a210e8b: Driver aufs failed to remove root filesystem 02724a210e8b0b42a963f22018f956598b8427e846983e38cf2458f74926f649: rename /var/lib/docker/aufs/mnt/62550dd2eaebe65fa6961e79af16aaa7b40b66e34d36b0daef26727c5524f910 /var/lib/docker/aufs/mnt/62550dd2eaebe65fa6961e79af16aaa7b40b66e34d36b0daef26727c5524f910-removing: device or resource busy
Step 19/29 : RUN cd /home/opam/src/datakit &&     scripts/watermark.sh &&     git status --porcelain
 ---> Running in f2a6e3ac0183
 M src/version.ml
 ---> c4e84dd329a7
Error removing intermediate container 02724a210e8b: No such container: 02724a210e8b0b42a963f22018f956598b8427e846983e38cf2458f74926f649
Step 20/29 : RUN opam install datakit-client-9p
 ---> Running in 9fa7cd89b3e6

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client-9p.dev] synchronised from file:///home/opam/src/datakit

The following actions will be performed:
  - install datakit-client    dev*                              [required by datakit-client-9p]
  - install protocol-9p-unix  0.11.0                            [required by datakit-client-9p]
  - install datakit-client-9p dev*
===== 3 to install =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[protocol-9p-unix.0.11.0] found in cache
[datakit-client.dev] synchronised from file:///home/opam/src/datakit
[datakit-client-9p.dev] synchronised from file:///home/opam/src/datakit

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[91m[ERROR] The compilation of datakit-client failed at "jbuilder build -p datakit-client -j 1".
[0m-> installed protocol-9p-unix.0.11.0
[91m
#=== ERROR while compiling datakit-client.dev =================================#
# command              jbuilder build -p datakit-client -j 1
# path                 /home/opam/.opam/default/.opam-switch/build/datakit-client.dev
# exit-code            1
# env-file             /home/opam/.opam/log/datakit-client-7-d8a4ae.env
# output-file          /home/opam/.opam/log/datakit-client-7-d8a4ae.out
### output ###
# File "ci/src/jbuild", line 12, characters 15-94:
# Error: Unknown constructor per_module

[0m

=-=- Error report -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
+- The following actions were aborted
| - install datakit-client-9p dev
+- 
+- The following actions failed
| - build datakit-client dev
+- 
+- The following changes have been performed
| - install protocol-9p-unix 0.11.0
+- 
# Run eval `opam env` to update the current shell environment
[91m
The former state can be restored with:
    opam switch import "/home/opam/.opam/default/.opam-switch/backup/state-20170608173206.export"
[0mThe command '/bin/sh -c opam install datakit-client-9p' returned a non-zero code: 4
[2017-06-08 17:32.20] Failed: Command "docker" "build" "--pull" "-f" "Dockerfile" "." exited with status 4
