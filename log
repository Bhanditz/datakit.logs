=== Docker build Dockerfile.ci
[2017-04-24 14:43.45] Starting...
Cloning into '/tmp/with_clone202317bf'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at 8182f92 TMP: add pins to make the CI happy
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 4.624 MB
Step 1/11 : FROM ocaml/opam-dev@sha256:573b5d71e94104590a8282a9ae67b63a6144b15bafdacb9980391c84ca730615
sha256:573b5d71e94104590a8282a9ae67b63a6144b15bafdacb9980391c84ca730615: Pulling from ocaml/opam-dev
Digest: sha256:573b5d71e94104590a8282a9ae67b63a6144b15bafdacb9980391c84ca730615
Status: Image is up to date for ocaml/opam-dev@sha256:573b5d71e94104590a8282a9ae67b63a6144b15bafdacb9980391c84ca730615
 ---> 1db57234caaa
Step 2/11 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> cc9fd0f47aac
Step 3/11 : RUN sudo apk add tzdata aspcud
 ---> Using cache
 ---> 8c71ee82f35c
Step 4/11 : RUN opam pin add -yn protocol-9p.0.8.0 'https://github.com/talex5/ocaml-9p.git#ping'
 ---> Using cache
 ---> 30a0d05e709e
Step 5/11 : RUN opam depext -i asl win-eventlog camlzip alcotest mtime mirage-flow datakit-server hvsock git mirage-tc irmin irmin-unix lwt protocol-9p.0.8.0 tyxml redis multipart-form-data pbkdf tls prometheus-app github git session irmin.0.12.0 irmin-unix.0.12.0 cmdliner.0.9.8 webmachine
 ---> Using cache
 ---> b619ec43dec4
Step 6/11 : ADD . /home/opam/datakit
 ---> 53955e3dd5c3
Removing intermediate container 6d4ceed98641
Step 7/11 : RUN sudo chown opam /home/opam/datakit
 ---> Running in 52c18232c5ec
 ---> 748392f2a455
Removing intermediate container 52c18232c5ec
Step 8/11 : RUN opam pin add -k git datakit-client.dev /home/opam/datakit -y
 ---> Running in 9761e320ef28
[91m[NOTE] Will pin to 'master' using git
[0m[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-client/datakit-client.opam from 1.2 to 2.0~beta
[0mdatakit-client is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-client dev*
[datakit-client.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-client.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 5de0bad6e12b
Removing intermediate container 9761e320ef28
Step 9/11 : RUN opam pin add -k git datakit-github.dev /home/opam/datakit -y
 ---> Running in a34d56c475a1
[91m[NOTE] Will pin to 'master' using git
[0m[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-github/datakit-github.opam from 1.2 to 2.0~beta
[0mdatakit-github is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-github dev*
[datakit-github.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-github.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 1330db9518ab
Error removing intermediate container a34d56c475a1: Driver aufs failed to remove root filesystem a34d56c475a1707293c94f44c857773b9b4295a7bd64d34ca1d910a63aee7376: rename /var/lib/docker/aufs/mnt/e2e56f5e52de17aafdd0fe4fa52cd15a53a8f8d13faf1213bd15b7f13a83e25f /var/lib/docker/aufs/mnt/e2e56f5e52de17aafdd0fe4fa52cd15a53a8f8d13faf1213bd15b7f13a83e25f-removing: device or resource busy
Step 10/11 : RUN opam pin add -k git datakit-ci.dev /home/opam/datakit -yt
 ---> Running in 5b6c3bae40ce
[91m[NOTE] Will pin to 'master' using git
[0m[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-ci/datakit-ci.opam from 1.2 to 2.0~beta
[0mdatakit-ci is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit    0.9.0                                    [required by datakit-ci]
  - install datakit-ci dev*
===== 2 to install =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit.0.9.0] found in cache
[datakit-ci.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit.0.9.0
-> installed datakit-ci.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 9909fcbe3818
Error removing intermediate container a34d56c475a1: No such container: a34d56c475a1707293c94f44c857773b9b4295a7bd64d34ca1d910a63aee7376
Step 11/11 : VOLUME /secrets
 ---> Running in 2567ffd0b632
 ---> 68c4b32645b2
Error removing intermediate container a34d56c475a1: No such container: a34d56c475a1707293c94f44c857773b9b4295a7bd64d34ca1d910a63aee7376
Successfully built 68c4b32645b2
[2017-04-24 14:44.59] Success
