=== Docker build Dockerfile.github
[2017-06-09 13:01.21] Starting...
Cloning into '/tmp/with_clone6dc79cc'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at d869e98 github: use my fork for ocaml-github
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 6.128 MBSending build context to Docker daemon 6.685 MBSending build context to Docker daemon 7.242 MBSending build context to Docker daemon 7.799 MBSending build context to Docker daemon 8.356 MBSending build context to Docker daemon 8.371 MB
Step 1/34 : FROM ocaml/opam-dev@sha256:1dd4440b3e5f182f705cb5a74f9d4e860c2842b45ed72c199de89a894d13f522
sha256:1dd4440b3e5f182f705cb5a74f9d4e860c2842b45ed72c199de89a894d13f522: Pulling from ocaml/opam-dev
Digest: sha256:1dd4440b3e5f182f705cb5a74f9d4e860c2842b45ed72c199de89a894d13f522
Status: Image is up to date for ocaml/opam-dev@sha256:1dd4440b3e5f182f705cb5a74f9d4e860c2842b45ed72c199de89a894d13f522
 ---> f03bf6a81395
Step 2/34 : RUN git -C /home/opam/opam-repository fetch origin &&     git -C /home/opam/opam-repository reset 79046b8ab --hard &&     opam update -u
 ---> Using cache
 ---> 834afef17701
Step 3/34 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> c4322ca77791
Step 4/34 : RUN sudo apk add tzdata aspcud
 ---> Using cache
 ---> b636b99cfd07
Step 5/34 : RUN opam depext -ui lwt inotify alcotest conf-libev lambda-term cmdliner     github protocol-9p rresult prometheus-app asl win-eventlog mtime hex     github-hooks hvsock irmin-watcher git irmin
 ---> Using cache
 ---> 3c49818f6ae5
Step 6/34 : COPY check-libev.ml /tmp/check-libev.ml
 ---> Using cache
 ---> e1bd80b0b228
Step 7/34 : RUN opam config exec -- ocaml /tmp/check-libev.ml
 ---> Using cache
 ---> 113d6030554b
Step 8/34 : RUN opam pin add -n github.dev --dev
 ---> Using cache
 ---> 9f85058beeab
Step 9/34 : RUN opam pin add -n github-unix.dev https://github.com/mirage/ocaml-github.git
 ---> Using cache
 ---> 779e9c2eb228
Step 10/34 : RUN opam pin add -n github-hooks.dev      https://github.com/samoht/ocaml-github-hooks.git#github-dev
 ---> Running in dfa26045c654
[github-hooks.dev: git]
[github-hooks.dev: git]
[github-hooks.dev: git]
[github-hooks.dev: git]
[github-hooks.dev] synchronised from git+https://github.com/samoht/ocaml-github-hooks.git#github-dev
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/github-hooks/github-hooks.opam from 1.2 to 2.0~beta
[0mgithub-hooks is now pinned to git+https://github.com/samoht/ocaml-github-hooks.git#github-dev (version dev)
 ---> 264851b10ad5
Removing intermediate container dfa26045c654
Step 11/34 : RUN opam pin add -n github-hooks-unix.dev https://github.com/samoht/ocaml-github-hooks.git#github-dev
 ---> Running in fd8e8977dc34
Package github-hooks-unix does not exist, create as a NEW package ? [Y/n] y
[github-hooks-unix.dev: git]
[github-hooks-unix.dev: git]
[github-hooks-unix.dev: git]
[github-hooks-unix.dev: git]
[github-hooks-unix.dev] synchronised from git+https://github.com/samoht/ocaml-github-hooks.git#github-dev
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/github-hooks-unix/github-hooks-unix.opam from 1.2 to 2.0~beta
[0mgithub-hooks-unix is now pinned to git+https://github.com/samoht/ocaml-github-hooks.git#github-dev (version dev)
 ---> 2281803c506f
Error removing intermediate container fd8e8977dc34: Driver aufs failed to remove root filesystem fd8e8977dc34ba09be738751cf19071ab285c3705ce63850b254fcc6cc715770: rename /var/lib/docker/aufs/mnt/2912d8b4b4c11bc246404777f58d8d7924e708e2f4582298c5d23c23c21f3674 /var/lib/docker/aufs/mnt/2912d8b4b4c11bc246404777f58d8d7924e708e2f4582298c5d23c23c21f3674-removing: device or resource busy
Step 12/34 : COPY datakit.opam /home/opam/src/datakit/datakit.opam
 ---> cc18d25f9eaa
Error removing intermediate container 905d47eebb0a: Driver aufs failed to remove root filesystem 905d47eebb0ada7a947a506433e0a97057921fc3372685650f1862d06f0b7260: rename /var/lib/docker/aufs/mnt/c9c6b52d739f293b84f9914925a36544b176077d2e192475395feff12e06dfeb /var/lib/docker/aufs/mnt/c9c6b52d739f293b84f9914925a36544b176077d2e192475395feff12e06dfeb-removing: device or resource busy
Step 13/34 : COPY datakit-client.opam /home/opam/src/datakit/datakit-client.opam
 ---> 590e072a65b9
Error removing intermediate container fd8e8977dc34: No such container: fd8e8977dc34ba09be738751cf19071ab285c3705ce63850b254fcc6cc715770
Step 14/34 : COPY datakit-client-9p.opam /home/opam/src/datakit/datakit-client-9p.opam
 ---> 2822456ab920
Error removing intermediate container fd8e8977dc34: No such container: fd8e8977dc34ba09be738751cf19071ab285c3705ce63850b254fcc6cc715770
Step 15/34 : COPY datakit-client-git.opam /home/opam/src/datakit/datakit-client-git.opam
 ---> 6e91f1023cb8
Removing intermediate container 3c7507812a61
Error removing intermediate container fd8e8977dc34: No such container: fd8e8977dc34ba09be738751cf19071ab285c3705ce63850b254fcc6cc715770
Step 16/34 : COPY datakit-server.opam /home/opam/src/datakit/datakit-server.opam
 ---> 84032c38dc76
Error removing intermediate container fd8e8977dc34: No such container: fd8e8977dc34ba09be738751cf19071ab285c3705ce63850b254fcc6cc715770
Step 17/34 : COPY datakit-server-9p.opam /home/opam/src/datakit/datakit-server-9p.opam
 ---> ba667794d4ea
Error removing intermediate container 905d47eebb0a: No such container: 905d47eebb0ada7a947a506433e0a97057921fc3372685650f1862d06f0b7260
Step 18/34 : COPY datakit-github.opam /home/opam/src/datakit/datakit-github.opam
 ---> efe19a5f6f5e
Removing intermediate container 62078b2286c7
Error removing intermediate container fd8e8977dc34: No such container: fd8e8977dc34ba09be738751cf19071ab285c3705ce63850b254fcc6cc715770
Step 19/34 : COPY datakit-bridge-github.opam /home/opam/src/datakit/datakit-bridge-github.opam
 ---> 9fc89151f18d
Removing intermediate container 297d4ed3f200
Removing intermediate container 0a8746f580e7
Error removing intermediate container fd8e8977dc34: No such container: fd8e8977dc34ba09be738751cf19071ab285c3705ce63850b254fcc6cc715770
Step 20/34 : RUN opam pin add datakit.dev /home/opam/src/datakit -yn &&     opam pin add datakit-server.dev /home/opam/src/datakit -yn &&     opam pin add datakit-server-9p.dev /home/opam/src/datakit -yn &&     opam pin add datakit-client.dev /home/opam/src/datakit -yn &&     opam pin add datakit-client-9p.dev /home/opam/src/datakit -yn &&     opam pin add datakit-client-git.dev /home/opam/src/datakit -yn &&     opam pin add datakit-github.dev /home/opam/src/datakit -yn &&     opam pin add datakit-bridge-github.dev /home/opam/src/datakit -yn
 ---> Running in 978d1ec1deb3
[datakit.dev: rsync]
[datakit.dev] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit/datakit.opam from 1.2 to 2.0~beta
[0mdatakit is now pinned to file:///home/opam/src/datakit (version dev)
[datakit-server.dev: rsync]
[datakit-server.dev] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-server/datakit-server.opam from 1.2 to 2.0~beta
[0mdatakit-server is now pinned to file:///home/opam/src/datakit (version dev)
Package datakit-server-9p does not exist, create as a NEW package ? [Y/n] y
[datakit-server-9p.dev: rsync]
[datakit-server-9p.dev] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-server-9p/datakit-server-9p.opam from 1.2 to 2.0~beta
[0mdatakit-server-9p is now pinned to file:///home/opam/src/datakit (version dev)
[datakit-client.dev: rsync]
[datakit-client.dev] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-client/datakit-client.opam from 1.2 to 2.0~beta
[0mdatakit-client is now pinned to file:///home/opam/src/datakit (version dev)
Package datakit-client-9p does not exist, create as a NEW package ? [Y/n] y
[datakit-client-9p.dev: rsync]
[datakit-client-9p.dev] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-client-9p/datakit-client-9p.opam from 1.2 to 2.0~beta
[0mdatakit-client-9p is now pinned to file:///home/opam/src/datakit (version dev)
Package datakit-client-git does not exist, create as a NEW package ? [Y/n] y
[datakit-client-git.dev: rsync]
[datakit-client-git.dev] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-client-git/datakit-client-git.opam from 1.2 to 2.0~beta
[0mdatakit-client-git is now pinned to file:///home/opam/src/datakit (version dev)
[datakit-github.dev: rsync]
[datakit-github.dev] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-github/datakit-github.opam from 1.2 to 2.0~beta
[0mdatakit-github is now pinned to file:///home/opam/src/datakit (version dev)
[datakit-bridge-github.dev: rsync]
[datakit-bridge-github.dev] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-bridge-github/datakit-bridge-github.opam from 1.2 to 2.0~beta
[0mdatakit-bridge-github is now pinned to file:///home/opam/src/datakit (version dev)
 ---> 7e79485d2da7
Error removing intermediate container fd8e8977dc34: No such container: fd8e8977dc34ba09be738751cf19071ab285c3705ce63850b254fcc6cc715770
Step 21/34 : COPY . /home/opam/src/datakit
 ---> ed072713a613
Error removing intermediate container fd8e8977dc34: No such container: fd8e8977dc34ba09be738751cf19071ab285c3705ce63850b254fcc6cc715770
Step 22/34 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in 57a4a613a55d
 ---> 6b1b17e55351
Removing intermediate container 00656d262916
Removing intermediate container 7829357eb448
Removing intermediate container dd71701c1c72
Removing intermediate container 978d1ec1deb3
Removing intermediate container 20e53ca8dfd1
Removing intermediate container 57a4a613a55d
Error removing intermediate container fd8e8977dc34: No such container: fd8e8977dc34ba09be738751cf19071ab285c3705ce63850b254fcc6cc715770
Step 23/34 : RUN cd /home/opam/src/datakit &&     scripts/watermark.sh &&     git status --porcelain
 ---> Running in 8a365acb97fd
 M src/version.ml
 ---> 926855fb0556
Error removing intermediate container fd8e8977dc34: No such container: fd8e8977dc34ba09be738751cf19071ab285c3705ce63850b254fcc6cc715770
Step 24/34 : RUN opam install datakit
 ---> Running in 300fae5ef7d0

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit.dev] synchronised from file:///home/opam/src/datakit

The following actions will be performed:
  - install protocol-9p-unix  0.11.0                            [required by datakit]
  - install irmin-git         1.2.0                             [required by datakit]
  - install datakit-server    dev*                              [required by datakit-server-9p]
  - install irmin-mem         1.2.0                             [required by datakit]
  - install datakit-server-9p dev*                              [required by datakit]
  - install datakit           dev*
===== 6 to install =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit.dev] synchronised from file:///home/opam/src/datakit
[irmin-git.1.2.0] found in cache
[datakit-server.dev] synchronised from file:///home/opam/src/datakit
[irmin-mem.1.2.0] found in cache
[datakit-server-9p.dev] synchronised from file:///home/opam/src/datakit
[protocol-9p-unix.0.11.0] found in cache

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-server.dev
-> installed datakit-server-9p.dev
-> installed irmin-git.1.2.0
-> installed irmin-mem.1.2.0
-> installed protocol-9p-unix.0.11.0
-> installed datakit.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 13ba0d22d66e
Error removing intermediate container fd8e8977dc34: No such container: fd8e8977dc34ba09be738751cf19071ab285c3705ce63850b254fcc6cc715770
Step 25/34 : RUN opam install datakit-bridge-github -ytv
 ---> Running in 7c82de992579

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/1: [datakit-bridge-github.dev: rsync]
[datakit-bridge-github.dev] synchronised from file:///home/opam/src/datakit

The following actions will be performed:
  - install datakit-client        dev*                          [required by datakit-bridge-github]
  - install git-http              1.11.0                        [required by git-unix]
  - upgrade github                2.3.0 to dev*                 [required by datakit-bridge-github]
  - install datakit-github        dev*                          [required by datakit-bridge-github]
  - install datakit-client-9p     dev*                          [required by datakit-bridge-github]
  - install git-unix              1.11.0                        [required by datakit-client-git]
  - install github-unix           dev*                          [required by datakit-bridge-github]
  - install datakit-client-git    dev*                          [required by datakit-bridge-github]
  - upgrade github-hooks          0.1.2 to dev*                 [required by datakit-bridge-github]
  - install github-hooks-unix     dev*                          [required by datakit-bridge-github]
  - install datakit-bridge-github dev*
===== 9 to install | 2 to upgrade =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/11: [datakit-bridge-github.dev: rsync]
Processing  2/11: [datakit-bridge-github.dev: rsync] [datakit-client.dev: rsync]
Processing  3/11: [datakit-bridge-github.dev: rsync] [datakit-client.dev: rsync] [datakit-client-9p.dev: rsync]
[datakit-client.dev] synchronised from file:///home/opam/src/datakit
Processing  3/11: [datakit-bridge-github.dev: rsync] [datakit-client-9p.dev: rsync]
Processing  4/11: [datakit-bridge-github.dev: rsync] [datakit-client-9p.dev: rsync] [datakit-client-git.dev: rsync]
[datakit-bridge-github.dev] synchronised from file:///home/opam/src/datakit
Processing  4/11: [datakit-client-9p.dev: rsync] [datakit-client-git.dev: rsync]
Processing  5/11: [datakit-client-9p.dev: rsync] [datakit-client-git.dev: rsync] [datakit-github.dev: rsync]
[datakit-client-9p.dev] synchronised from file:///home/opam/src/datakit
Processing  5/11: [datakit-client-git.dev: rsync] [datakit-github.dev: rsync]
[git-http.1.11.0] found in cache
Processing  6/11: [datakit-client-git.dev: rsync] [datakit-github.dev: rsync]
[datakit-client-git.dev] synchronised from file:///home/opam/src/datakit
Processing  6/11: [datakit-github.dev: rsync]
[git-unix.1.11.0] found in cache
Processing  7/11: [datakit-github.dev: rsync]
[datakit-github.dev] synchronised from file:///home/opam/src/datakit
Processing  7/11:
Processing  8/11: [github.dev: git]
Processing  9/11: [github.dev: git] [github-hooks.dev: git]
Processing 10/11: [github.dev: git] [github-hooks.dev: git] [github-hooks-unix.dev: git]
[github-hooks-unix.dev] synchronised from git+https://github.com/samoht/ocaml-github-hooks.git#github-dev
Processing 10/11: [github.dev: git] [github-hooks.dev: git]
Processing 11/11: [github.dev: git] [github-hooks.dev: git] [github-unix.dev: git]
[github-hooks.dev] synchronised from git+https://github.com/samoht/ocaml-github-hooks.git#github-dev
Processing 11/11: [github.dev: git] [github-unix.dev: git]
[github.dev] synchronised from git+https://github.com/mirage/ocaml-github.git
Processing 11/11: [github-unix.dev: git]
[github-unix.dev] synchronised from git+https://github.com/mirage/ocaml-github.git

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/24: [datakit-client: jbuilder build]
+ jbuilder "build" "-p" "datakit-client" "-j" "1" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit-client.dev)
-     ocamldep api/ocaml/datakit_client.depends.ocamldep-output
-     ocamldep api/ocaml/datakit_client.dependsi.ocamldep-output
-       ocamlc api/ocaml/datakit_client.{cmi,cmti}
-       ocamlc api/ocaml/datakit_client.{cmo,cmt}
-     ocamlopt api/ocaml/datakit_client.{cmx,o}
-       ocamlc api/ocaml/datakit_client.cma
-     ocamlopt api/ocaml/datakit_client.{a,cmxa}
-     ocamlopt api/ocaml/datakit_client.cmxs
-> compiled  datakit-client.dev
Processing  2/24: [git-http: jbuilder build]
+ jbuilder "build" "-p" "git-http" "-j" "1" (CWD=/home/opam/.opam/default/.opam-switch/build/git-http.1.11.0)
-     ocamldep src/git-http/git_http.depends.ocamldep-output
-     ocamldep src/git-http/git_http.dependsi.ocamldep-output
-       ocamlc src/git-http/git_http.{cmi,cmti}
-       ocamlc src/git-http/git_http.{cmo,cmt}
-     ocamlopt src/git-http/git_http.{cmx,o}
-       ocamlc src/git-http/git_http.cma
-     ocamlopt src/git-http/git_http.{a,cmxa}
-     ocamlopt src/git-http/git_http.cmxs
-> compiled  git-http.1.11.0
Processing  3/24: [github: jbuilder build]
+ jbuilder "build" "-p" "github" "-j" "1" (CWD=/home/opam/.opam/default/.opam-switch/build/github.dev)
- File "lib_test/jbuild", line 5, characters 11-22:
- Warning: This field is useless without a (public_names ...) field.
-       atdgen lib/github_j.{ml,mli}
-       atdgen lib/github_t.{ml,mli}
-     ocamldep lib/github.depends.ocamldep-output
-     ocamldep lib/github.dependsi.ocamldep-output
-       ocamlc lib/github_t.{cmi,cmti}
-       ocamlc lib/github_t.{cmo,cmt}
-     ocamlopt lib/github_t.{cmx,o}
-       ocamlc lib/github_j.{cmi,cmti}
-       ocamlc lib/github_s.{cmi,cmti}
-       ocamlc lib/github_j.{cmo,cmt}
-     ocamlopt lib/github_j.{cmx,o}
-       ocamlc lib/github_s.{cmo,cmt}
-     ocamlopt lib/github_s.{cmx,o}
-       ocamlc lib/github_core.{cmi,cmti}
-       ocamlc lib/github_core.{cmo,cmt}
-     ocamlopt lib/github_core.{cmx,o}
-       ocamlc lib/github.cma
-     ocamlopt lib/github.{a,cmxa}
-     ocamlopt lib/github.cmxs
-> compiled  github.dev
-> removed   github-hooks.0.1.2
Processing  5/24: [github: ocamlfind remove]
+ ocamlfind "remove" "github"
- Removed /home/opam/.opam/default/lib/github/META
- Removed /home/opam/.opam/default/lib/github
[91m[WARNING] While removing github.2.3.0: not removing files that changed since:
            - bin/git-upload-release
            - bin/git-sync-releases
            - bin/git-search
            - bin/git-list-releases
            - bin/git-list-issues
            - bin/git-list-events
            - bin/git-jar
            - bin/git-gist
            - bin/git-create-release

[0m-> removed   github.2.3.0
-> installed datakit-client.dev
Processing  7/24: [datakit-client-9p: jbuilder build]
+ jbuilder "build" "-p" "datakit-client-9p" "-j" "1" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit-client-9p.dev)
-     ocamldep api/ocaml/9p/mount/mount.depends.ocamldep-output
-     ocamldep api/ocaml/9p/datakit_client_9p.depends.ocamldep-output
-     ocamldep api/ocaml/9p/datakit_client_9p.dependsi.ocamldep-output
-       ocamlc api/ocaml/9p/mount/version.{cmi,cmo,cmt}
-       ocamlc api/ocaml/9p/datakit_client_9p.{cmi,cmti}
-     ocamlopt api/ocaml/9p/mount/version.{cmx,o}
-       ocamlc api/ocaml/9p/mount/mount.{cmi,cmo,cmt}
-       ocamlc api/ocaml/9p/datakit_client_9p.{cmo,cmt}
-     ocamlopt api/ocaml/9p/datakit_client_9p.{cmx,o}
-     ocamlopt api/ocaml/9p/mount/mount.{cmx,o}
-       ocamlc api/ocaml/9p/datakit_client_9p.cma
-     ocamlopt api/ocaml/9p/datakit_client_9p.{a,cmxa}
-     ocamlopt api/ocaml/9p/mount/mount.exe
-     ocamlopt api/ocaml/9p/datakit_client_9p.cmxs
-> compiled  datakit-client-9p.dev
Processing  8/24: [datakit-github: jbuilder build]
+ jbuilder "build" "-p" "datakit-github" "-j" "1" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit-github.dev)
-     ocamldep src/datakit-github/datakit_github.depends.ocamldep-output
-     ocamldep src/datakit-github/datakit_github.dependsi.ocamldep-output
-       ocamlc src/datakit-github/datakit_github.{cmi,cmti}
-       ocamlc src/datakit-github/datakit_github.{cmo,cmt}
-     ocamlopt src/datakit-github/datakit_github.{cmx,o}
-       ocamlc src/datakit-github/datakit_github_conv.{cmi,cmti}
-       ocamlc src/datakit-github/datakit_github_conv.{cmo,cmt}
-     ocamlopt src/datakit-github/datakit_github_conv.{cmx,o}
-       ocamlc src/datakit-github/datakit_github.cma
-     ocamlopt src/datakit-github/datakit_github.{a,cmxa}
-     ocamlopt src/datakit-github/datakit_github.cmxs
-> compiled  datakit-github.dev
-> installed datakit-client-9p.dev
-> installed datakit-github.dev
-> installed git-http.1.11.0
Processing 12/24: [git-unix: jbuilder build]
+ jbuilder "build" "-p" "git-unix" "-j" "1" (CWD=/home/opam/.opam/default/.opam-switch/build/git-unix.1.11.0)
-     ocamldep src/git-unix/ogit/main.depends.ocamldep-output
-     ocamldep src/git-unix/git_unix.depends.ocamldep-output
-     ocamldep src/git-unix/git_unix.dependsi.ocamldep-output
-       ocamlc src/git-unix/git_unix.{cmi,cmti}
-       ocamlc src/git-unix/git_unix.{cmo,cmt}
-     ocamlopt src/git-unix/git_unix.{cmx,o}
-       ocamlc src/git-unix/ogit/main.{cmi,cmo,cmt}
-       ocamlc src/git-unix/git_unix.cma
-     ocamlopt src/git-unix/git_unix.{a,cmxa}
-     ocamlopt src/git-unix/ogit/main.{cmx,o}
-     ocamlopt src/git-unix/git_unix.cmxs
-     ocamlopt src/git-unix/ogit/main.exe
-> compiled  git-unix.1.11.0
-> installed git-unix.1.11.0
Processing 14/24: [datakit-client-git: jbuilder build]
+ jbuilder "build" "-p" "datakit-client-git" "-j" "1" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit-client-git.dev)
-     ocamldep api/ocaml/git/datakit_client_git.depends.ocamldep-output
-     ocamldep api/ocaml/git/datakit_client_git.dependsi.ocamldep-output
-       ocamlc api/ocaml/git/datakit_client_git.{cmi,cmti}
-       ocamlc api/ocaml/git/datakit_client_git.{cmo,cmt}
-     ocamlopt api/ocaml/git/datakit_client_git.{cmx,o}
-       ocamlc api/ocaml/git/datakit_client_git.cma
-     ocamlopt api/ocaml/git/datakit_client_git.{a,cmxa}
-     ocamlopt api/ocaml/git/datakit_client_git.cmxs
-> compiled  datakit-client-git.dev
-> installed datakit-client-git.dev
-> installed github.dev
Processing 17/24: [github-unix: jbuilder build]
+ jbuilder "build" "-p" "github-unix" "-j" "1" (CWD=/home/opam/.opam/default/.opam-switch/build/github-unix.dev)
- File "lib_test/jbuild", line 5, characters 11-22:
- Warning: This field is useless without a (public_names ...) field.
-     ocamldep jar/create_release.depends.ocamldep-output
-     ocamldep gist/gist.depends.ocamldep-output
-     ocamldep unix/github_unix.dependsi.ocamldep-output
-     ocamldep unix/github_unix.depends.ocamldep-output
-     ocamldep jar/create_release.dependsi.ocamldep-output
-       ocamlc unix/github.{cmi,cmti}
-       ocamlc unix/github_cookie_jar.{cmi,cmti}
-       ocamlc unix/github.{cmo,cmt}
-     ocamlopt unix/github.{cmx,o}
-       ocamlc unix/github_cookie_jar.{cmo,cmt}
-     ocamlopt unix/github_cookie_jar.{cmx,o}
-       ocamlc jar/jar_version.{cmi,cmo,cmt}
-       ocamlc jar/passwd.{cmi,cmo,cmt}
-       ocamlc gist/json.{cmi,cmo,cmt}
-       ocamlc jar/jar_cli.{cmi,cmti}
-       ocamlc unix/github_unix.cma
-     ocamlopt unix/github_unix.{a,cmxa}
-     ocamlopt jar/jar_version.{cmx,o}
-     ocamlopt jar/passwd.{cmx,o}
-       ocamlc jar/jar.{cmi,cmo,cmt}
-     ocamlopt gist/json.{cmx,o}
-       ocamlc gist/gist.{cmi,cmo,cmt}
-     ocamlopt jar/jar_cli.{cmx,o}
-       ocamlc jar/create_release.{cmi,cmo,cmt}
-       ocamlc jar/list_events.{cmi,cmo,cmt}
-       ocamlc jar/list_issues.{cmi,cmo,cmt}
-       ocamlc jar/list_releases.{cmi,cmo,cmt}
-       ocamlc jar/listen_events.{cmi,cmo,cmt}
-       ocamlc jar/search.{cmi,cmo,cmt}
-       ocamlc jar/sync_releases.{cmi,cmo,cmt}
-       ocamlc jar/upload_release.{cmi,cmo,cmt}
-     ocamlopt unix/github_unix.cmxs
-     ocamlopt jar/jar.{cmx,o}
-     ocamlopt gist/gist.{cmx,o}
-     ocamlopt jar/create_release.{cmx,o}
-     ocamlopt jar/list_events.{cmx,o}
-     ocamlopt jar/list_issues.{cmx,o}
-     ocamlopt jar/list_releases.{cmx,o}
-     ocamlopt jar/listen_events.{cmx,o}
-     ocamlopt jar/search.{cmx,o}
-     ocamlopt jar/sync_releases.{cmx,o}
-     ocamlopt jar/upload_release.{cmx,o}
-     ocamlopt jar/jar.exe
-     ocamlopt gist/gist.exe
-     ocamlopt jar/create_release.exe
-     ocamlopt jar/list_events.exe
-     ocamlopt jar/list_issues.exe
-     ocamlopt jar/list_releases.exe
-     ocamlopt jar/listen_events.exe
-     ocamlopt jar/search.exe
-     ocamlopt jar/sync_releases.exe
-     ocamlopt jar/upload_release.exe
-> compiled  github-unix.dev
-> installed github-unix.dev
Processing 19/24: [github-hooks: jbuilder build]
+ jbuilder "build" "-p" "github-hooks" "-j" "1" (CWD=/home/opam/.opam/default/.opam-switch/build/github-hooks.dev)
-     ocamldep src/core/github_hooks.depends.ocamldep-output
-     ocamldep src/core/github_hooks.dependsi.ocamldep-output
-       ocamlc src/core/github_hooks.{cmi,cmti}
-       ocamlc src/core/github_hooks.{cmo,cmt}
-     ocamlopt src/core/github_hooks.{cmx,o}
-       ocamlc src/core/github_hooks.cma
-     ocamlopt src/core/github_hooks.{a,cmxa}
-     ocamlopt src/core/github_hooks.cmxs
-> compiled  github-hooks.dev
-> installed github-hooks.dev
Processing 21/24: [github-hooks-unix: jbuilder build]
+ jbuilder "build" "-p" "github-hooks-unix" "-j" "1" (CWD=/home/opam/.opam/default/.opam-switch/build/github-hooks-unix.dev)
-     ocamldep src/unix/github_hooks_unix.depends.ocamldep-output
-     ocamldep src/unix/github_hooks_unix.dependsi.ocamldep-output
-       ocamlc src/unix/github_hooks_unix.{cmi,cmti}
-       ocamlc src/unix/github_hooks_unix.{cmo,cmt}
-     ocamlopt src/unix/github_hooks_unix.{cmx,o}
-       ocamlc src/unix/github_hooks_unix.cma
-     ocamlopt src/unix/github_hooks_unix.{a,cmxa}
-     ocamlopt src/unix/github_hooks_unix.cmxs
-> compiled  github-hooks-unix.dev
-> installed github-hooks-unix.dev
Processing 23/24: [datakit-bridge-github: jbuilder build]
+ jbuilder "build" "-p" "datakit-bridge-github" "-j" "1" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit-bridge-github.dev)
-     ocamldep bridge/github/main.depends.ocamldep-output
-     ocamldep bridge/github/datakit_bridge_github.depends.ocamldep-output
-     ocamldep bridge/github/datakit_bridge_github.dependsi.ocamldep-output
-     ocamldep src/datakit-log/datakit_log.dependsi.ocamldep-output
-     ocamldep src/datakit-log/datakit_log.depends.ocamldep-output
-     ocamldep bridge/github/main.dependsi.ocamldep-output
-       ocamlc bridge/github/datakit_github_api.{cmi,cmti}
-       ocamlc bridge/github/datakit_github_state.{cmi,cmti}
-       ocamlc bridge/github/datakit_github_sync.{cmi,cmti}
-       ocamlc src/datakit-log/datakit_log.{cmi,cmti}
-     ocamlopt bridge/github/datakit_github_api.{cmx,o}
-     ocamlopt bridge/github/datakit_github_state.{cmx,o}
-       ocamlc bridge/github/version.{cmi,cmo,cmt}
-       ocamlc bridge/github/main.{cmi,cmti}
-     ocamlopt src/datakit-log/datakit_log.{cmx,o}
-     ocamlopt bridge/github/datakit_github_sync.{cmx,o}
-     ocamlopt src/datakit-log/datakit_log.{a,cmxa}
-     ocamlopt bridge/github/version.{cmx,o}
-     ocamlopt bridge/github/datakit_bridge_github.{a,cmxa}
-     ocamlopt bridge/github/main.{cmx,o}
-     ocamlopt bridge/github/main.exe
Processing 23/24: [datakit-bridge-github: jbuilder runtest]
+ jbuilder "runtest" "tests/datakit-bridge-github" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit-bridge-github.dev)
-     ocamldep tests/datakit-bridge-github/test.depends.ocamldep-output
-     ocamldep api/ocaml/datakit_client.depends.ocamldep-output
-     ocamldep api/ocaml/datakit_client.dependsi.ocamldep-output
-     ocamldep api/ocaml/9p/datakit_client_9p.depends.ocamldep-output
-     ocamldep src/datakit-github/datakit_github.dependsi.ocamldep-output
-     ocamldep src/datakit-io/datakit_io.depends.ocamldep-output
-     ocamldep src/datakit-server-9p/datakit_server_9p.depends.ocamldep-output
-     ocamldep src/datakit-server/datakit_server.depends.ocamldep-output
-     ocamldep api/ocaml/9p/datakit_client_9p.dependsi.ocamldep-output
-     ocamldep src/datakit-github/datakit_github.depends.ocamldep-output
-     ocamldep src/datakit-io/datakit_io.dependsi.ocamldep-output
-     ocamldep tests/common/test.depends.ocamldep-output
-     ocamldep src/datakit/datakit.depends.ocamldep-output
-     ocamldep src/datakit-server-9p/datakit_server_9p.dependsi.ocamldep-output
-     ocamldep src/datakit-server/datakit_server.dependsi.ocamldep-output
-     ocamldep src/datakit/datakit.dependsi.ocamldep-output
-       ocamlc src/datakit/datakit__.{cmi,cmo,cmt}
-     ocamldep tests/common/test.dependsi.ocamldep-output
-     ocamldep tests/datakit-bridge-github/test.dependsi.ocamldep-output
-       ocamlc api/ocaml/datakit_client.{cmi,cmti}
-       ocamlc src/datakit-io/datakit_io.{cmi,cmti}
-       ocamlc src/datakit-server/vfs.{cmi,cmti}
-     ocamlopt src/datakit/datakit__.{cmx,o}
-       ocamlc api/ocaml/9p/datakit_client_9p.{cmi,cmti}
-       ocamlc tests/common/test_client.{cmi,cmti}
-       ocamlc src/datakit-github/datakit_github.{cmi,cmti}
-     ocamlopt api/ocaml/datakit_client.{cmx,o}
-       ocamlc src/datakit-server-9p/fs9p.{cmi,cmti}
-       ocamlc src/datakit-server-9p/fs9p_error.{cmi,cmti}
-       ocamlc src/datakit/datakit__Blob.{cmi,cmti}
-       ocamlc src/datakit/datakit__Branch.{cmi,cmti}
-       ocamlc src/datakit/datakit__Metadata.{cmi,cmti}
-       ocamlc tests/common/test_utils.{cmi,cmo,cmt}
-       ocamlc src/datakit/datakit__Path.{cmi,cmti}
-       ocamlc src/datakit/datakit.{cmi,cmti}
-       ocamlc src/datakit-github/datakit_github_conv.{cmi,cmti}
-     ocamlopt src/datakit-io/datakit_io.{cmx,o}
-     ocamlopt api/ocaml/datakit_client.{a,cmxa}
-     ocamlopt src/datakit-server/vfs.{cmx,o}
-       ocamlc bridge/github/datakit_github_api.{cmi,cmti}
-       ocamlc bridge/github/datakit_github_state.{cmi,cmti}
-       ocamlc src/datakit/datakit__Store.{cmi,cmti}
-       ocamlc bridge/github/datakit_github_sync.{cmi,cmti}
-     ocamlopt src/datakit-io/datakit_io.{a,cmxa}
-     ocamlopt src/datakit-server-9p/fs9p_error.{cmx,o}
-     ocamlopt api/ocaml/9p/datakit_client_9p.{cmx,o}
-     ocamlopt src/datakit/datakit__Branch.{cmx,o}
-     ocamlopt src/datakit/datakit__Blob.{cmx,o}
-     ocamlopt tests/common/test_utils.{cmx,o}
-     ocamlopt src/datakit-server/datakit_server.{a,cmxa}
-     ocamlopt src/datakit/datakit__Metadata.{cmx,o}
-     ocamlopt src/datakit/datakit__Path.{cmx,o}
-       ocamlc src/datakit/datakit__Dir.{cmi,cmti}
-       ocamlc src/datakit/datakit__Merge.{cmi,cmti}
-     ocamlopt api/ocaml/9p/datakit_client_9p.{a,cmxa}
-       ocamlc src/datakit/datakit__Remote.{cmi,cmti}
-     ocamlopt src/datakit-github/datakit_github.{cmx,o}
-       ocamlc tests/datakit-bridge-github/test.{cmi,cmti}
-     ocamlopt src/datakit-server-9p/fs9p.{cmx,o}
-     ocamlopt src/datakit-server-9p/datakit_server_9p.{a,cmxa}
-     ocamlopt src/datakit/datakit__Store.{cmx,o}
-     ocamlopt src/datakit/datakit__Dir.{cmx,o}
-     ocamlopt src/datakit/datakit__Merge.{cmx,o}
-     ocamlopt tests/common/test_client.{cmx,o}
-     ocamlopt src/datakit/datakit__Remote.{cmx,o}
-     ocamlopt tests/common/test.{a,cmxa}
-     ocamlopt src/datakit-github/datakit_github_conv.{cmx,o}
-     ocamlopt src/datakit-github/datakit_github.{a,cmxa}
-     ocamlopt bridge/github/datakit_github_state.{cmx,o}
-     ocamlopt bridge/github/datakit_github_api.{cmx,o}
-     ocamlopt bridge/github/datakit_github_sync.{cmx,o}
-     ocamlopt bridge/github/datakit_bridge_github.{a,cmxa}
-     ocamlopt src/datakit/datakit.{cmx,o}
-     ocamlopt src/datakit/datakit.{a,cmxa}
-     ocamlopt tests/datakit-bridge-github/test.{cmx,o}
-     ocamlopt tests/datakit-bridge-github/test.exe
-         test alias tests/datakit-bridge-github/runtest
- /bin/sh: tput: not found
- stty: standard input: Not a tty
- Testing datakit-github.
- [33m ...[m                [36mgithub-9p[m          0   Transaction.[32m[OK][m                [36mgithub-9p[m          0   Transaction.
- [33m ...[m                [36mgithub-9p[m          1   Watch.[32m[OK][m                [36mgithub-9p[m          1   Watch.
- [33m ...[m                [36mgithub-9p[m          2   Make dirs.[32m[OK][m                [36mgithub-9p[m          2   Make dirs.
- [33m ...[m                [36mgithub-9p[m          3   Truncate.[32m[OK][m                [36mgithub-9p[m          3   Truncate.
- [33m ...[m                [36mgithub-9p[m          4   Parents.[32m[OK][m                [36mgithub-9p[m          4   Parents.
- [33m ...[m                [36mgithub-9p[m          5   Merge.[32m[OK][m                [36mgithub-9p[m          5   Merge.
- [33m ...[m                [36mgithub-9p[m          6   Diff.[32m[OK][m                [36mgithub-9p[m          6   Diff.
- [33m ...[m                [36mgithub-9p[m          7   Merge_metadata.[32m[OK][m                [36mgithub-9p[m          7   Merge_metadata.
- [33m ...[m                [36mgithub-9p[m          8   Merge empty.[32m[OK][m                [36mgithub-9p[m          8   Merge empty.
- [33m ...[m                [36mgithub-9p[m          9   Conflicts.[32m[OK][m                [36mgithub-9p[m          9   Conflicts.
- [33m ...[m                [36mgithub-9p[m         10   Large write.[32m[OK][m                [36mgithub-9p[m         10   Large write.
- [33m ...[m                [36mgithub-9p[m         11   Remove.[32m[OK][m                [36mgithub-9p[m         11   Remove.
- [33m ...[m                [36mgithub-9p[m         12   Remotes.[33m[SKIP][m              [36mgithub-9p[m         12   Remotes.
- [33m ...[m                [36mgithub-9p[m         13   Create_or_replace.[33m[SKIP][m              [36mgithub-9p[m         13   Create_or_replace.
- [33m ...[m                [36mgithub[m             0   basic-snapshot.[32m[OK][m                [36mgithub[m             0   basic-snapshot.
- [33m ...[m                [36mgithub[m             1   snapshot.[32m[OK][m                [36mgithub[m             1   snapshot.
- [33m ...[m                [36mgithub[m             2   capabilities.[32m[OK][m                [36mgithub[m             2   capabilities.
- [33m ...[m                [36mgithub[m             3   cleanup.[32m[OK][m                [36mgithub[m             3   cleanup.
- [33m ...[m                [36mgithub[m             4   events.[32m[OK][m                [36mgithub[m             4   events.
- [33m ...[m                [36mgithub[m             5   updates.[32m[OK][m                [36mgithub[m             5   updates.
- [33m ...[m                [36mgithub[m             6   startup.[32m[OK][m                [36mgithub[m             6   startup.
- [33m ...[m                [36mgithub[m             7   random-github.[32m[OK][m                [36mgithub[m             7   random-github.
- [33m ...[m                [36mgithub[m             8   random-github-*.[33m[SKIP][m              [36mgithub[m             8   random-github-*.
- [33m ...[m                [36mgithub[m             9   random-datakit.[32m[OK][m                [36mgithub[m             9   random-datakit.
- [33m ...[m                [36mgithub[m            10   random-datakit-*.[33m[SKIP][m              [36mgithub[m            10   random-datakit-*.
- The full test results are available in `_build/_tests`.
- [32mTest Successful[m in 3.296s. 21 tests run.
-> compiled  datakit-bridge-github.dev
-> installed datakit-bridge-github.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 33b3a11bad64
Removing intermediate container 8a365acb97fd
Removing intermediate container 300fae5ef7d0
Removing intermediate container 7c82de992579
Error removing intermediate container fd8e8977dc34: No such container: fd8e8977dc34ba09be738751cf19071ab285c3705ce63850b254fcc6cc715770
Step 26/34 : RUN sudo cp $(opam config exec -- which datakit-bridge-github) /usr/bin/
 ---> Running in 755b392661ca
 ---> 578ceab96ab8
Error removing intermediate container fd8e8977dc34: No such container: fd8e8977dc34ba09be738751cf19071ab285c3705ce63850b254fcc6cc715770
Step 27/34 : USER root
 ---> Running in a7d2ae315718
 ---> cd449df4b49c
Removing intermediate container 755b392661ca
Removing intermediate container a7d2ae315718
Error removing intermediate container fd8e8977dc34: No such container: fd8e8977dc34ba09be738751cf19071ab285c3705ce63850b254fcc6cc715770
Step 28/34 : FROM alpine:3.5
3.5: Pulling from library/alpine
Digest: sha256:f02537b30c729bb1ee0c67c8bff3a28972bed0abbee8f5520421994c5247b896
Status: Image is up to date for alpine:3.5
 ---> 75b63e430bd1
Error removing intermediate container 905d47eebb0a: No such container: 905d47eebb0ada7a947a506433e0a97057921fc3372685650f1862d06f0b7260
Step 29/34 : RUN apk add --no-cache libev gmp tzdata ca-certificates
 ---> Using cache
 ---> 96a7062fdf86
Error removing intermediate container 905d47eebb0a: No such container: 905d47eebb0ada7a947a506433e0a97057921fc3372685650f1862d06f0b7260
Step 30/34 : EXPOSE 5640
 ---> Using cache
 ---> 5c1990d92e8c
Error removing intermediate container fd8e8977dc34: No such container: fd8e8977dc34ba09be738751cf19071ab285c3705ce63850b254fcc6cc715770
Step 31/34 : EXPOSE 5641
 ---> Using cache
 ---> 2bac7d0666e6
Error removing intermediate container fd8e8977dc34: No such container: fd8e8977dc34ba09be738751cf19071ab285c3705ce63850b254fcc6cc715770
Step 32/34 : ENTRYPOINT /usr/bin/datakit-bridge-github
 ---> Using cache
 ---> d0c219f6ed8b
Error removing intermediate container fd8e8977dc34: No such container: fd8e8977dc34ba09be738751cf19071ab285c3705ce63850b254fcc6cc715770
Step 33/34 : CMD --listen=tcp://0.0.0.0:5641 -v --datakit=tcp:127.0.0.1:5640
 ---> Using cache
 ---> cb402fe5fc36
Error removing intermediate container fd8e8977dc34: No such container: fd8e8977dc34ba09be738751cf19071ab285c3705ce63850b254fcc6cc715770
Step 34/34 : COPY --from=0 /usr/bin/datakit-bridge-github /usr/bin/datakit-bridge-github
 ---> c868a012b452
Error removing intermediate container 905d47eebb0a: No such container: 905d47eebb0ada7a947a506433e0a97057921fc3372685650f1862d06f0b7260
Successfully built c868a012b452
[2017-06-09 13:03.36] Success
