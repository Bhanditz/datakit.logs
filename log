=== Docker build Dockerfile.ci
[2017-05-04 18:04.01] Starting...
Cloning into '/tmp/with_clone35d1f5ee'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at 00f75dc dockerfile: use updated custom branch for protocol-9p
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 5.697 MB
Step 1/18 : FROM ocaml/opam-dev@sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe: Pulling from ocaml/opam-dev
Digest: sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
Status: Image is up to date for ocaml/opam-dev@sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
 ---> 477ad7d223ad
Step 2/18 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> 20061f41087f
Step 3/18 : RUN sudo apk add tzdata aspcud
 ---> Using cache
 ---> c9c160bcf357
Step 4/18 : RUN opam pin add hvsock.0.14.0 -n https://github.com/mirage/ocaml-hvsock.git#88397c37a910c61507a9655ed8413c1692294da0
 ---> Using cache
 ---> d7f99e2dde67
Step 5/18 : RUN opam pin add irmin.1.1.0 -n https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0
 ---> Using cache
 ---> 0a767c1dcced
Step 6/18 : RUN opam pin add irmin-git.1.1.0 -n https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0
 ---> Using cache
 ---> d407611488be
Step 7/18 : RUN opam pin add irmin-unix.1.1.0 -n https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0
 ---> Using cache
 ---> 2effcead53b8
Step 8/18 : RUN opam pin add -yn protocol-9p.0.10.0 'https://github.com/talex5/ocaml-9p.git#ping-0.10.0'
 ---> Using cache
 ---> a0149acd9007
Step 9/18 : RUN opam depext -i asl win-eventlog camlzip alcotest mtime mirage-flow hvsock git irmin irmin-unix lwt protocol-9p tyxml redis multipart-form-data pbkdf tls prometheus-app github git session irmin irmin-unix cmdliner webmachine
 ---> Using cache
 ---> 197279180443
Step 10/18 : RUN opam install irmin-unix alcotest
 ---> Using cache
 ---> 8f7f95e9c58d
Step 11/18 : ADD . /home/opam/datakit
 ---> 12f760bff0f1
Removing intermediate container 1ab0b1938daf
Step 12/18 : RUN sudo chown opam /home/opam/datakit
 ---> Running in 79ea502662ba
 ---> 4c1b287ac5f3
Error removing intermediate container 79ea502662ba: Driver aufs failed to remove root filesystem 79ea502662bae53926b11e2779e89f223c9f2cd796e7e6437943760f9fbc296a: rename /var/lib/docker/aufs/mnt/5cb6f0030d02f8ae31ac36230788c9d0bda2bd59c95721dd824cd37b2d19c9cf /var/lib/docker/aufs/mnt/5cb6f0030d02f8ae31ac36230788c9d0bda2bd59c95721dd824cd37b2d19c9cf-removing: device or resource busy
Step 13/18 : RUN opam pin add -k git datakit-client.dev /home/opam/datakit -y
 ---> Running in 12a3b233f293
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-client/datakit-client.opam from 1.2 to 2.0~beta
[0mdatakit-client is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install protocol-9p-unix 0.10.0                             [required by datakit-client]
  - install datakit-client   dev*
===== 2 to install =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client.dev] synchronised from git+file:///home/opam/datakit#master
[protocol-9p-unix.0.10.0] downloaded from https://github.com/mirage/ocaml-9p/archive/v0.10.0.tar.gz

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed protocol-9p-unix.0.10.0
-> installed datakit-client.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> b1751e3fe7af
Error removing intermediate container 79ea502662ba: No such container: 79ea502662bae53926b11e2779e89f223c9f2cd796e7e6437943760f9fbc296a
Step 14/18 : RUN opam pin add -k git datakit-server.dev /home/opam/datakit -y
 ---> Running in 22a7f82aafbc
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-server/datakit-server.opam from 1.2 to 2.0~beta
[0mdatakit-server is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-server dev*
[datakit-server.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-server.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 677a03ca7b3e
Error removing intermediate container 79ea502662ba: No such container: 79ea502662bae53926b11e2779e89f223c9f2cd796e7e6437943760f9fbc296a
Step 15/18 : RUN opam pin add -k git datakit-github.dev /home/opam/datakit -y
 ---> Running in b50f7c69135b
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-github/datakit-github.opam from 1.2 to 2.0~beta
[0mdatakit-github is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-github dev*
[datakit-github.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-github.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 4ef07052ed18
Error removing intermediate container 79ea502662ba: No such container: 79ea502662bae53926b11e2779e89f223c9f2cd796e7e6437943760f9fbc296a
Step 16/18 : RUN opam pin add -k git datakit.dev /home/opam/datakit -y
 ---> Running in eabf1cd42760
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit/datakit.opam from 1.2 to 2.0~beta
[0mdatakit is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit dev*
[datakit.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> fec89ee1a637
Error removing intermediate container 79ea502662ba: No such container: 79ea502662bae53926b11e2779e89f223c9f2cd796e7e6437943760f9fbc296a
Step 17/18 : RUN opam pin add -k git datakit-ci.dev /home/opam/datakit -yt
 ---> Running in 715bc17255a2
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-ci/datakit-ci.opam from 1.2 to 2.0~beta
[0mdatakit-ci is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-ci dev*
[datakit-ci.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-ci.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> d99627a97d13
Error removing intermediate container 79ea502662ba: No such container: 79ea502662bae53926b11e2779e89f223c9f2cd796e7e6437943760f9fbc296a
Step 18/18 : VOLUME /secrets
 ---> Running in 33c5477b5a57
 ---> 8233dc176d66
Removing intermediate container eabf1cd42760
Removing intermediate container 715bc17255a2
Removing intermediate container 33c5477b5a57
Error removing intermediate container 79ea502662ba: No such container: 79ea502662bae53926b11e2779e89f223c9f2cd796e7e6437943760f9fbc296a
Successfully built 8233dc176d66
[2017-05-04 18:05.39] Success
