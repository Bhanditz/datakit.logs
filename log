=== Docker build Dockerfile.ci
[2017-05-18 18:33.58] Starting...
Cloning into '/tmp/with_clonece5e7eb'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at 700eb71 Merge pull request #569 from samoht/eof
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 6.128 MBSending build context to Docker daemon 6.685 MBSending build context to Docker daemon 7.212 MBSending build context to Docker daemon 7.212 MB
Step 1/24 : FROM ocaml/opam-dev@sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe: Pulling from ocaml/opam-dev
Digest: sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
Status: Image is up to date for ocaml/opam-dev@sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
 ---> 477ad7d223ad
Step 2/24 : RUN git -C /home/opam/opam-repository fetch origin &&     git -C /home/opam/opam-repository reset origin/master --hard &&     opam update -u
 ---> Using cache
 ---> 52e71e2e863a
Step 3/24 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> cfabc32e9e4f
Step 4/24 : RUN sudo apk add tzdata aspcud
 ---> Using cache
 ---> 51ed7ede4caa
Step 5/24 : RUN opam pin add git.dev --dev -n
 ---> Using cache
 ---> 09561fa35521
Step 6/24 : RUN opam pin add git-unix.dev --dev -n
 ---> Using cache
 ---> ca2717bed195
Step 7/24 : RUN opam pin add irmin.1.2.0 -n https://github.com/mirage/irmin.git#81ffa256d3aa6b73b689609f7a5ff01c298fe821
 ---> Using cache
 ---> cc441b126226
Step 8/24 : RUN opam pin add irmin-mem.1.2.0 -n https://github.com/mirage/irmin.git#81ffa256d3aa6b73b689609f7a5ff01c298fe821
 ---> Using cache
 ---> 38e441d69d39
Step 9/24 : RUN opam pin add irmin-fs.1.2.0 -n https://github.com/mirage/irmin.git#81ffa256d3aa6b73b689609f7a5ff01c298fe821
 ---> Using cache
 ---> fcb396508511
Step 10/24 : RUN opam pin add irmin-http.1.2.0 -n https://github.com/mirage/irmin.git#81ffa256d3aa6b73b689609f7a5ff01c298fe821
 ---> Using cache
 ---> a2a562dcf0ea
Step 11/24 : RUN opam pin add irmin-git.1.2.0 -n https://github.com/mirage/irmin.git#81ffa256d3aa6b73b689609f7a5ff01c298fe821
 ---> Using cache
 ---> 15909fa820d7
Step 12/24 : RUN opam pin add irmin-unix.1.2.0 -n https://github.com/mirage/irmin.git#81ffa256d3aa6b73b689609f7a5ff01c298fe821
 ---> Using cache
 ---> aaac172ada2d
Step 13/24 : RUN opam pin add protocol-9p-unix.dev --dev -n
 ---> Using cache
 ---> 738508007cb8
Step 14/24 : RUN opam depext -i asl win-eventlog camlzip alcotest mtime mirage-flow hvsock     git irmin irmin-unix lwt protocol-9p-unix tyxml redis multipart-form-data     pbkdf tls prometheus-app github git session irmin irmin-unix cmdliner     webmachine alcotest
 ---> Using cache
 ---> 276d99ea875b
Step 15/24 : ADD . /home/opam/datakit
 ---> 256db066a23d
Error removing intermediate container b314e1a35bfa: Driver aufs failed to remove root filesystem b314e1a35bfa0d02ea0c727c92efb3318838069e5b12ec46adc06c21e6340d73: rename /var/lib/docker/aufs/mnt/5735fb1ff1192028f3c208d99b3a32df157d25b5bb033617b3397554e00eddc8 /var/lib/docker/aufs/mnt/5735fb1ff1192028f3c208d99b3a32df157d25b5bb033617b3397554e00eddc8-removing: device or resource busy
Step 16/24 : RUN sudo chown opam /home/opam/datakit
 ---> Running in 4c0e029d81fa
 ---> c5e10141d284
Error removing intermediate container b314e1a35bfa: No such container: b314e1a35bfa0d02ea0c727c92efb3318838069e5b12ec46adc06c21e6340d73
Step 17/24 : RUN opam pin add -k git datakit-client.dev /home/opam/datakit -y
 ---> Running in 4a3819bb65fe
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-client/datakit-client.opam from 1.2 to 2.0~beta
[0mdatakit-client is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-client dev*
[datakit-client.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-client.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> cb110977f03d
Error removing intermediate container b314e1a35bfa: No such container: b314e1a35bfa0d02ea0c727c92efb3318838069e5b12ec46adc06c21e6340d73
Step 18/24 : RUN opam pin add -k git datakit-client-9p.dev /home/opam/datakit -y
 ---> Running in ceeb0ed9e518
Package datakit-client-9p does not exist, create as a NEW package ? [Y/n] y
[datakit-client-9p.dev: git]
[datakit-client-9p.dev: git]
[datakit-client-9p.dev: git]
[datakit-client-9p.dev: git]
[datakit-client-9p.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-client-9p/datakit-client-9p.opam from 1.2 to 2.0~beta
[0mdatakit-client-9p is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-client-9p dev*
[datakit-client-9p.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-client-9p.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 6b002fd12d77
Error removing intermediate container b314e1a35bfa: No such container: b314e1a35bfa0d02ea0c727c92efb3318838069e5b12ec46adc06c21e6340d73
Step 19/24 : RUN opam pin add -k git datakit-server.dev /home/opam/datakit -y
 ---> Running in 56502b1da5bf
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-server/datakit-server.opam from 1.2 to 2.0~beta
[0mdatakit-server is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-server dev*
[datakit-server.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-server.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> e0d6cd710942
Error removing intermediate container b314e1a35bfa: No such container: b314e1a35bfa0d02ea0c727c92efb3318838069e5b12ec46adc06c21e6340d73
Step 20/24 : RUN opam pin add -k git datakit-server-9p.dev /home/opam/datakit -y
 ---> Running in d03ff46c3cce
Package datakit-server-9p does not exist, create as a NEW package ? [Y/n] y
[datakit-server-9p.dev: git]
[datakit-server-9p.dev: git]
[datakit-server-9p.dev: git]
[datakit-server-9p.dev: git]
[datakit-server-9p.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-server-9p/datakit-server-9p.opam from 1.2 to 2.0~beta
[0mdatakit-server-9p is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-server-9p dev*
[datakit-server-9p.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-server-9p.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 7eb45c7aa3d0
Removing intermediate container d03ff46c3cce
Error removing intermediate container b314e1a35bfa: No such container: b314e1a35bfa0d02ea0c727c92efb3318838069e5b12ec46adc06c21e6340d73
Step 21/24 : RUN opam pin add -k git datakit-github.dev /home/opam/datakit -y
 ---> Running in 32a41082cd73
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-github/datakit-github.opam from 1.2 to 2.0~beta
[0mdatakit-github is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-github dev*
[datakit-github.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-github.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 719fb844218a
Error removing intermediate container b314e1a35bfa: No such container: b314e1a35bfa0d02ea0c727c92efb3318838069e5b12ec46adc06c21e6340d73
Step 22/24 : RUN opam pin add -k git datakit.dev /home/opam/datakit -y
 ---> Running in 58315978a0c7
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit/datakit.opam from 1.2 to 2.0~beta
[0mdatakit is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install irmin-mem 1.2.0*                                    [required by datakit]
  - install datakit   dev*
===== 2 to install =====
[datakit.dev] synchronised from git+file:///home/opam/datakit#master
[irmin-mem.1.2.0] synchronised from git+https://github.com/mirage/irmin.git#81ffa256d3aa6b73b689609f7a5ff01c298fe821

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed irmin-mem.1.2.0
-> installed datakit.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 47d89962ef2a
Removing intermediate container 4c0e029d81fa
Removing intermediate container 4a3819bb65fe
Removing intermediate container ceeb0ed9e518
Removing intermediate container 56502b1da5bf
Removing intermediate container 32a41082cd73
Removing intermediate container 58315978a0c7
Error removing intermediate container b314e1a35bfa: No such container: b314e1a35bfa0d02ea0c727c92efb3318838069e5b12ec46adc06c21e6340d73
Step 23/24 : RUN opam pin add -k git datakit-ci.dev /home/opam/datakit -yt
 ---> Running in af74a12787e8
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-ci/datakit-ci.opam from 1.2 to 2.0~beta
[0mdatakit-ci is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-ci dev*
[datakit-ci.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-ci.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> e09a3c79f04b
Error removing intermediate container b314e1a35bfa: No such container: b314e1a35bfa0d02ea0c727c92efb3318838069e5b12ec46adc06c21e6340d73
Step 24/24 : VOLUME /secrets
 ---> Running in 78832db586c0
 ---> 1ddf480cc90d
Error removing intermediate container b314e1a35bfa: No such container: b314e1a35bfa0d02ea0c727c92efb3318838069e5b12ec46adc06c21e6340d73
Successfully built 1ddf480cc90d
[2017-05-18 18:36.07] Success
