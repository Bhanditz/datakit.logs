=== Docker build Dockerfile.github
[2018-04-24 16:13.14] Starting...
Cloning into '/tmp/with_clonef457c4d'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at bab9528 Bridge should depend on tls
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 6.128 MBSending build context to Docker daemon 6.685 MBSending build context to Docker daemon 7.242 MBSending build context to Docker daemon 7.799 MBSending build context to Docker daemon 8.356 MBSending build context to Docker daemon 8.913 MBSending build context to Docker daemon 9.325 MB
Step 1/22 : FROM ocaml/opam-dev:alpine-3.5_ocaml-4.05.0
alpine-3.5_ocaml-4.05.0: Pulling from ocaml/opam-dev
Digest: sha256:56eabc77608dac440c0907a0d3d3c2fbff0d65141b20dc5296783c21d42310d3
Status: Image is up to date for ocaml/opam-dev:alpine-3.5_ocaml-4.05.0
 ---> 1b9232af4c8c
Step 2/22 : RUN sudo apk add --no-cache tzdata aspcud gmp-dev perl libev-dev m4
 ---> Using cache
 ---> d0597535afb8
Step 3/22 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> a0b121bfc5fa
Step 4/22 : RUN git -C /home/opam/opam-repository fetch origin &&     git -C /home/opam/opam-repository reset 818ebb219 --hard &&     opam update -u
 ---> Using cache
 ---> 78c138e3773a
Step 5/22 : RUN opam install alcotest lwt conf-libev inotify tls
 ---> Running in 7c45bec56d84
The following actions will be performed:
  - install   ppx_traverse_builtins   v0.10.0    [required by ppx_core, ppx_metaquot] 
  - install   conf-gmp                1          [required by zarith]                 
  - install   mirage-no-xen           1          [required by nocrypto]               
  - install   mirage-no-solo5         1          [required by nocrypto]               
  - install   astring                 0.8.3      [required by alcotest]               
  - install   cmdliner                1.0.2      [required by alcotest]               
  - install   conf-perl               1          [required by zarith]                 
  - install   base-bytes              base       [required by inotify]                
  - install   ppx_tools               5.0+4.05.0 [required by ppx_deriving]           
  - install   ocaml-compiler-libs     v0.10.0    [required by ppx_core]               
  - install   ocaml-migrate-parsetree 1.0.10     [required by ppx_cstruct]            
  - install   ppx_derivers            1.0        [required by ppx_deriving]           
  - install   conf-libev              4-11                                            
  - install   base-num                base       [required by num]                    
  - install   ptime                   0.8.3      [required by tls]                    
  - install   ocb-stubblr             0.1.1      [required by nocrypto]               
  - install   fmt                     0.8.5      [required by alcotest]               
  - recompile uutf                    1.0.1      [uses cmdliner]                      
  - install   zarith                  1.7        [required by nocrypto]               
  - install   cppo                    1.6.4      [required by lwt]                    
  - install   ppx_tools_versioned     5.1        [required by ppx_cstruct]            
  - install   ppx_ast                 v0.10.0    [required by ppx_core]               
  - install   num                     0          [required by sexplib]                
  - install   cpuid                   0.1.1      [required by nocrypto]               
  - install   alcotest                0.8.3                                           
  - recompile jsonm                   1.0.1      [uses uutf]                          
  - install   lwt                     4.0.1                                           For the PPX, please install package lwt_ppx
                                                                                      For Lwt_log and Lwt_daemon, please install package lwt_log
  - install   cppo_ocamlbuild         1.6.0      [required by ppx_deriving]           
  - install   sexplib                 v0.10.0    [required by tls]                    
  - install   inotify                 2.3                                             
  - install   ppx_deriving            4.2.1      [required by tls]                    
  - install   cstruct                 3.2.1      [required by tls]                    
  - install   base                    v0.10.0    [required by ppx_core]               
  - install   ppx_cstruct             3.2.1      [required by tls]                    
  - install   cstruct-lwt             3.2.1      [required by nocrypto]               
  - install   asn1-combinators        0.2.0      [required by x509]                   
  - install   stdio                   v0.10.0    [required by ppx_core]               
  - install   ppx_core                v0.10.0    [required by ppx_sexp_conv]          
  - install   ppx_optcomp             v0.10.0    [required by ppx_driver]             
  - install   ppx_driver              v0.10.4    [required by ppx_sexp_conv]          
  - install   ppx_metaquot            v0.10.0    [required by ppx_sexp_conv]          
  - install   ppx_type_conv           v0.10.0    [required by ppx_sexp_conv]          
  - install   ppx_sexp_conv           v0.10.0    [required by tls]                    
  - install   nocrypto                0.5.4      [required by tls]                    
  - install   x509                    0.6.1      [required by tls]                    
  - install   tls                     0.9.1                                           
===== 44 to install | 2 to recompile =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[astring.0.8.3] downloaded from http://erratique.ch/software/astring/releases/astring-0.8.3.tbz
[base.v0.10.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.10/files/base-v0.10.0.tar.gz
[alcotest.0.8.3] downloaded from https://github.com/mirage/alcotest/releases/download/0.8.3/alcotest-0.8.3.tbz
[cmdliner.1.0.2] downloaded from http://erratique.ch/software/cmdliner/releases/cmdliner-1.0.2.tbz
[asn1-combinators.0.2.0] downloaded from https://github.com/mirleft/ocaml-asn1-combinators/releases/download/v0.2.0/asn1-combinators-0.2.0.tbz
[cppo.1.6.4] downloaded from https://github.com/mjambon/cppo/archive/v1.6.4.tar.gz
[cppo_ocamlbuild.1.6.0] downloaded from https://github.com/mjambon/cppo/archive/v1.6.0.tar.gz
[cpuid.0.1.1] downloaded from https://github.com/pqwy/cpuid/releases/download/v0.1.1/cpuid-0.1.1.tbz
[fmt.0.8.5] downloaded from http://erratique.ch/software/fmt/releases/fmt-0.8.5.tbz
[inotify.2.3] downloaded from https://github.com/whitequark/ocaml-inotify/archive/v2.3.tar.gz
[jsonm.1.0.1] found in cache
[cstruct.3.2.1] downloaded from https://github.com/mirage/ocaml-cstruct/releases/download/v3.2.1/cstruct-3.2.1.tbz
[cstruct-lwt.3.2.1] downloaded from https://github.com/mirage/ocaml-cstruct/releases/download/v3.2.1/cstruct-3.2.1.tbz
[ocaml-compiler-libs.v0.10.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.10/files/ocaml-compiler-libs-v0.10.0.tar.gz
[lwt.4.0.1] downloaded from https://github.com/ocsigen/lwt/archive/4.0.1.tar.gz
[ocaml-migrate-parsetree.1.0.10] downloaded from https://github.com/ocaml-ppx/ocaml-migrate-parsetree/archive/v1.0.10.tar.gz
[ocb-stubblr.0.1.1] downloaded from https://github.com/pqwy/ocb-stubblr/releases/download/v0.1.1/ocb-stubblr-0.1.1.tbz
[ppx_ast.v0.10.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.10/files/ppx_ast-v0.10.0.tar.gz
[ppx_cstruct.3.2.1] found in cache
[ppx_core.v0.10.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.10/files/ppx_core-v0.10.0.tar.gz
[nocrypto.0.5.4] downloaded from https://github.com/mirleft/ocaml-nocrypto/releases/download/v0.5.4/nocrypto-0.5.4.tbz
[ppx_derivers.1.0] downloaded from https://github.com/diml/ppx_derivers/archive/1.0.tar.gz
[ppx_deriving.4.2.1] downloaded from https://github.com/ocaml-ppx/ppx_deriving/archive/v4.2.1.tar.gz
[ppx_metaquot.v0.10.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.10/files/ppx_metaquot-v0.10.0.tar.gz
[ppx_optcomp.v0.10.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.10/files/ppx_optcomp-v0.10.0.tar.gz
[ppx_driver.v0.10.4] downloaded from https://github.com/janestreet/ppx_driver/archive/v0.10.4.tar.gz
[ppx_sexp_conv.v0.10.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.10/files/ppx_sexp_conv-v0.10.0.tar.gz
[ppx_traverse_builtins.v0.10.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.10/files/ppx_traverse_builtins-v0.10.0.tar.gz
[ppx_tools.5.0+4.05.0] downloaded from https://github.com/ocaml-ppx/ppx_tools/archive/5.0+4.05.0.tar.gz
[ptime.0.8.3] downloaded from http://erratique.ch/software/ptime/releases/ptime-0.8.3.tbz
[ppx_type_conv.v0.10.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.10/files/ppx_type_conv-v0.10.0.tar.gz
[ppx_tools_versioned.5.1] downloaded from https://github.com/ocaml-ppx/ppx_tools_versioned/archive/5.1.tar.gz
[stdio.v0.10.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.10/files/stdio-v0.10.0.tar.gz
[sexplib.v0.10.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.10/files/sexplib-v0.10.0.tar.gz
[uutf.1.0.1] found in cache
[zarith.1.7] downloaded from https://github.com/ocaml/Zarith/archive/release-1.7.tar.gz
[x509.0.6.1] downloaded from https://github.com/mirleft/ocaml-x509/releases/download/0.6.1/x509-0.6.1.tbz
[tls.0.9.1] downloaded from https://github.com/mirleft/ocaml-tls/releases/download/0.9.1/tls-0.9.1.tbz

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> removed   jsonm.1.0.1
-> removed   uutf.1.0.1
-> installed astring.0.8.3
-> installed base-bytes.base
-> installed base-num.base
-> installed cmdliner.1.0.2
-> installed conf-gmp.1
-> installed conf-libev.4-11
-> installed conf-perl.1
-> installed cppo.1.6.4
-> installed cppo_ocamlbuild.1.6.0
-> installed fmt.0.8.5
-> installed alcotest.0.8.3
-> installed lwt.4.0.1
-> installed inotify.2.3
-> installed mirage-no-solo5.1
-> installed mirage-no-xen.1
-> installed num.0
-> installed ocaml-compiler-libs.v0.10.0
-> installed ocaml-migrate-parsetree.1.0.10
-> installed ocb-stubblr.0.1.1
-> installed cpuid.0.1.1
-> installed ppx_ast.v0.10.0
-> installed ppx_derivers.1.0
-> installed ppx_tools.5.0+4.05.0
-> installed ppx_deriving.4.2.1
-> installed ppx_tools_versioned.5.1
-> installed ppx_traverse_builtins.v0.10.0
-> installed ptime.0.8.3
-> installed sexplib.v0.10.0
-> installed base.v0.10.0
-> installed cstruct.3.2.1
-> installed cstruct-lwt.3.2.1
-> installed ppx_cstruct.3.2.1
-> installed stdio.v0.10.0
-> installed ppx_core.v0.10.0
-> installed ppx_optcomp.v0.10.0
-> installed ppx_driver.v0.10.4
-> installed ppx_metaquot.v0.10.0
-> installed ppx_type_conv.v0.10.0
-> installed ppx_sexp_conv.v0.10.0
-> installed uutf.1.0.1
-> installed jsonm.1.0.1
-> installed zarith.1.7
-> installed asn1-combinators.0.2.0
-> installed nocrypto.0.5.4
-> installed x509.0.6.1
-> installed tls.0.9.1
Done.

=-=- lwt.4.0.1 installed successfully -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
=> Lwt 4.0.0 has made some breaking changes. See
     https://github.com/ocsigen/lwt/issues/453
# Run eval $(opam env) to update the current shell environment
 ---> 03c434ef0722
Removing intermediate container 7c45bec56d84
Step 6/22 : COPY check-libev.ml /tmp/check-libev.ml
 ---> 5dc3bf7790ef
Removing intermediate container 8fbac9b68373
Step 7/22 : RUN opam config exec -- ocaml /tmp/check-libev.ml
 ---> Running in 15e4809c1890
 ---> d426da4fe448
Removing intermediate container 15e4809c1890
Step 8/22 : COPY *.opam /home/opam/src/datakit/
 ---> 5258202752b4
Removing intermediate container d78b7b895f93
Step 9/22 : RUN opam pin add /home/opam/src/datakit/ -n
 ---> Running in e58cca920f0b
This will pin the following packages: datakit, datakit-server, datakit-server-9p, datakit-github, datakit-client, datakit-client-git, datakit-client-9p, datakit-ci, datakit-bridge-local-git, datakit-bridge-github. Continue ? [Y/n] y
[datakit.0.12.0: rsync]
[datakit.0.12.0] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/sources/datakit/datakit.opam from 1.2 to 2.0~beta5
[0mdatakit is now pinned to file:///home/opam/src/datakit (version 0.12.0)
[datakit-server.0.12.0: rsync]
[datakit-server.0.12.0] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/sources/datakit-server/datakit-server.opam from 1.2 to 2.0~beta5
[0mdatakit-server is now pinned to file:///home/opam/src/datakit (version 0.12.0)
[datakit-server-9p.0.12.0: rsync]
[datakit-server-9p.0.12.0] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/sources/datakit-server-9p/datakit-server-9p.opam from 1.2 to 2.0~beta5
[0mdatakit-server-9p is now pinned to file:///home/opam/src/datakit (version 0.12.0)
[datakit-github.0.12.0: rsync]
[datakit-github.0.12.0] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/sources/datakit-github/datakit-github.opam from 1.2 to 2.0~beta5
[0mdatakit-github is now pinned to file:///home/opam/src/datakit (version 0.12.0)
[datakit-client.0.12.0: rsync]
[datakit-client.0.12.0] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/sources/datakit-client/datakit-client.opam from 1.2 to 2.0~beta5
[0mdatakit-client is now pinned to file:///home/opam/src/datakit (version 0.12.0)
[datakit-client-git.0.12.0: rsync]
[datakit-client-git.0.12.0] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/sources/datakit-client-git/datakit-client-git.opam from 1.2 to 2.0~beta5
[0mdatakit-client-git is now pinned to file:///home/opam/src/datakit (version 0.12.0)
[datakit-client-9p.0.12.0: rsync]
[datakit-client-9p.0.12.0] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/sources/datakit-client-9p/datakit-client-9p.opam from 1.2 to 2.0~beta5
[0mdatakit-client-9p is now pinned to file:///home/opam/src/datakit (version 0.12.0)
[datakit-ci.0.12.1: rsync]
[datakit-ci.0.12.1] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/sources/datakit-ci/datakit-ci.opam from 1.2 to 2.0~beta5
[0mdatakit-ci is now pinned to file:///home/opam/src/datakit (version 0.12.1)
[datakit-bridge-local-git.0.12.0: rsync]
[datakit-bridge-local-git.0.12.0] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/sources/datakit-bridge-local-git/datakit-bridge-local-git.opam from 1.2 to 2.0~beta5
[0mdatakit-bridge-local-git is now pinned to file:///home/opam/src/datakit (version 0.12.0)
[datakit-bridge-github.0.12.0: rsync]
[datakit-bridge-github.0.12.0] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/sources/datakit-bridge-github/datakit-bridge-github.opam from 1.2 to 2.0~beta5
[0mdatakit-bridge-github is now pinned to file:///home/opam/src/datakit (version 0.12.0)
 ---> 8db39c6f652a
Removing intermediate container e58cca920f0b
Step 10/22 : RUN opam install datakit-bridge-github --deps -t
 ---> Running in 4d750f2efecb

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-bridge-github.0.12.0] no changes from file:///home/opam/src/datakit

The following actions will be performed:
  - downgrade lwt                4.0.1 to 3.3.0                               For the PPX, please install package lwt_ppx
                                                                              For Lwt_log and Lwt_daemon, please install package lwt_log
  - install   re                 1.7.3                                        
  - install   fieldslib          v0.10.0                                      
  - install   camomile           1.0.1                                        
  - install   rresult            0.5.0                                        
  - install   mirage-flow        1.3.0          [required by mirage-flow-lwt] 
  - install   react              1.2.1                                        
  - install   ipaddr             2.8.0                                        
  - install   mirage-device      1.1.0          [required by mirage-clock]    
  - install   mtime              1.1.0                                        
  - install   stringext          1.5.0                                        
  - install   menhir             20171222                                     
  - install   magic-mime         1.1.0                                        
  - install   win-error          0.2                                          
  - install   decompress         0.7                                          
  - install   fpath              0.7.2                                        
  - install   ocamlgraph         1.8.8                                        
  - install   asetmap            0.8.1                                        
  - install   ocplib-endian      1.0                                          
  - install   hex                1.2.0                                        
  - install   easy-format        1.3.1                                        
  - install   duration           0.1.1                                        
  - install   conf-which         1                                            
  - install   configurator       v0.10.0                                      
  - install   mstruct            1.4.0                                        
  - install   base64             2.2.0                                        
  - install   named-pipe         0.4.0                                        
  - install   logs               0.6.2          [required by mirage-flow-lwt] 
  - install   datakit-client     0.12.0*                                      
  - recompile inotify            2.3            [uses lwt]                    
  - recompile cstruct-lwt        3.2.1          [uses lwt]                    
  - install   ppx_fields_conv    v0.10.0                                      
  - install   mirage-channel     3.1.0                                        
  - install   zed                1.6                                          
  - install   lwt_react          1.1.1                                        
  - install   mirage-time        1.1.0                                        
  - install   mirage-kv          1.1.1          [required by mirage-kv-lwt]   
  - install   mirage-clock       1.3.0          [required by tls]             
  - install   uri                1.9.6                                        
  - install   prometheus         0.5                                          
  - install   atd                1.12.0                                       
  - install   biniou             1.2.0                                        
  - install   io-page            2.0.1                                        
  - install   win-eventlog       0.1                                          
  - install   datakit-server     0.12.0*                                      
  - install   bos                0.2.0                                        
  - install   asl                0.11                                         
  - install   irmin-watcher      0.3.0                                        
  - recompile nocrypto           0.5.4          [uses lwt]                    
  - install   lambda-term        1.12.0                                       
  - install   mirage-time-lwt    1.1.0                                        
  - install   mirage-kv-lwt      1.1.0          [required by tls]             
  - install   mirage-flow-lwt    1.4.0          [required by tls]             
  - install   irmin              1.3.2                                        
  - install   git                1.11.5                                       
  - install   conduit            1.1.0                                        
  - install   cohttp             1.1.0                                        
  - install   yojson             1.4.1                                        
  - install   io-page-unix       2.0.1                                        
  - recompile x509               0.6.1          [uses nocrypto]               
  - install   mirage-channel-lwt 3.1.0                                        
  - install   hvsock             1.0.1                                        
  - install   irmin-mem          1.3.0                                        
  - install   irmin-git          1.3.0                                        
  - install   conduit-lwt        1.1.0                                        
  - install   cohttp-lwt         1.0.2                                        
  - install   atdgen             1.12.0                                       
  - recompile tls                0.9.1          [uses lwt]                    
  - install   protocol-9p        0.12.0                                       
  - install   git-http           1.11.4                                       
  - install   github             3.1.0                                        
  - install   conduit-lwt-unix   1.1.0                                        
  - install   protocol-9p-unix   0.12.0                                       
  - install   datakit-server-9p  0.12.0*                                      
  - install   github-hooks       0.3.0                                        
  - install   cohttp-lwt-unix    1.0.2                                        
  - install   datakit-client-9p  0.12.0*                                      
  - install   prometheus-app     0.5                                          
  - install   github-unix        3.1.0                                        
  - install   git-unix           1.11.5                                       
  - install   datakit            0.12.0*                                      
  - install   github-hooks-unix  0.2.0                                        
  - install   datakit-client-git 0.12.0*                                      
  - install   datakit-github     0.12.0*                                      
===== 78 to install | 5 to recompile | 1 to downgrade =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[asetmap.0.8.1] downloaded from http://erratique.ch/software/asetmap/releases/asetmap-0.8.1.tbz
[asl.0.11] downloaded from https://github.com/mirage/ocaml-asl/releases/download/0.11/asl-0.11.tbz
[atd.1.12.0] downloaded from https://github.com/mjambon/atd/archive/v1.12.0.tar.gz
[atdgen.1.12.0] downloaded from https://github.com/mjambon/atd/archive/v1.12.0.tar.gz
[bos.0.2.0] downloaded from http://erratique.ch/software/bos/releases/bos-0.2.0.tbz
[base64.2.2.0] downloaded from https://github.com/mirage/ocaml-base64/releases/download/v2.2.0/base64-2.2.0.tbz
[biniou.1.2.0] downloaded from https://github.com/mjambon/biniou/archive/v1.2.0.tar.gz
[cohttp.1.1.0] downloaded from https://github.com/mirage/ocaml-cohttp/releases/download/v1.1.0/cohttp-1.1.0.tbz
[cohttp-lwt.1.0.2] downloaded from https://github.com/mirage/ocaml-cohttp/releases/download/v1.0.2/cohttp-1.0.2.tbz
[cohttp-lwt-unix.1.0.2] downloaded from https://github.com/mirage/ocaml-cohttp/releases/download/v1.0.2/cohttp-1.0.2.tbz
[conduit.1.1.0] downloaded from https://github.com/mirage/ocaml-conduit/releases/download/v1.1.0/conduit-1.1.0.tbz
[conduit-lwt-unix.1.1.0] found in cache
[camomile.1.0.1] downloaded from https://github.com/yoriyuki/Camomile/releases/download/1.0.1/camomile-1.0.1.tbz
[configurator.v0.10.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.10/files/configurator-v0.10.0.tar.gz
[cstruct-lwt.3.2.1] found in cache
[conduit-lwt.1.1.0] downloaded from https://github.com/mirage/ocaml-conduit/releases/download/v1.1.0/conduit-1.1.0.tbz
[decompress.0.7] downloaded from https://github.com/mirage/decompress/releases/download/v0.7/decompress-0.7.tbz
[duration.0.1.1] downloaded from https://github.com/hannesm/duration/releases/download/0.1.1/duration-0.1.1.tbz
[fpath.0.7.2] downloaded from http://erratique.ch/software/fpath/releases/fpath-0.7.2.tbz
[fieldslib.v0.10.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.10/files/fieldslib-v0.10.0.tar.gz
[easy-format.1.3.1] downloaded from https://github.com/mjambon/easy-format/archive/v1.3.1.tar.gz
[git.1.11.5] downloaded from https://github.com/mirage/ocaml-git/releases/download/1.11.5/git-1.11.5.tbz
[git-http.1.11.4] downloaded from https://github.com/mirage/ocaml-git/releases/download/1.11.4/git-1.11.4.tbz
[git-unix.1.11.5] downloaded from https://github.com/mirage/ocaml-git/releases/download/1.11.5/git-1.11.5.tbz
[github-hooks.0.3.0] downloaded from https://github.com/dsheets/ocaml-github-hooks/releases/download/0.3.0/github-hooks-0.3.0.tbz
[github.3.1.0] downloaded from https://github.com/mirage/ocaml-github/releases/download/3.1.0/github-3.1.0.tbz
[github-hooks-unix.0.2.0] downloaded from https://github.com/dsheets/ocaml-github-hooks/releases/download/0.2.0/github-hooks-0.2.0.tbz
[github-unix.3.1.0] found in cache
[inotify.2.3] found in cache
[hex.1.2.0] downloaded from https://github.com/mirage/ocaml-hex/releases/download/v1.2.0/hex-1.2.0.tbz
[io-page.2.0.1] downloaded from https://github.com/mirage/io-page/releases/download/2.0.1/io-page-2.0.1.tbz
[hvsock.1.0.1] downloaded from https://github.com/mirage/ocaml-hvsock/releases/download/1.0.1/hvsock-1.0.1.tbz
[io-page-unix.2.0.1] downloaded from https://github.com/mirage/io-page/releases/download/2.0.1/io-page-2.0.1.tbz
[ipaddr.2.8.0] downloaded from https://github.com/mirage/ocaml-ipaddr/releases/download/2.8.0/ipaddr-2.8.0.tbz
[irmin.1.3.2] downloaded from https://github.com/mirage/irmin/releases/download/1.3.2/irmin-1.3.2.tbz
[irmin-git.1.3.0] downloaded from https://github.com/mirage/irmin/releases/download/1.3.0/irmin-1.3.0.tbz
[irmin-watcher.0.3.0] downloaded from https://github.com/mirage/irmin-watcher/releases/download/0.3.0/irmin-watcher-0.3.0.tbz
[logs.0.6.2] downloaded from http://erratique.ch/software/logs/releases/logs-0.6.2.tbz
[irmin-mem.1.3.0] downloaded from https://github.com/mirage/irmin/releases/download/1.3.0/irmin-1.3.0.tbz
[lambda-term.1.12.0] downloaded from https://github.com/diml/lambda-term/releases/download/1.12.0/lambda-term-1.12.0.tbz
[lwt.3.3.0] downloaded from https://github.com/ocsigen/lwt/archive/3.3.0.tar.gz
[lwt_react.1.1.1] downloaded from https://github.com/ocsigen/lwt/archive/4.0.0.tar.gz
[menhir.20171222] downloaded from http://gallium.inria.fr/~fpottier/menhir/menhir-20171222.tar.gz
[magic-mime.1.1.0] downloaded from https://github.com/mirage/ocaml-magic-mime/releases/download/v1.1.0/magic-mime-1.1.0.tbz
[mirage-channel.3.1.0] downloaded from https://github.com/mirage/mirage-channel/releases/download/v3.1.0/mirage-channel-3.1.0.tbz
[mirage-channel-lwt.3.1.0] downloaded from https://github.com/mirage/mirage-channel/releases/download/v3.1.0/mirage-channel-3.1.0.tbz
[mirage-clock.1.3.0] downloaded from https://github.com/mirage/mirage-clock/releases/download/v1.3.0/mirage-clock-1.3.0.tbz
[mirage-device.1.1.0] downloaded from https://github.com/mirage/mirage-device/releases/download/v1.1.0/mirage-device-1.1.0.tbz
[mirage-flow.1.3.0] downloaded from https://github.com/mirage/mirage-flow/releases/download/v1.3.0/mirage-flow-1.3.0.tbz
[mirage-flow-lwt.1.4.0] downloaded from https://github.com/mirage/mirage-flow/releases/download/v1.4.0/mirage-flow-1.4.0.tbz
[mirage-kv.1.1.1] downloaded from https://github.com/mirage/mirage-kv/releases/download/v1.1.1/mirage-kv-1.1.1.tbz
[mirage-kv-lwt.1.1.0] downloaded from https://github.com/mirage/mirage-kv/releases/download/v1.1.0/mirage-kv-1.1.0.tbz
[mirage-time-lwt.1.1.0] downloaded from https://github.com/mirage/mirage-time/releases/download/v1.1.0/mirage-time-1.1.0.tbz
[mtime.1.1.0] downloaded from http://erratique.ch/software/mtime/releases/mtime-1.1.0.tbz
[mstruct.1.4.0] downloaded from https://github.com/mirage/ocaml-mstruct/releases/download/v1.4.0/mstruct-1.4.0.tbz
[mirage-time.1.1.0] downloaded from https://github.com/mirage/mirage-time/releases/download/v1.1.0/mirage-time-1.1.0.tbz
[nocrypto.0.5.4] found in cache
[ocamlgraph.1.8.8] downloaded from http://ocamlgraph.lri.fr/download/ocamlgraph-1.8.8.tar.gz
[named-pipe.0.4.0] downloaded from https://github.com/mirage/ocaml-named-pipe/releases/download/0.4.0/named-pipe-0.4.0.tbz
[ppx_fields_conv.v0.10.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.10/files/ppx_fields_conv-v0.10.0.tar.gz
[prometheus.0.5] downloaded from https://github.com/mirage/prometheus/releases/download/v0.5/prometheus-0.5.tbz
[prometheus-app.0.5] downloaded from https://github.com/mirage/prometheus/releases/download/v0.5/prometheus-0.5.tbz
[ocplib-endian.1.0] downloaded from https://github.com/OCamlPro/ocplib-endian/archive/1.0.tar.gz
[protocol-9p.0.12.0] downloaded from https://github.com/mirage/ocaml-9p/releases/download/v0.12.0/protocol-9p-0.12.0.tbz
[protocol-9p-unix.0.12.0] downloaded from https://github.com/mirage/ocaml-9p/releases/download/v0.12.0/protocol-9p-0.12.0.tbz
[react.1.2.1] downloaded from http://erratique.ch/software/react/releases/react-1.2.1.tbz
[rresult.0.5.0] downloaded from http://erratique.ch/software/rresult/releases/rresult-0.5.0.tbz
[tls.0.9.1] found in cache
[re.1.7.3] downloaded from https://github.com/ocaml/ocaml-re/releases/download/1.7.3/re-1.7.3.tbz
[stringext.1.5.0] downloaded from https://github.com/rgrinberg/stringext/archive/1.5.0.zip
[uri.1.9.6] downloaded from https://github.com/mirage/ocaml-uri/releases/download/v1.9.6/uri-1.9.6.tbz
[x509.0.6.1] found in cache
[win-error.0.2] downloaded from https://github.com/djs55/ocaml-win-error/archive/v0.2.tar.gz
[win-eventlog.0.1] downloaded from https://github.com/djs55/ocaml-win-eventlog/archive/v0.1.tar.gz
[yojson.1.4.1] downloaded from https://github.com/mjambon/yojson/archive/v1.4.1.tar.gz
[zed.1.6] downloaded from https://github.com/diml/zed/releases/download/1.6/zed-1.6.tbz

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> removed   inotify.2.3
-> removed   tls.0.9.1
-> removed   x509.0.6.1
-> removed   nocrypto.0.5.4
-> removed   cstruct-lwt.3.2.1
-> removed   lwt.4.0.1
-> installed asetmap.0.8.1
-> installed base64.2.2.0
-> installed camomile.1.0.1
-> installed conf-which.1
-> installed configurator.v0.10.0
-> installed decompress.0.7
-> installed duration.0.1.1
-> installed easy-format.1.3.1
-> installed biniou.1.2.0
-> installed fieldslib.v0.10.0
-> installed fpath.0.7.2
-> installed hex.1.2.0
-> installed io-page.2.0.1
-> installed io-page-unix.2.0.1
-> installed ipaddr.2.8.0
-> installed lwt.3.3.0
-> installed cstruct-lwt.3.2.1
-> installed datakit-client.0.12.0
-> installed inotify.2.3
-> installed logs.0.6.2
-> installed asl.0.11
-> installed irmin-watcher.0.3.0
-> installed magic-mime.1.1.0
-> installed menhir.20171222
-> installed atd.1.12.0
-> installed mirage-device.1.1.0
-> installed mirage-clock.1.3.0
-> installed mirage-flow.1.3.0
-> installed mirage-channel.3.1.0
-> installed mirage-flow-lwt.1.4.0
-> installed mirage-channel-lwt.3.1.0
-> installed mirage-kv.1.1.1
-> installed mirage-kv-lwt.1.1.0
-> installed mirage-time.1.1.0
-> installed mirage-time-lwt.1.1.0
-> installed mstruct.1.4.0
-> installed mtime.1.1.0
-> installed named-pipe.0.4.0
-> installed nocrypto.0.5.4
-> installed ocamlgraph.1.8.8
-> installed ocplib-endian.1.0
-> installed ppx_fields_conv.v0.10.0
-> installed re.1.7.3
-> installed prometheus.0.5
-> installed react.1.2.1
-> installed lwt_react.1.1.1
-> installed rresult.0.5.0
-> installed bos.0.2.0
-> installed datakit-server.0.12.0
-> installed hvsock.1.0.1
-> installed stringext.1.5.0
-> installed uri.1.9.6
-> installed cohttp.1.1.0
-> installed cohttp-lwt.1.0.2
-> installed conduit.1.1.0
-> installed conduit-lwt.1.1.0
-> installed git.1.11.5
-> installed git-http.1.11.4
-> installed irmin.1.3.2
-> installed irmin-git.1.3.0
-> installed irmin-mem.1.3.0
-> installed win-error.0.2
-> installed protocol-9p.0.12.0
-> installed datakit-server-9p.0.12.0
-> installed protocol-9p-unix.0.12.0
-> installed datakit-client-9p.0.12.0
-> installed win-eventlog.0.1
-> installed x509.0.6.1
-> installed tls.0.9.1
-> installed conduit-lwt-unix.1.1.0
-> installed cohttp-lwt-unix.1.0.2
-> installed git-unix.1.11.5
-> installed datakit-client-git.0.12.0
-> installed datakit-github.0.12.0
-> installed prometheus-app.0.5
-> installed datakit.0.12.0
-> installed yojson.1.4.1
-> installed atdgen.1.12.0
-> installed github.3.1.0
-> installed github-hooks.0.3.0
-> installed zed.1.6
-> installed lambda-term.1.12.0
-> installed github-unix.3.1.0
-> installed github-hooks-unix.0.2.0
Done.
# Run eval $(opam env) to update the current shell environment
 ---> 0c8771da0397
Removing intermediate container 4d750f2efecb
Step 11/22 : COPY . /home/opam/src/datakit
 ---> c8d2d61cfb3a
Removing intermediate container 1a8544d2ca4e
Step 12/22 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in 13081afb1a4a
 ---> dea96dbbe2ce
Removing intermediate container 13081afb1a4a
Step 13/22 : RUN opam update --dev && opam upgrade
 ---> Running in c4e18d09b3cd

=-=- Synchronising development packages -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-bridge-github.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-bridge-local-git.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-ci.0.12.1] synchronised from file:///home/opam/src/datakit
[datakit-client.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-client-9p.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-client-git.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-github.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-server.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-server-9p.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit] Conflicting update of the metadata from file:///home/opam/src/datakit.
Override files in /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/overlay/datakit (there will be a backup) ? [Y/n] y
User metadata backed up in /home/opam/.opam/backup/datakit.bak
[datakit-bridge-github] Conflicting update of the metadata from file:///home/opam/src/datakit.
Override files in /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/overlay/datakit-bridge-github (there will be a backup) ? [Y/n] y
User metadata backed up in /home/opam/.opam/backup/datakit-bridge-github.bak
[datakit-bridge-local-git] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-ci] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-client] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-client-9p] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-client-git] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-github] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-server] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-server-9p] Installing new package description from upstream file:///home/opam/src/datakit
Now run 'opam upgrade' to apply any package updates.
The following actions will be performed:
  - recompile datakit-server     0.12.0* [upstream changes]
  - recompile datakit-client     0.12.0* [upstream changes]
  - recompile datakit-server-9p  0.12.0* [upstream changes]
  - recompile datakit-client-git 0.12.0* [upstream changes]
  - recompile datakit-client-9p  0.12.0* [upstream changes]
  - recompile datakit            0.12.0* [upstream changes]
  - recompile datakit-github     0.12.0* [upstream changes]
===== 7 to recompile =====

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> removed   datakit-github.0.12.0
-> removed   datakit-client-9p.0.12.0
-> removed   datakit-client-git.0.12.0
-> removed   datakit-client.0.12.0
-> removed   datakit.0.12.0
-> removed   datakit-server-9p.0.12.0
-> removed   datakit-server.0.12.0
-> installed datakit-client.0.12.0
-> installed datakit-client-9p.0.12.0
-> installed datakit-client-git.0.12.0
-> installed datakit-github.0.12.0
-> installed datakit-server.0.12.0
-> installed datakit-server-9p.0.12.0
-> installed datakit.0.12.0
Done.
# Run eval $(opam env) to update the current shell environment
 ---> 7249a9c931d5
Removing intermediate container c4e18d09b3cd
Step 14/22 : RUN opam install datakit-bridge-github -ytv
 ---> Running in c3561444e988

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/1: [datakit-bridge-github.0.12.0: rsync]
[datakit-bridge-github.0.12.0] no changes from file:///home/opam/src/datakit

The following actions will be performed:
  - install datakit-bridge-github 0.12.0* 

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/2: [datakit-bridge-github: jbuilder build]
+ /home/opam/.opam/ocaml-base-compiler.4.05.0/bin/jbuilder "build" "-p" "datakit-bridge-github" "-j" "1" (CWD=/home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/build/datakit-bridge-github.0.12.0)
Processing  1/2: [datakit-bridge-github: jbuilder runtest]
+ /home/opam/.opam/ocaml-base-compiler.4.05.0/bin/jbuilder "runtest" "tests/datakit-bridge-github" (CWD=/home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/build/datakit-bridge-github.0.12.0)
-         test alias tests/datakit-bridge-github/runtest
- /bin/sh: tput: not found
- stty: standard input: Not a tty
- Testing datakit-github.
- [33m ...[m                [36mgithub-9p[m          0   Transaction.[32m[OK][m                [36mgithub-9p[m          0   Transaction.
- [33m ...[m                [36mgithub-9p[m          1   Watch.[32m[OK][m                [36mgithub-9p[m          1   Watch.
- [33m ...[m                [36mgithub-9p[m          2   Make dirs.[32m[OK][m                [36mgithub-9p[m          2   Make dirs.
- [33m ...[m                [36mgithub-9p[m          3   Truncate.[32m[OK][m                [36mgithub-9p[m          3   Truncate.
- [33m ...[m                [36mgithub-9p[m          4   Parents.[32m[OK][m                [36mgithub-9p[m          4   Parents.
- [33m ...[m                [36mgithub-9p[m          5   Merge.[32m[OK][m                [36mgithub-9p[m          5   Merge.
- [33m ...[m                [36mgithub-9p[m          6   Diff.[32m[OK][m                [36mgithub-9p[m          6   Diff.
- [33m ...[m                [36mgithub-9p[m          7   Merge_metadata.[32m[OK][m                [36mgithub-9p[m          7   Merge_metadata.
- [33m ...[m                [36mgithub-9p[m          8   Merge empty.[32m[OK][m                [36mgithub-9p[m          8   Merge empty.
- [33m ...[m                [36mgithub-9p[m          9   Conflicts.[32m[OK][m                [36mgithub-9p[m          9   Conflicts.
- [33m ...[m                [36mgithub-9p[m         10   Large write.[32m[OK][m                [36mgithub-9p[m         10   Large write.
- [33m ...[m                [36mgithub-9p[m         11   Remove.[32m[OK][m                [36mgithub-9p[m         11   Remove.
- [33m ...[m                [36mgithub-9p[m         12   Remotes.[33m[SKIP][m              [36mgithub-9p[m         12   Remotes.
- [33m ...[m                [36mgithub-9p[m         13   Create_or_replace.[33m[SKIP][m              [36mgithub-9p[m         13   Create_or_replace.
- [33m ...[m                [36mgithub[m             0   basic-snapshot.[32m[OK][m                [36mgithub[m             0   basic-snapshot.
- [33m ...[m                [36mgithub[m             1   snapshot.[32m[OK][m                [36mgithub[m             1   snapshot.
- [33m ...[m                [36mgithub[m             2   capabilities.[32m[OK][m                [36mgithub[m             2   capabilities.
- [33m ...[m                [36mgithub[m             3   cleanup.[32m[OK][m                [36mgithub[m             3   cleanup.
- [33m ...[m                [36mgithub[m             4   events.[32m[OK][m                [36mgithub[m             4   events.
- [33m ...[m                [36mgithub[m             5   updates.[32m[OK][m                [36mgithub[m             5   updates.
- [33m ...[m                [36mgithub[m             6   startup.[32m[OK][m                [36mgithub[m             6   startup.
- [33m ...[m                [36mgithub[m             7   random-github.[32m[OK][m                [36mgithub[m             7   random-github.
- [33m ...[m                [36mgithub[m             8   random-github-*.[33m[SKIP][m              [36mgithub[m             8   random-github-*.
- [33m ...[m                [36mgithub[m             9   random-datakit.[32m[OK][m                [36mgithub[m             9   random-datakit.
- [33m ...[m                [36mgithub[m            10   random-datakit-*.[33m[SKIP][m              [36mgithub[m            10   random-datakit-*.
- The full test results are available in `_build/_tests`.
- [32mTest Successful[m in 3.756s. 21 tests run.
-> compiled  datakit-bridge-github.0.12.0
-> installed datakit-bridge-github.0.12.0
Done.
# Run eval $(opam env) to update the current shell environment
 ---> bb75e2bd9651
Removing intermediate container c3561444e988
Step 15/22 : RUN sudo cp $(opam config exec -- which datakit-bridge-github) /usr/bin/
 ---> Running in 00d1e1ada5fd
 ---> 7703b71ab666
Removing intermediate container 00d1e1ada5fd
Step 16/22 : FROM alpine:3.5
3.5: Pulling from library/alpine
Digest: sha256:9148d069e50eee519ec45e5683e56a1c217b61a52ed90eb77bdce674cc212f1e
Status: Image is up to date for alpine:3.5
 ---> 6c6084ed97e5
Step 17/22 : RUN apk add --no-cache libev gmp tzdata ca-certificates
 ---> Using cache
 ---> d1f6489c4cf7
Step 18/22 : EXPOSE 5640
 ---> Using cache
 ---> d0e9283b6cc0
Step 19/22 : EXPOSE 5641
 ---> Using cache
 ---> cb7f69e3f379
Step 20/22 : ENTRYPOINT /usr/bin/datakit-bridge-github
 ---> Using cache
 ---> 50f2c924d0d6
Step 21/22 : CMD --listen=tcp://0.0.0.0:5641 -v --datakit=tcp:127.0.0.1:5640
 ---> Using cache
 ---> 1e5540aa7dba
Step 22/22 : COPY --from=0 /usr/bin/datakit-bridge-github /usr/bin/datakit-bridge-github
 ---> 880bd684cbd2
Removing intermediate container c8e21d61fbc1
Successfully built 880bd684cbd2
[2018-04-24 16:21.30] Success
