=== Docker build Dockerfile.client
[2017-05-09 10:38.04] Starting...
Cloning into '/tmp/with_clone95ec539'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at 6c4e8ae client/server: split the libraires between core API and 9p transport
[2017-05-09 10:38.05] Rewrite Dockerfile's first line to:
FROM ocaml/opam:alpine_ocaml-4.03.0
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 6.073 MB
Step 1/15 : FROM ocaml/opam:alpine_ocaml-4.03.0
 ---> 1254c1838b00
Step 2/15 : RUN git -C /home/opam/opam-repository pull origin master && opam update
 ---> Using cache
 ---> dd028dbbb6ae
Step 3/15 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> 1050e9dec071
Step 4/15 : RUN opam depext -ui lwt alcotest conf-libev
 ---> Using cache
 ---> d78b6b010405
Step 5/15 : COPY datakit-client.opam /home/opam/src/datakit/datakit-client.opam
 ---> 2628bc68b8aa
Removing intermediate container 7abec9fa5d12
Step 6/15 : RUN opam pin add datakit-client.dev /home/opam/src/datakit -n
 ---> Running in 6b93aef775ca
datakit-client is now path-pinned to /home/opam/src/datakit

[datakit-client: local]
[datakit-client] /home/opam/src/datakit/ synchronized
[datakit-client] Installing new package description from /home/opam/src/datakit

 ---> 80c6dc99248f
Error removing intermediate container 6b93aef775ca: Driver aufs failed to remove root filesystem 6b93aef775ca8619c502ed48deb87b6795b6662ad056fb746d29b0357f03626f: rename /var/lib/docker/aufs/mnt/38022943a22203f97cc09ffbf04101f390f2268713d9c2a0e373ed800617af1c /var/lib/docker/aufs/mnt/38022943a22203f97cc09ffbf04101f390f2268713d9c2a0e373ed800617af1c-removing: device or resource busy
Step 7/15 : RUN opam depext datakit-client &&     opam install datakit-client --deps
 ---> Running in 4c0137a30f4e
# Detecting depexts using flags: x86_64 linux alpine
# The following system packages are needed:
#  - m4
m4
# All required OS packages found.

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
[datakit-client] /home/opam/src/datakit/ already up-to-date
The following actions will be performed:
  - install jbuilder                1.0+beta8
  - install ocplib-endian           1.0      
  - install sexplib                 v0.9.1   
  - install ocaml-migrate-parsetree 1.0      
  - install ppx_tools_versioned     5.0.1    
  - install cstruct                 2.4.1    
===== 6 to install =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[cstruct: http] Command started
[jbuilder: http] Command started
[ocaml-migrate-parsetree: http] Command started
[ocaml-migrate-parsetree: http] Command started
[ocaml-migrate-parsetree.1.0] https://github.com/let-def/ocaml-migrate-parsetree/archive/v1.0.tar.gz downloaded
[ocplib-endian: http] Command started
[jbuilder: http] Command started
[jbuilder.1.0+beta8] https://github.com/janestreet/jbuilder/archive/1.0+beta8.tar.gz downloaded
[ppx_tools_versioned: http] Command started
[cstruct: http] Command started
[cstruct.2.4.1] https://github.com/mirage/ocaml-cstruct/archive/v2.4.1.tar.gz downloaded
[sexplib: http] Command started
[ocplib-endian: http] Command started
[ocplib-endian.1.0] https://github.com/OCamlPro/ocplib-endian/archive/1.0.tar.gz downloaded
[ppx_tools_versioned: http] Command started
[ppx_tools_versioned.5.0.1] https://github.com/let-def/ppx_tools_versioned/archive/5.0.1.tar.gz downloaded
[sexplib: http] Command started
[sexplib.v0.9.1] https://github.com/janestreet/sexplib/archive/v0.9.1.tar.gz downloaded

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[jbuilder: ocaml bootstrap.ml] Command started
[ocplib-endian: ocaml setup.ml] Command started
[ocplib-endian: ocaml setup.ml] Command started
[jbuilder: ./boot.exe 4] Command started
[ocplib-endian: ocaml setup.ml] Command started
-> installed ocplib-endian.1.0
-> installed jbuilder.1.0+beta8
[ocaml-migrate-parsetree: jbuilder build] Command started
[sexplib: jbuilder build] Command started
-> installed sexplib.v0.9.1
-> installed ocaml-migrate-parsetree.1.0
[ppx_tools_versioned: make all] Command started
[ppx_tools_versioned: make install] Command started
-> installed ppx_tools_versioned.5.0.1
[cstruct: ./configure] Command started
[cstruct: make] Command started
[cstruct: make install] Command started
[cstruct: make js-install] Command started
-> installed cstruct.2.4.1
Done.
 ---> 2c0c0ac38092
Removing intermediate container 4c0137a30f4e
Error removing intermediate container 6b93aef775ca: No such container: 6b93aef775ca8619c502ed48deb87b6795b6662ad056fb746d29b0357f03626f
Step 8/15 : COPY . /home/opam/src/datakit
 ---> aea16122b1f9
Error removing intermediate container 6b93aef775ca: No such container: 6b93aef775ca8619c502ed48deb87b6795b6662ad056fb746d29b0357f03626f
Step 9/15 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in 1b3bfd025837
 ---> 4393b155e6b2
Error removing intermediate container 6b93aef775ca: No such container: 6b93aef775ca8619c502ed48deb87b6795b6662ad056fb746d29b0357f03626f
Step 10/15 : RUN cd /home/opam/src/datakit &&     scripts/watermark.sh &&     git status --porcelain
 ---> Running in 523f2fe17ccf
 M Dockerfile.client
 M src/version.ml
 ---> 7f1fe7725957
Error removing intermediate container 6b93aef775ca: No such container: 6b93aef775ca8619c502ed48deb87b6795b6662ad056fb746d29b0357f03626f
Step 11/15 : RUN opam update datakit-client
 ---> Running in e2db81ca7ff6

=-=- Synchronizing development packages -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
[datakit-client] /home/opam/src/datakit/ synchronized
 ---> ee02b1065eb5
Error removing intermediate container 6b93aef775ca: No such container: 6b93aef775ca8619c502ed48deb87b6795b6662ad056fb746d29b0357f03626f
Step 12/15 : RUN opam info datakit-client --raw
 ---> Running in 93f49314d5bc
opam-version: "1.2"
name: "datakit-client"
version: "dev"
maintainer: "thomas@gazagnaire.org"
authors: [
  "Thomas Leonard" "Magnus Skjegstad" "David Scott" "Thomas Gazagnaire"
]
homepage: "https://github.com/moby/datakit"
bug-reports: "https://github.com/moby/datakit/issues"
license: "Apache"
doc: "https://docker.github.io/datakit/"
dev-repo: "https://github.com/moby/datakit.git"
build: ["jbuilder" "build" "-p" name "-j" jobs]
depends: [
  "jbuilder" {build}
  "astring"
  "result"
  "fmt"
  "cstruct" {> "2.2.0"}
]
 ---> f8dedf546e8f
Error removing intermediate container 6b93aef775ca: No such container: 6b93aef775ca8619c502ed48deb87b6795b6662ad056fb746d29b0357f03626f
Step 13/15 : RUN opam install datakit-client.dev -vv
 ---> Running in ed83cedbd58d

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.03.0/packages.dev/datakit-client"
- sending incremental file list
- 
- sent 8,505 bytes  received 50 bytes  17,110.00 bytes/sec
- total size is 1,276,944  speedup is 149.26
[datakit-client] /home/opam/src/datakit/ already up-to-date
The following actions will be performed:
  - install datakit-client dev*

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.03.0/packages.dev/datakit-client"
- sending incremental file list
- 
- sent 8,505 bytes  received 50 bytes  17,110.00 bytes/sec
- total size is 1,276,944  speedup is 149.26
[datakit-client.dev] /home/opam/src/datakit/ already up-to-date

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: jbuilder build] Command started
+ jbuilder "build" "-p" "datakit-client" "-j" "4" (CWD=/home/opam/.opam/4.03.0/build/datakit-client.dev)
-     ocamldep api/ocaml/9p/mount/mount.depends.ocamldep-output
-     ocamldep api/ocaml/datakit_client.dependsi.ocamldep-output
-     ocamldep api/ocaml/datakit_client.depends.ocamldep-output
-       ocamlc api/ocaml/9p/mount/version.{cmi,cmo,cmt}
-       ocamlc api/ocaml/datakit_path.{cmi,cmti}
-       ocamlc api/ocaml/9p/mount/mount.{cmi,cmo,cmt}
-     ocamlopt api/ocaml/9p/mount/version.{cmx,o}
-       ocamlc api/ocaml/datakit_path.{cmo,cmt}
-     ocamlopt api/ocaml/datakit_path.{cmx,o}
-       ocamlc api/ocaml/datakit_S.{cmi,cmo,cmt}
-       ocamlc api/ocaml/datakit_client.cma
-     ocamlopt api/ocaml/9p/mount/mount.{cmx,o}
-     ocamlopt api/ocaml/datakit_S.{cmx,o}
-     ocamlopt api/ocaml/datakit_client.{a,cmxa}
-     ocamlopt api/ocaml/datakit_client.cmxs
-     ocamlopt api/ocaml/9p/mount/mount.exe
+ install "-m" "0755" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/bin/datakit-mount" "/home/opam/.opam/4.03.0/bin/datakit-mount"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/META" "/home/opam/.opam/4.03.0/lib/datakit-client/META"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/opam" "/home/opam/.opam/4.03.0/lib/datakit-client/opam"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_S.cmi" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_S.cmi"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_S.cmx" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_S.cmx"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_S.cmt" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_S.cmt"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_S.ml" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_S.ml"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.cmi" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_path.cmi"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.cmx" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_path.cmx"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.cmt" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_path.cmt"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.cmti" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_path.cmti"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.mli" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_path.mli"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.cma" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client.cma"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.cmxa" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client.cmxa"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.a" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client.a"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.cmxs" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client.cmxs"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/doc/datakit-client/README.md" "/home/opam/.opam/4.03.0/doc/datakit-client/README.md"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/doc/datakit-client/LICENSE.md" "/home/opam/.opam/4.03.0/doc/datakit-client/LICENSE.md"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/doc/datakit-client/CHANGES.md" "/home/opam/.opam/4.03.0/doc/datakit-client/CHANGES.md"
-> installed datakit-client.dev
Done.
 ---> d97e81e7ab0c
Removing intermediate container 1b3bfd025837
Removing intermediate container 523f2fe17ccf
Removing intermediate container e2db81ca7ff6
Removing intermediate container 93f49314d5bc
Removing intermediate container ed83cedbd58d
Error removing intermediate container 6b93aef775ca: No such container: 6b93aef775ca8619c502ed48deb87b6795b6662ad056fb746d29b0357f03626f
Step 14/15 : RUN sudo mkdir /data && sudo chown opam.nogroup /data && chmod 700 /data &&     sudo cp $(opam config exec -- which datakit-mount) /usr/bin/datakit-mount
 ---> Running in afa88dadc4bd
 ---> ff7a76cf7a10
Error removing intermediate container 6b93aef775ca: No such container: 6b93aef775ca8619c502ed48deb87b6795b6662ad056fb746d29b0357f03626f
Step 15/15 : CMD bash -c "/usr/bin/datakit-mount -h $(getent hosts datakit | awk '{print $1}')";     bash
 ---> Running in 62f2008d5774
 ---> 4a6ea759b166
Error removing intermediate container 6b93aef775ca: No such container: 6b93aef775ca8619c502ed48deb87b6795b6662ad056fb746d29b0357f03626f
Successfully built 4a6ea759b166
[2017-05-09 10:39.28] Success
