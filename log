=== Docker run test-datakit-ci
[2017-03-29 10:59.49] Starting...
[2017-03-29 10:59.49] Running "docker" "run" "--rm" "--entrypoint" "/bin/sh" "sha256:e4013fa69564fa7ef6d486617f058b72732cb1c17f07c9458eda34eddb54d969" "-c" "opam remove -y \"datakit-ci\" && opam depext -i -y \"conf-autoconf\" \"conf-libpcre\"&& opam install -y -t --deps-only \"datakit-ci\" && opam install -y -v -t \"datakit-ci\""
The following actions will be performed:
  - remove datakit-ci dev*

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> removed   datakit-ci.dev
Done.
# Run eval `opam env` to update the current shell environment
# Detecting depexts using flags: x86_64 linux alpine
# The following system packages are needed:
#  - autoconf
#  - pcre-dev
#  - pkgconfig
pcre-dev
pkgconf
# The following new OS packages need to be installed: autoconf
The following command needs to be run through "sudo":
    apk add autoconf
(1/1) Installing autoconf (2.69-r0)
Executing busybox-1.25.1-r0.trigger
OK: 612 MiB in 91 packages
# OS packages installation successful
# Now letting OPAM install the packages
The following actions will be performed:
  - install conf-which      1                                   [required by conf-autoconf]
  - install conf-pkg-config 1.0                                 [required by conf-libpcre]
  - install conf-autoconf   0.1
  - install conf-libpcre    1
===== 4 to install =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed conf-pkg-config.1.0
-> installed conf-libpcre.1
-> installed conf-which.1
-> installed conf-autoconf.0.1
Done.
# Run eval `opam env` to update the current shell environment

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-ci.dev] no changes from git+file:///home/opam/datakit#master
[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-ci/datakit-ci.opam from 1.2 to 2.0~beta

The following actions will be performed:
  - install asl            0.10
  - install win-eventlog   0.1
  - install camlzip        1.07
  - install irmin-watcher  0.2.0
  - install alcotest       0.7.2
  - install mtime          0.8.4
  - install mirage-flow    1.1.0
  - install datakit-server 0.9.0
  - install ocamlgraph     1.8.7
  - install bin_prot       113.33.00+4.03
  - install jsonm          0.9.1
  - install hex            1.0.0
  - install mstruct        1.3.2
  - install hvsock         0.10.0
  - install ezjsonm        0.4.3
  - install git            1.9.3
  - install mirage-tc      0.3.0
  - install git-unix       1.7.1
  - install irmin          0.12.0
  - install irmin-unix     0.12.0
  - install datakit        0.9.0
===== 21 to install =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[bin_prot.113.33.00+4.03] downloaded from https://ocaml.janestreet.com/ocaml-core/113.33/files/bin_prot-113.33.00+4.03.tar.gz
[asl.0.10] downloaded from https://github.com/mirage/ocaml-asl/archive/v0.10.tar.gz
[datakit.0.9.0] found in cache
[datakit-server.0.9.0] found in cache
[camlzip.1.07] downloaded from https://github.com/xavierleroy/camlzip/archive/rel107.zip
[ezjsonm.0.4.3] downloaded from https://github.com/mirage/ezjsonm/archive//0.4.3.tar.gz
[alcotest.0.7.2] downloaded from https://github.com/mirage/alcotest/releases/download/0.7.2/alcotest-0.7.2.tbz
[git.1.9.3] downloaded from https://github.com/mirage/ocaml-git/releases/download/1.9.3/git-1.9.3.tbz
[hex.1.0.0] downloaded from https://github.com/mirage/ocaml-hex/archive/1.0.0.tar.gz
[hvsock.0.10.0] downloaded from https://github.com/djs55/ocaml-hvsock/archive/v0.10.0.tar.gz
[irmin-watcher.0.2.0] downloaded from https://github.com/samoht/irmin-watcher/releases/download/0.2.0/irmin-watcher-0.2.0.tbz
[irmin.0.12.0] downloaded from https://github.com/mirage/irmin/releases/download/0.12.0/irmin-0.12.0.tbz
[jsonm.0.9.1] downloaded from http://erratique.ch/software/jsonm/releases/jsonm-0.9.1.tbz
[mirage-flow.1.1.0] downloaded from https://github.com/mirage/mirage-flow/archive/v1.1.0.tar.gz
[mtime.0.8.4] downloaded from http://erratique.ch/software/mtime/releases/mtime-0.8.4.tbz
[mirage-tc.0.3.0] downloaded from https://github.com/mirage/mirage-tc/archive//0.3.0.tar.gz
[mstruct.1.3.2] downloaded from https://github.com/mirage/ocaml-mstruct/archive/1.3.2.tar.gz
[win-eventlog.0.1] downloaded from https://github.com/djs55/ocaml-win-eventlog/archive/v0.1.tar.gz
[ocamlgraph.1.8.7] downloaded from http://ocamlgraph.lri.fr/download/ocamlgraph-1.8.7.tar.gz

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[ERROR] The compilation of camlzip failed at "make all".
-> installed alcotest.0.7.2
-> installed asl.0.10
-> installed bin_prot.113.33.00+4.03
-> installed datakit-server.0.9.0
-> installed hex.1.0.0
-> installed irmin-watcher.0.2.0
-> installed jsonm.0.9.1
-> installed ezjsonm.0.4.3
-> installed mirage-flow.1.1.0
-> installed hvsock.0.10.0
-> installed mstruct.1.3.2
-> installed mirage-tc.0.3.0
-> installed mtime.0.8.4
-> installed ocamlgraph.1.8.7
-> installed win-eventlog.0.1

#=== ERROR while compiling camlzip.1.07 =======================================#
# command              make all
# path                 /home/opam/.opam/default/.opam-switch/build/camlzip.1.07
# exit-code            2
# env-file             /home/opam/.opam/log/camlzip-82-87914c.env
# output-file          /home/opam/.opam/log/camlzip-82-87914c.out
### output ###
# ocamlc -g -safe-string -c -ccopt -g   zlibstubs.c
# zlibstubs.c:19:18: fatal error: zlib.h: No such file or directory
#  #include <zlib.h>
#                   ^
# compilation terminated.
# make: *** [Makefile:67: zlibstubs.o] Error 2



=-=- Error report -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
+- The following actions were aborted
| - install datakit    0.9.0
| - install git        1.9.3
| - install git-unix   1.7.1
| - install irmin      0.12.0
| - install irmin-unix 0.12.0
+- 
+- The following actions failed
| - build camlzip 1.07
+- 
+- The following changes have been performed
| - install alcotest       0.7.2
| - install asl            0.10
| - install bin_prot       113.33.00+4.03
| - install datakit-server 0.9.0
| - install ezjsonm        0.4.3
| - install hex            1.0.0
| - install hvsock         0.10.0
| - install irmin-watcher  0.2.0
| - install jsonm          0.9.1
| - install mirage-flow    1.1.0
| - install mirage-tc      0.3.0
| - install mstruct        1.3.2
| - install mtime          0.8.4
| - install ocamlgraph     1.8.7
| - install win-eventlog   0.1
+- 

=-=- camlzip.1.07 troubleshooting -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
=> This package relies on external (system) dependencies that may be missing. `opam depext camlzip.1.07' may help you find the correct installation for your system.
# Run eval `opam env` to update the current shell environment

The former state can be restored with:
    opam switch import "/home/opam/.opam/default/.opam-switch/backup/state-20170329110004.export"
[2017-03-29 11:01.19] Failed: Command "docker" "run" "--rm" "--entrypoint" "/bin/sh" "sha256:e4013fa69564fa7ef6d486617f058b72732cb1c17f07c9458eda34eddb54d969" "-c" "opam remove -y \"datakit-ci\" && opam depext -i -y \"conf-autoconf\" \"conf-libpcre\"&& opam install -y -t --deps-only \"datakit-ci\" && opam install -y -v -t \"datakit-ci\"" exited with status 4
