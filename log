=== Docker build Dockerfile.client
[2017-05-04 18:04.01] Starting...
Cloning into '/tmp/with_clone1ffd2151'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at 00f75dc dockerfile: use updated custom branch for protocol-9p
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 5.697 MB
Step 1/15 : FROM ocaml/opam:alpine
alpine: Pulling from ocaml/opam
Digest: sha256:08d1e426dd3a4261ee370557479695942b049d32ccc6dd6e1d8de71f5e7c1c6f
Status: Image is up to date for ocaml/opam:alpine
 ---> 766dbb0d4ff5
Step 2/15 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> dc470d727222
Step 3/15 : RUN cd /home/opam/opam-repository && git pull && opam update -y
 ---> Using cache
 ---> 08a615d526ea
Step 4/15 : RUN opam depext -ui lwt alcotest conf-libev
 ---> Using cache
 ---> b4e46ff6f255
Step 5/15 : COPY datakit-client.opam /home/opam/src/datakit/datakit-client.opam
 ---> Using cache
 ---> c7d207f6dde3
Step 6/15 : RUN opam pin add datakit-client.dev /home/opam/src/datakit -n
 ---> Using cache
 ---> e6860e64ecd5
Step 7/15 : RUN opam depext datakit-client &&     opam install datakit-client --deps
 ---> Using cache
 ---> 1631e89a6b40
Step 8/15 : COPY . /home/opam/src/datakit
 ---> 9ffcdfb61a99
Removing intermediate container f860c561640d
Step 9/15 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in c64d6d4a15ad
 ---> de3fda4d642a
Removing intermediate container c64d6d4a15ad
Step 10/15 : RUN cd /home/opam/src/datakit &&     scripts/watermark.sh &&     git status --porcelain
 ---> Running in 966a899ae653
 M src/version.ml
 ---> c6ba3b4f6619
Error removing intermediate container 966a899ae653: Driver aufs failed to remove root filesystem 966a899ae653fa27512343053205b321af5ba272325bbc6e28d445a87bddf937: rename /var/lib/docker/aufs/mnt/55f8869eb17d68659377a1e7e590db9ddc4b5f4e425bee6fc4875d350e745fb8 /var/lib/docker/aufs/mnt/55f8869eb17d68659377a1e7e590db9ddc4b5f4e425bee6fc4875d350e745fb8-removing: device or resource busy
Step 11/15 : RUN opam update datakit-client
 ---> Running in fabccb2d96bf

=-=- Synchronizing development packages -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
[datakit-client] /home/opam/src/datakit/ synchronized
 ---> be1d598aceb8
Error removing intermediate container 966a899ae653: No such container: 966a899ae653fa27512343053205b321af5ba272325bbc6e28d445a87bddf937
Step 12/15 : RUN opam info datakit-client --raw
 ---> Running in 967553461c08
opam-version: "1.2"
name: "datakit-client"
version: "dev"
maintainer: "thomas@gazagnaire.org"
authors: [
  "Thomas Leonard" "Magnus Skjegstad" "David Scott" "Thomas Gazagnaire"
]
homepage: "https://github.com/moby/datakit"
bug-reports: "https://github.com/moby/datakit/issues"
license: "Apache"
doc: "https://docker.github.io/datakit/"
dev-repo: "https://github.com/moby/datakit.git"
build: ["jbuilder" "build" "-p" name "-j" jobs]
depends: [
  "jbuilder" {build}
  "base-bytes"
  "astring"
  "logs"
  "uri"
  "rresult"
  "fmt"
  "cstruct" {> "2.2.0"}
  "protocol-9p-unix" {>= "0.10.0"}
  "cmdliner"
]
 ---> b2cf31325dcb
Error removing intermediate container 966a899ae653: No such container: 966a899ae653fa27512343053205b321af5ba272325bbc6e28d445a87bddf937
Step 13/15 : RUN opam install datakit-client.dev -vv
 ---> Running in af789dfbb6a5

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.04.1/packages.dev/datakit-client"
- sending incremental file list
- 
- sent 8,055 bytes  received 46 bytes  16,202.00 bytes/sec
- total size is 1,250,462  speedup is 154.36
[datakit-client] /home/opam/src/datakit/ already up-to-date
The following actions will be performed:
  - install datakit-client dev*

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.04.1/packages.dev/datakit-client"
- sending incremental file list
- 
- sent 8,055 bytes  received 46 bytes  16,202.00 bytes/sec
- total size is 1,250,462  speedup is 154.36
[datakit-client.dev] /home/opam/src/datakit/ already up-to-date

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: jbuilder build] Command started
+ jbuilder "build" "-p" "datakit-client" "-j" "4" (CWD=/home/opam/.opam/4.04.1/build/datakit-client.dev)
-     ocamldep api/ocaml/bin/mount.depends.ocamldep-output
-     ocamldep api/ocaml/datakit_client.dependsi.ocamldep-output
-     ocamldep api/ocaml/datakit_client.depends.ocamldep-output
-       ocamlc api/ocaml/bin/version.{cmi,cmo,cmt}
-       ocamlc api/ocaml/datakit_path.{cmi,cmti}
-     ocamlopt api/ocaml/bin/version.{cmx,o}
-       ocamlc api/ocaml/bin/mount.{cmi,cmo,cmt}
-       ocamlc api/ocaml/datakit_path.{cmo,cmt}
-       ocamlc api/ocaml/datakit_S.{cmi,cmo,cmt}
-     ocamlopt api/ocaml/datakit_path.{cmx,o}
-     ocamlopt api/ocaml/bin/mount.{cmx,o}
-       ocamlc api/ocaml/datakit_client_9p.{cmi,cmti}
-     ocamlopt api/ocaml/datakit_S.{cmx,o}
-       ocamlc api/ocaml/datakit_client_9p.{cmo,cmt}
-       ocamlc api/ocaml/datakit_client.cma
-     ocamlopt api/ocaml/bin/mount.exe
-     ocamlopt api/ocaml/datakit_client_9p.{cmx,o}
-     ocamlopt api/ocaml/datakit_client.{a,cmxa}
-     ocamlopt api/ocaml/datakit_client.cmxs
+ install "-m" "0755" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/install/default/bin/datakit-mount" "/home/opam/.opam/4.04.1/bin/datakit-mount"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/install/default/lib/datakit-client/META" "/home/opam/.opam/4.04.1/lib/datakit-client/META"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/install/default/lib/datakit-client/opam" "/home/opam/.opam/4.04.1/lib/datakit-client/opam"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_S.cmi" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_S.cmi"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_S.cmx" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_S.cmx"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_S.cmt" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_S.cmt"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_S.ml" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_S.ml"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client_9p.cmi" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_client_9p.cmi"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client_9p.cmx" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_client_9p.cmx"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client_9p.cmt" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_client_9p.cmt"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client_9p.cmti" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_client_9p.cmti"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client_9p.mli" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_client_9p.mli"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.cmi" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_path.cmi"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.cmx" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_path.cmx"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.cmt" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_path.cmt"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.cmti" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_path.cmti"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.mli" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_path.mli"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.cma" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_client.cma"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.cmxa" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_client.cmxa"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.a" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_client.a"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.cmxs" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_client.cmxs"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/install/default/doc/datakit-client/README.md" "/home/opam/.opam/4.04.1/doc/datakit-client/README.md"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/install/default/doc/datakit-client/LICENSE.md" "/home/opam/.opam/4.04.1/doc/datakit-client/LICENSE.md"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/install/default/doc/datakit-client/CHANGES.md" "/home/opam/.opam/4.04.1/doc/datakit-client/CHANGES.md"
-> installed datakit-client.dev
Done.
 ---> 5d0de8cd021b
Error removing intermediate container 966a899ae653: No such container: 966a899ae653fa27512343053205b321af5ba272325bbc6e28d445a87bddf937
Step 14/15 : RUN sudo mkdir /data && sudo chown opam.nogroup /data && chmod 700 /data &&     sudo cp $(opam config exec -- which datakit-mount) /usr/bin/datakit-mount
 ---> Running in bc38a433d043
 ---> 578ef08ab759
Removing intermediate container fabccb2d96bf
Removing intermediate container 967553461c08
Removing intermediate container af789dfbb6a5
Removing intermediate container bc38a433d043
Error removing intermediate container 966a899ae653: No such container: 966a899ae653fa27512343053205b321af5ba272325bbc6e28d445a87bddf937
Step 15/15 : CMD bash -c "/usr/bin/datakit-mount -h $(getent hosts datakit | awk '{print $1}')";     bash
 ---> Running in 28a10a1866d3
 ---> ae336ca102ef
Error removing intermediate container 966a899ae653: No such container: 966a899ae653fa27512343053205b321af5ba272325bbc6e28d445a87bddf937
Successfully built ae336ca102ef
[2017-05-04 18:04.45] Success
