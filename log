=== Docker build Dockerfile.client
[2017-05-05 16:19.22] Starting...
Cloning into '/tmp/with_clone17e962db'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at c39fb03 Merge pull request #548 from avsm/reports-april
[2017-05-05 16:19.23] Rewrite Dockerfile's first line to:
FROM ocaml/opam:alpine_ocaml-4.03.0
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 5.752 MB
Step 1/15 : FROM ocaml/opam:alpine_ocaml-4.03.0
 ---> 1254c1838b00
Step 2/15 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> ceb3f4bbc474
Step 3/15 : RUN cd /home/opam/opam-repository && git pull && opam update -y
 ---> Using cache
 ---> fdaadf179f6d
Step 4/15 : RUN opam depext -ui lwt alcotest conf-libev
 ---> Using cache
 ---> 5949fdbe7a4c
Step 5/15 : COPY datakit-client.opam /home/opam/src/datakit/datakit-client.opam
 ---> Using cache
 ---> 91b470df850c
Step 6/15 : RUN opam pin add datakit-client.dev /home/opam/src/datakit -n
 ---> Using cache
 ---> 26d6d90ce79d
Step 7/15 : RUN opam depext datakit-client &&     opam install datakit-client --deps
 ---> Using cache
 ---> 69f60661fb42
Step 8/15 : COPY . /home/opam/src/datakit
 ---> b316630a9077
Error removing intermediate container ead83750ae28: Driver aufs failed to remove root filesystem ead83750ae284c1559c6c97ff384106fd32c30fce1f75c781e695e87098ef222: rename /var/lib/docker/aufs/diff/b3c04eb9e478103ac1d61b7b053fe08400475a291ac92dafe694c26da3f3670f /var/lib/docker/aufs/diff/b3c04eb9e478103ac1d61b7b053fe08400475a291ac92dafe694c26da3f3670f-removing: device or resource busy
Step 9/15 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in 3cb1789407b1
 ---> 9f6e5ad1bd0e
Error removing intermediate container ead83750ae28: No such container: ead83750ae284c1559c6c97ff384106fd32c30fce1f75c781e695e87098ef222
Step 10/15 : RUN cd /home/opam/src/datakit &&     scripts/watermark.sh &&     git status --porcelain
 ---> Running in 7952820edc1d
 M Dockerfile.client
 M src/version.ml
 ---> 10b9c83d5bbc
Error removing intermediate container ead83750ae28: No such container: ead83750ae284c1559c6c97ff384106fd32c30fce1f75c781e695e87098ef222
Step 11/15 : RUN opam update datakit-client
 ---> Running in 86de48c32617

=-=- Synchronizing development packages -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
[datakit-client] /home/opam/src/datakit/ synchronized

Updates available for 4.03.0, apply them with 'opam upgrade':
===== 7 to recompile | 2 to upgrade =====
 ---> fb528d55a04b
Error removing intermediate container ead83750ae28: No such container: ead83750ae284c1559c6c97ff384106fd32c30fce1f75c781e695e87098ef222
Step 12/15 : RUN opam info datakit-client --raw
 ---> Running in df4ea46a27aa
opam-version: "1.2"
name: "datakit-client"
version: "dev"
maintainer: "thomas@gazagnaire.org"
authors: [
  "Thomas Leonard" "Magnus Skjegstad" "David Scott" "Thomas Gazagnaire"
]
homepage: "https://github.com/moby/datakit"
bug-reports: "https://github.com/moby/datakit/issues"
license: "Apache"
doc: "https://docker.github.io/datakit/"
dev-repo: "https://github.com/moby/datakit.git"
build: ["jbuilder" "build" "-p" name "-j" jobs]
depends: [
  "jbuilder" {build}
  "base-bytes"
  "astring"
  "logs"
  "uri"
  "rresult"
  "fmt"
  "cstruct" {> "2.2.0"}
  "protocol-9p" {= "0.9.0"}
  "cmdliner"
]
 ---> 33add807b6f6
Removing intermediate container 7952820edc1d
Removing intermediate container 86de48c32617
Error removing intermediate container df4ea46a27aa: Driver aufs failed to remove root filesystem df4ea46a27aa7c5eb0282d6b18db7a1cf12e9682eb268253795ee3aecce5f731: rename /var/lib/docker/aufs/mnt/99afba7925549a95e88a53eeacba039d01330ca5771e27c2181fa5f9c8a764d4 /var/lib/docker/aufs/mnt/99afba7925549a95e88a53eeacba039d01330ca5771e27c2181fa5f9c8a764d4-removing: device or resource busy
Step 13/15 : RUN opam install datakit-client.dev -vv
 ---> Running in f6c006fee9b7

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.03.0/packages.dev/datakit-client"
- sending incremental file list
- 
- sent 8,171 bytes  received 47 bytes  16,436.00 bytes/sec
- total size is 1,266,346  speedup is 154.09
[datakit-client] /home/opam/src/datakit/ already up-to-date
The following actions will be performed:
  - install datakit-client dev*

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.03.0/packages.dev/datakit-client"
- sending incremental file list
- 
- sent 8,171 bytes  received 47 bytes  16,436.00 bytes/sec
- total size is 1,266,346  speedup is 154.09
[datakit-client.dev] /home/opam/src/datakit/ already up-to-date

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: jbuilder build] Command started
+ jbuilder "build" "-p" "datakit-client" "-j" "4" (CWD=/home/opam/.opam/4.03.0/build/datakit-client.dev)
-     ocamldep api/ocaml/bin/mount.depends.ocamldep-output
-     ocamldep api/ocaml/datakit_client.dependsi.ocamldep-output
-       ocamlc api/ocaml/bin/version.{cmi,cmo,cmt}
-     ocamldep api/ocaml/datakit_client.depends.ocamldep-output
-       ocamlc api/ocaml/datakit_path.{cmi,cmti}
-     ocamlopt api/ocaml/bin/version.{cmx,o}
-       ocamlc api/ocaml/bin/mount.{cmi,cmo,cmt}
-       ocamlc api/ocaml/datakit_path.{cmo,cmt}
-     ocamlopt api/ocaml/datakit_path.{cmx,o}
-       ocamlc api/ocaml/datakit_S.{cmi,cmo,cmt}
-       ocamlc api/ocaml/datakit_client_9p.{cmi,cmti}
-     ocamlopt api/ocaml/bin/mount.{cmx,o}
-     ocamlopt api/ocaml/datakit_S.{cmx,o}
-       ocamlc api/ocaml/datakit_client_9p.{cmo,cmt}
-       ocamlc api/ocaml/datakit_client.cma
-     ocamlopt api/ocaml/bin/mount.exe
-     ocamlopt api/ocaml/datakit_client_9p.{cmx,o}
-     ocamlopt api/ocaml/datakit_client.{a,cmxa}
-     ocamlopt api/ocaml/datakit_client.cmxs
+ install "-m" "0755" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/bin/datakit-mount" "/home/opam/.opam/4.03.0/bin/datakit-mount"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/META" "/home/opam/.opam/4.03.0/lib/datakit-client/META"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/opam" "/home/opam/.opam/4.03.0/lib/datakit-client/opam"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_S.cmi" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_S.cmi"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_S.cmx" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_S.cmx"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_S.cmt" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_S.cmt"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_S.ml" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_S.ml"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client_9p.cmi" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client_9p.cmi"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client_9p.cmx" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client_9p.cmx"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client_9p.cmt" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client_9p.cmt"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client_9p.cmti" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client_9p.cmti"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client_9p.mli" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client_9p.mli"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.cmi" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_path.cmi"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.cmx" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_path.cmx"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.cmt" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_path.cmt"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.cmti" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_path.cmti"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.mli" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_path.mli"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.cma" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client.cma"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.cmxa" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client.cmxa"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.a" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client.a"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.cmxs" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client.cmxs"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/doc/datakit-client/README.md" "/home/opam/.opam/4.03.0/doc/datakit-client/README.md"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/doc/datakit-client/LICENSE.md" "/home/opam/.opam/4.03.0/doc/datakit-client/LICENSE.md"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/install/default/doc/datakit-client/CHANGES.md" "/home/opam/.opam/4.03.0/doc/datakit-client/CHANGES.md"
-> installed datakit-client.dev
Done.
 ---> 1cb6e4f243eb
Error removing intermediate container df4ea46a27aa: No such container: df4ea46a27aa7c5eb0282d6b18db7a1cf12e9682eb268253795ee3aecce5f731
Step 14/15 : RUN sudo mkdir /data && sudo chown opam.nogroup /data && chmod 700 /data &&     sudo cp $(opam config exec -- which datakit-mount) /usr/bin/datakit-mount
 ---> Running in 2467c3d4e9a8
 ---> c6985f20f365
Removing intermediate container 3cb1789407b1
Removing intermediate container f6c006fee9b7
Removing intermediate container 2467c3d4e9a8
Error removing intermediate container df4ea46a27aa: No such container: df4ea46a27aa7c5eb0282d6b18db7a1cf12e9682eb268253795ee3aecce5f731
Step 15/15 : CMD bash -c "/usr/bin/datakit-mount -h $(getent hosts datakit | awk '{print $1}')";     bash
 ---> Running in f4891dd5c947
 ---> 37b9a2389e68
Removing intermediate container f4891dd5c947
Error removing intermediate container df4ea46a27aa: No such container: df4ea46a27aa7c5eb0282d6b18db7a1cf12e9682eb268253795ee3aecce5f731
Successfully built 37b9a2389e68
[2017-05-05 16:20.05] Success
