=== Run docker-build-client on commit dac83d3a5aedc09ae630e5f7e2a3767939621b71
[2016-11-22 15:03.11] Starting...
Cloning into '/tmp/with_clone3269b46f'...
done.
HEAD is now at dac83d3 ci: add Prometheus metric reporting
[2016-11-22 15:03.12] Running "docker" "build" "--pull" "-f" "Dockerfile.client" "."...
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 5.642 MB
Step 1 : FROM ocaml/opam:alpine
alpine: Pulling from ocaml/opam
3690ec4760f9: Already exists
f7fbfc4181f4: Pulling fs layer
5a1a12605468: Pulling fs layer
c36ddd52cd6e: Pulling fs layer
5a1a12605468: Verifying Checksum
5a1a12605468: Download complete
c36ddd52cd6e: Verifying Checksum
c36ddd52cd6e: Download complete
f7fbfc4181f4: Verifying Checksum
f7fbfc4181f4: Download complete
f7fbfc4181f4: Pull complete
5a1a12605468: Pull complete
c36ddd52cd6e: Pull complete
Digest: sha256:f903be364a78f9c339d7de3bb6bbf057743f9aaa71958d26e7ba5f2805c5d8d5
Status: Image is up to date for ocaml/opam:alpine
 ---> 5181a2d37143
Step 2 : RUN cd /home/opam/opam-repository && git pull && opam update -y
 ---> Running in fbcf2d1c7c94
[91mFrom git://github.com/ocaml/opam-repository
   c5ec6a9..1104e5d  master     -> origin/master
[0mUpdating c5ec6a9..1104e5d
Fast-forward
 compilers/4.05.0/4.05.0+pr930/4.05.0+pr930.comp    | 11 ++++
 compilers/4.05.0/4.05.0+pr930/4.05.0+pr930.descr   |  1 +
 compilers/4.05.0/4.05.0+pr931/4.05.0+pr931.comp    | 11 ++++
 compilers/4.05.0/4.05.0+pr931/4.05.0+pr931.descr   |  1 +
 packages/alsa/alsa.0.2.3/descr                     |  1 +
 packages/alsa/alsa.0.2.3/findlib                   |  1 +
 packages/alsa/alsa.0.2.3/opam                      | 20 ++++++++
 packages/alsa/alsa.0.2.3/url                       |  2 +
 packages/alt-ergo/alt-ergo.1.30/descr              |  7 +++
 packages/alt-ergo/alt-ergo.1.30/opam               | 38 ++++++++++++++
 packages/alt-ergo/alt-ergo.1.30/url                |  2 +
 packages/altgr-ergo/altgr-ergo.1.30/descr          |  7 +++
 packages/altgr-ergo/altgr-ergo.1.30/opam           | 41 +++++++++++++++
 packages/altgr-ergo/altgr-ergo.1.30/url            |  2 +
 packages/channel/channel.1.1.1/opam                | 20 +++++---
 packages/distwit/distwit.0.1.0/descr               |  4 ++
 packages/distwit/distwit.0.1.0/opam                | 14 +++++
 packages/distwit/distwit.0.1.0/url                 |  2 +
 packages/dns-forward/dns-forward.0.7.2/descr       |  9 ++++
 packages/dns-forward/dns-forward.0.7.2/findlib     |  1 +
 packages/dns-forward/dns-forward.0.7.2/opam        | 35 +++++++++++++
 packages/dns-forward/dns-forward.0.7.2/url         |  2 +
 packages/efl/efl.1.18.0/descr                      | 12 +++++
 packages/efl/efl.1.18.0/opam                       | 22 ++++++++
 packages/efl/efl.1.18.0/url                        |  2 +
 packages/fat-filesystem/fat-filesystem.0.10.0/opam |  5 +-
 packages/fat-filesystem/fat-filesystem.0.10.1/opam |  5 +-
 packages/fat-filesystem/fat-filesystem.0.10.2/opam |  5 +-
 packages/fat-filesystem/fat-filesystem.0.10.3/opam |  4 +-
 packages/fat-filesystem/fat-filesystem.0.11.0/opam |  4 +-
 packages/fat-filesystem/fat-filesystem.0.6.0/opam  | 10 +++-
 packages/fat-filesystem/fat-filesystem.0.6.2/opam  |  6 ++-
 packages/fat-filesystem/fat-filesystem.0.7.0/opam  |  5 +-
 packages/fat-filesystem/fat-filesystem.0.8.0/opam  |  5 +-
 packages/fat-filesystem/fat-filesystem.0.9.0/opam  |  5 +-
 packages/gapi-ocaml/gapi-ocaml.0.2.14/descr        | 11 ++++
 packages/gapi-ocaml/gapi-ocaml.0.2.14/findlib      |  1 +
 packages/gapi-ocaml/gapi-ocaml.0.2.14/opam         | 36 +++++++++++++
 packages/gapi-ocaml/gapi-ocaml.0.2.14/url          |  2 +
 .../google-drive-ocamlfuse.0.5.25/opam             |  2 +-
 packages/lymp/lymp.0.1.2/descr                     |  2 +
 packages/lymp/lymp.0.1.2/opam                      | 20 ++++++++
 packages/lymp/lymp.0.1.2/url                       |  2 +
 packages/lymp/lymp.0.1/descr                       |  2 +-
 packages/lymp/lymp.0.1/opam                        |  4 +-
 packages/lymp/lymp.0.1/url                         |  3 +-
 packages/mbr-format/mbr-format.0.3/opam            |  6 +--
 .../mirage-block-ramdisk.0.1/opam                  | 18 +++----
 .../mirage-block-ramdisk.0.2/opam                  | 18 +++----
 .../mirage-block-solo5.0.1.1/opam                  | 27 +++++-----
 .../mirage-block-xen/mirage-block-xen.1.3.1/opam   | 33 ++++++------
 .../mirage-block-xen/mirage-block-xen.1.4.0/opam   | 37 ++++++-------
 packages/mirage-block/mirage-block.0.1/opam        | 19 +++----
 packages/mirage-block/mirage-block.0.2/opam        | 19 +++----
 packages/mirage-conduit/mirage-conduit.2.0.0/opam  | 14 +++--
 packages/mirage-conduit/mirage-conduit.2.1.0/opam  | 21 ++++----
 packages/mirage-conduit/mirage-conduit.2.2.0/opam  | 28 +++++-----
 packages/mirage-console/mirage-console.2.0.0/opam  |  7 +--
 packages/mirage-console/mirage-console.2.1.0/opam  |  8 ++-
 packages/mirage-console/mirage-console.2.1.1/opam  |  7 +--
 packages/mirage-console/mirage-console.2.1.2/opam  | 32 +++++-------
 packages/mirage-console/mirage-console.2.1.3/opam  | 32 +++++-------
 packages/mirage-fs-unix/mirage-fs-unix.1.1.4/opam  | 22 ++++----
 packages/mirage-fs-unix/mirage-fs-unix.1.2.0/opam  | 21 ++++----
 packages/mirage-fs-unix/mirage-fs-unix.1.2.1/opam  | 25 ++++-----
 packages/mirage-logs/mirage-logs.0.1/opam          | 20 +++-----
 packages/mirage/mirage.2.0.0/opam                  | 17 ++----
 packages/mirage/mirage.2.0.1/opam                  | 17 ++----
 packages/mirage/mirage.2.1.0/opam                  | 17 ++----
 packages/mirage/mirage.2.1.1/opam                  | 17 ++----
 packages/mirage/mirage.2.2.1/opam                  | 17 ++----
 packages/mirage/mirage.2.3.0/opam                  | 17 ++----
 packages/mirage/mirage.2.4.0/opam                  | 16 +++---
 packages/mirage/mirage.2.5.0/opam                  | 17 +++---
 packages/mirage/mirage.2.6.0/opam                  | 23 ++++-----
 packages/mirage/mirage.2.6.1/opam                  | 23 ++++-----
 packages/mirage/mirage.2.7.3/opam                  | 32 +++++-------
 packages/mirage/mirage.2.8.0/opam                  | 32 +++++-------
 packages/mirage/mirage.2.9.0/opam                  |  4 +-
 packages/mirage/mirage.2.9.1/opam                  |  4 +-
 .../msgpack/msgpack.1.0.0/files/no-camlp4.patch    | 60 ++++++++++++++++++++++
 .../msgpack/msgpack.1.1.0/files/no-camlp4.patch    | 60 ++++++++++++++++++++++
 .../msgpack/msgpack.1.1.1/files/no-camlp4.patch    | 60 ++++++++++++++++++++++
 .../msgpack/msgpack.1.2.0/files/no-camlp4.patch    | 60 ++++++++++++++++++++++
 .../msgpack/msgpack.1.2.1/files/no-camlp4.patch    | 60 ++++++++++++++++++++++
 packages/omake/omake.0.10.1/descr                  |  1 +
 packages/omake/omake.0.10.1/opam                   | 22 ++++++++
 packages/omake/omake.0.10.1/url                    |  2 +
 packages/ppx_bigarray/ppx_bigarray.2.0.0/descr     |  1 +
 packages/ppx_bigarray/ppx_bigarray.2.0.0/opam      | 27 ++++++++++
 packages/ppx_bigarray/ppx_bigarray.2.0.0/url       |  2 +
 packages/ppxx/ppxx.1.3.1/descr                     |  4 ++
 packages/ppxx/ppxx.1.3.1/opam                      | 26 ++++++++++
 packages/ppxx/ppxx.1.3.1/url                       |  2 +
 packages/psq/psq.0.1.0/descr                       | 16 ++++++
 packages/psq/psq.0.1.0/opam                        | 17 ++++++
 packages/psq/psq.0.1.0/url                         |  2 +
 packages/qcow-format/qcow-format.0.1/opam          | 20 +++-----
 packages/qcow-format/qcow-format.0.2/opam          | 24 ++++-----
 packages/qcow-format/qcow-format.0.3/opam          | 23 +++------
 packages/qcow-format/qcow-format.0.4.1/opam        | 23 +++------
 packages/qcow-format/qcow-format.0.4.2/opam        | 23 +++------
 packages/qcow-format/qcow-format.0.4/opam          | 23 +++------
 packages/socketcan/socketcan.0.8.7-0/descr         |  3 ++
 packages/socketcan/socketcan.0.8.7-0/findlib       |  1 +
 packages/socketcan/socketcan.0.8.7-0/opam          | 26 ++++++++++
 packages/socketcan/socketcan.0.8.7-0/url           |  2 +
 packages/syndic/syndic.1.5.3/descr                 |  4 ++
 packages/syndic/syndic.1.5.3/findlib               |  1 +
 packages/syndic/syndic.1.5.3/opam                  | 34 ++++++++++++
 packages/syndic/syndic.1.5.3/url                   |  2 +
 packages/syslog/syslog.1.4/url                     |  2 +-
 packages/typpx/typpx.1.2.0/descr                   |  9 ++++
 packages/typpx/typpx.1.2.0/opam                    | 26 ++++++++++
 packages/typpx/typpx.1.2.0/url                     |  2 +
 packages/ulex/ulex.1.1/url                         |  2 +-
 packages/vhd-format/vhd-format.0.7.0/opam          | 13 +++--
 packages/vhd-format/vhd-format.0.7.1/opam          | 13 +++--
 packages/vhd-format/vhd-format.0.8.0/opam          | 17 +++---
 packages/xen-evtchn/xen-evtchn.1.0.7/descr         |  3 ++
 packages/xen-evtchn/xen-evtchn.1.0.7/findlib       |  3 ++
 packages/xen-evtchn/xen-evtchn.1.0.7/opam          | 25 +++++++++
 packages/xen-evtchn/xen-evtchn.1.0.7/url           |  2 +
 packages/xen-gnt/xen-gnt.2.2.3/descr               |  5 ++
 packages/xen-gnt/xen-gnt.2.2.3/findlib             |  2 +
 packages/xen-gnt/xen-gnt.2.2.3/opam                | 33 ++++++++++++
 packages/xen-gnt/xen-gnt.2.2.3/url                 |  2 +
 127 files changed, 1335 insertions(+), 529 deletions(-)
 create mode 100644 compilers/4.05.0/4.05.0+pr930/4.05.0+pr930.comp
 create mode 100644 compilers/4.05.0/4.05.0+pr930/4.05.0+pr930.descr
 create mode 100644 compilers/4.05.0/4.05.0+pr931/4.05.0+pr931.comp
 create mode 100644 compilers/4.05.0/4.05.0+pr931/4.05.0+pr931.descr
 create mode 100644 packages/alsa/alsa.0.2.3/descr
 create mode 100644 packages/alsa/alsa.0.2.3/findlib
 create mode 100644 packages/alsa/alsa.0.2.3/opam
 create mode 100644 packages/alsa/alsa.0.2.3/url
 create mode 100644 packages/alt-ergo/alt-ergo.1.30/descr
 create mode 100644 packages/alt-ergo/alt-ergo.1.30/opam
 create mode 100644 packages/alt-ergo/alt-ergo.1.30/url
 create mode 100644 packages/altgr-ergo/altgr-ergo.1.30/descr
 create mode 100644 packages/altgr-ergo/altgr-ergo.1.30/opam
 create mode 100644 packages/altgr-ergo/altgr-ergo.1.30/url
 create mode 100644 packages/distwit/distwit.0.1.0/descr
 create mode 100644 packages/distwit/distwit.0.1.0/opam
 create mode 100644 packages/distwit/distwit.0.1.0/url
 create mode 100644 packages/dns-forward/dns-forward.0.7.2/descr
 create mode 100644 packages/dns-forward/dns-forward.0.7.2/findlib
 create mode 100644 packages/dns-forward/dns-forward.0.7.2/opam
 create mode 100644 packages/dns-forward/dns-forward.0.7.2/url
 create mode 100644 packages/efl/efl.1.18.0/descr
 create mode 100644 packages/efl/efl.1.18.0/opam
 create mode 100644 packages/efl/efl.1.18.0/url
 create mode 100644 packages/gapi-ocaml/gapi-ocaml.0.2.14/descr
 create mode 100644 packages/gapi-ocaml/gapi-ocaml.0.2.14/findlib
 create mode 100644 packages/gapi-ocaml/gapi-ocaml.0.2.14/opam
 create mode 100644 packages/gapi-ocaml/gapi-ocaml.0.2.14/url
 create mode 100644 packages/lymp/lymp.0.1.2/descr
 create mode 100644 packages/lymp/lymp.0.1.2/opam
 create mode 100644 packages/lymp/lymp.0.1.2/url
 create mode 100644 packages/omake/omake.0.10.1/descr
 create mode 100644 packages/omake/omake.0.10.1/opam
 create mode 100644 packages/omake/omake.0.10.1/url
 create mode 100644 packages/ppx_bigarray/ppx_bigarray.2.0.0/descr
 create mode 100644 packages/ppx_bigarray/ppx_bigarray.2.0.0/opam
 create mode 100644 packages/ppx_bigarray/ppx_bigarray.2.0.0/url
 create mode 100644 packages/ppxx/ppxx.1.3.1/descr
 create mode 100644 packages/ppxx/ppxx.1.3.1/opam
 create mode 100644 packages/ppxx/ppxx.1.3.1/url
 create mode 100644 packages/psq/psq.0.1.0/descr
 create mode 100644 packages/psq/psq.0.1.0/opam
 create mode 100644 packages/psq/psq.0.1.0/url
 create mode 100644 packages/socketcan/socketcan.0.8.7-0/descr
 create mode 100644 packages/socketcan/socketcan.0.8.7-0/findlib
 create mode 100644 packages/socketcan/socketcan.0.8.7-0/opam
 create mode 100644 packages/socketcan/socketcan.0.8.7-0/url
 create mode 100644 packages/syndic/syndic.1.5.3/descr
 create mode 100644 packages/syndic/syndic.1.5.3/findlib
 create mode 100644 packages/syndic/syndic.1.5.3/opam
 create mode 100644 packages/syndic/syndic.1.5.3/url
 create mode 100644 packages/typpx/typpx.1.2.0/descr
 create mode 100644 packages/typpx/typpx.1.2.0/opam
 create mode 100644 packages/typpx/typpx.1.2.0/url
 create mode 100644 packages/xen-evtchn/xen-evtchn.1.0.7/descr
 create mode 100644 packages/xen-evtchn/xen-evtchn.1.0.7/findlib
 create mode 100644 packages/xen-evtchn/xen-evtchn.1.0.7/opam
 create mode 100644 packages/xen-evtchn/xen-evtchn.1.0.7/url
 create mode 100644 packages/xen-gnt/xen-gnt.2.2.3/descr
 create mode 100644 packages/xen-gnt/xen-gnt.2.2.3/findlib
 create mode 100644 packages/xen-gnt/xen-gnt.2.2.3/opam
 create mode 100644 packages/xen-gnt/xen-gnt.2.2.3/url

=-=- Updating package repositories =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[default: local] Command started
[default: local] Command started
[default: local] Command started
[default] /home/opam/opam-repository synchronized
 ---> d6f9aadd3ab2
Removing intermediate container fbcf2d1c7c94
Step 3 : RUN opam depext -ui lwt alcotest conf-libev
 ---> Running in 6cf72dcdad18
# Detecting depexts using flags: x86_64 linux alpine
# The following system packages are needed:
#  - libev-dev
#  - m4
The following command needs to be run through "sudo":
    apk update
fetch http://dl-cdn.alpinelinux.org/alpine/v3.4/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.4/community/x86_64/APKINDEX.tar.gz
fetch http://www.cl.cam.ac.uk/~avsm2/alpine-ocaml/3.4/x86_64/APKINDEX.tar.gz
v3.4.6-8-ga4354fb [http://dl-cdn.alpinelinux.org/alpine/v3.4/main]
v3.4.6-5-g027d8ce [http://dl-cdn.alpinelinux.org/alpine/v3.4/community]
testing v3.3.0-55-g55836a9 [http://www.cl.cam.ac.uk/~avsm2/alpine-ocaml/3.4]
OK: 5976 distinct packages available
# OS package update successful
The following command needs to be run through "sudo":
    apk add libev-dev m4
(1/3) Installing libev (4.22-r0)
(2/3) Installing libev-dev (4.22-r0)
(3/3) Installing m4 (1.4.17-r1)
Executing busybox-1.24.2-r12.trigger
OK: 435 MiB in 86 packages
# OS packages installation successful
# Now letting OPAM install the packages
The following actions will be performed:
  - install conf-m4    1                                        [required by ocamlfind]
  - install conf-libev 4-11      
  - install result     1.2                                      [required by alcotest, lwt]
  - install ocamlfind  1.6.2                                    [required by alcotest, lwt]
  - install topkg      0.8.1                                    [required by alcotest]
  - install ppx_tools  5.0+4.03.0                               [required by lwt]
  - install base-bytes base                                     [required by lwt]
  - install fmt        0.8.0                                    [required by alcotest]
  - install astring    0.8.3                                    [required by alcotest]
  - install lwt        2.6.0     
  - install alcotest   0.7.2     
===== 11 to install =====
Do you want to continue ? [Y/n] y

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[alcotest: http] Command started
[astring: http] Command started
[fmt: http] Command started
[astring: http] Command started
[fmt: http] Command started
[astring.0.8.3] http://erratique.ch/software/astring/releases/astring-0.8.3.tbz downloaded
[lwt: http] Command started
[fmt.0.8.0] http://erratique.ch/software/fmt/releases/fmt-0.8.0.tbz downloaded
[ocamlfind: http] Command started
[ocamlfind: http] Command started
[ocamlfind.1.6.2] http://download.camlcity.org/download/findlib-1.6.2.tar.gz downloaded
[ppx_tools: http] Command started
[alcotest: http] Command started
[alcotest.0.7.2] https://github.com/mirage/alcotest/releases/download/0.7.2/alcotest-0.7.2.tbz downloaded
[result: http] Command started
[result: http] Command started
[result.1.2] https://github.com/janestreet/result/archive/1.2.tar.gz downloaded
[topkg: http] Command started
[ppx_tools: http] Command started
[ppx_tools.5.0+4.03.0] https://github.com/alainfrisch/ppx_tools/archive/5.0+4.03.0.tar.gz downloaded
[topkg: http] Command started
[topkg.0.8.1] http://erratique.ch/software/topkg/releases/topkg-0.8.1.tbz downloaded
[lwt: http] Command started
[lwt.2.6.0] https://github.com/ocsigen/lwt/archive/2.6.0.tar.gz downloaded

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[conf-libev: ./build.sh] Command started
[conf-m4: sh echo | m4] Command started
[result: make] Command started
-> installed conf-m4.1
[ocamlfind: ./configure] Command started
-> installed conf-libev.4-11
-> installed result.1.2
[ocamlfind: make all] Command started
[ocamlfind: make opt] Command started
[ocamlfind: make install] Command started
-> installed ocamlfind.1.6.2
-> installed base-bytes.base
[ppx_tools: make all] Command started
[topkg: ocaml build] Command started
[ppx_tools: make install] Command started
-> installed ppx_tools.5.0+4.03.0
[lwt: ocaml setup.ml] Command started
-> installed topkg.0.8.1
[astring: ocaml build] Command started
[fmt: ocaml build] Command started
-> installed fmt.0.8.0
-> installed astring.0.8.3
[alcotest: ocaml build] Command started
-> installed alcotest.0.7.2
[lwt: make build] Command started
[lwt: make install] Command started
-> installed lwt.2.6.0
Done.
 ---> 6535ed693ed2
Removing intermediate container 6cf72dcdad18
Step 4 : COPY datakit-client.opam /home/opam/src/datakit/datakit-client.opam
 ---> e7d06da9f4bf
Removing intermediate container a41d65feec73
Step 5 : RUN opam pin add datakit-client.dev /home/opam/src/datakit -n
 ---> Running in 57574cf70619
datakit-client is now path-pinned to /home/opam/src/datakit

[datakit-client: local]
[datakit-client] /home/opam/src/datakit/ synchronized

 ---> 2188a7e34b68
Removing intermediate container 57574cf70619
Step 6 : RUN opam depext datakit-client &&     opam install datakit-client --deps
 ---> Running in ac03312e20e1
# Detecting depexts using flags: x86_64 linux alpine
# The following system packages are needed:
#  - m4
#  - ncurses-dev
#  - pkgconfig
m4
ncurses-dev
pkgconfig
# All required OS packages found.

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
[datakit-client] /home/opam/src/datakit/ already up-to-date
The following actions will be performed:
  - install stringext        1.4.3         
  - install rresult          0.5.0         
  - install logs             0.6.2         
  - install cppo             1.4.1         
  - install ocb-stubblr      0.1.0         
  - install re               1.7.1         
  - install win-error        0.2           
  - install ppx_core         113.33.01+4.03
  - install sexplib          113.33.00+4.03
  - install ppx_deriving     4.1           
  - install ocplib-endian    1.0           
  - install named-pipe       0.4.0         
  - install ppx_optcomp      113.33.00+4.03
  - install cstruct          2.3.0         
  - install ppx_driver       113.33.01+4.03
  - install io-page          1.6.1         
  - install ppx_type_conv    113.33.02+4.03
  - install ppx_sexp_conv    113.33.01+4.03
  - install uri              1.9.2         
  - install ipaddr           2.7.1         
  - install mirage-types     2.8.0         
  - install mirage-types-lwt 2.8.0         
  - install channel          1.1.1         
  - install protocol-9p      0.7.4         
===== 24 to install =====
Do you want to continue ? [Y/n] y

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[channel: http] Command started
[cppo: http] Command started
[cstruct: http] Command started
[channel: http] Command started
[channel.1.1.1] https://github.com/mirage/mirage-channel/releases/download/v1.1.1/channel-1.1.1.tbz downloaded
[io-page: http] Command started
[cppo: http] Command started
[cppo.1.4.1] https://github.com/mjambon/cppo/archive/v1.4.1.tar.gz downloaded
[ipaddr: http] Command started
[cstruct: http] Command started
[cstruct.2.3.0] https://github.com/mirage/ocaml-cstruct/archive/v2.3.0.tar.gz downloaded
[logs: http] Command started
[io-page: http] Command started
[io-page.1.6.1] https://github.com/mirage/io-page/archive/v1.6.1.tar.gz downloaded
[mirage-types: http] Command started
[ipaddr: http] Command started
[ipaddr.2.7.1] https://github.com/mirage/ocaml-ipaddr/releases/download/2.7.1/ipaddr-2.7.1.tbz downloaded
[named-pipe: http] Command started
[logs: http] Command started
[logs.0.6.2] http://erratique.ch/software/logs/releases/logs-0.6.2.tbz downloaded
[ocb-stubblr: http] Command started
[named-pipe: http] Command started
[named-pipe.0.4.0] https://github.com/mirage/ocaml-named-pipe/releases/download/0.4.0/named-pipe-0.4.0.tbz downloaded
[ocplib-endian: http] Command started
[ocb-stubblr: http] Command started
[ocb-stubblr.0.1.0] https://github.com/pqwy/ocb-stubblr/releases/download/v0.1.0/ocb-stubblr-0.1.0.tbz downloaded
[ppx_core: http] Command started
[mirage-types: http] Command started
[mirage-types.2.8.0] https://github.com/mirage/mirage/archive/v2.8.0.tar.gz downloaded
[ppx_deriving: http] Command started
[ppx_core: http] Command started
[ppx_core.113.33.01+4.03] https://ocaml.janestreet.com/ocaml-core/113.33/files/ppx_core-113.33.01+4.03.tar.gz downloaded
[ppx_driver: http] Command started
[ocplib-endian: http] Command started
[ocplib-endian.1.0] https://github.com/OCamlPro/ocplib-endian/archive/1.0.tar.gz downloaded
[ppx_optcomp: http] Command started
[ppx_driver: http] Command started
[ppx_driver.113.33.01+4.03] https://ocaml.janestreet.com/ocaml-core/113.33/files/ppx_driver-113.33.01+4.03.tar.gz downloaded
[ppx_sexp_conv: http] Command started
[ppx_deriving: http] Command started
[ppx_deriving.4.1] https://github.com/whitequark/ppx_deriving/archive/v4.1.tar.gz downloaded
[ppx_type_conv: http] Command started
[ppx_optcomp: http] Command started
[ppx_optcomp.113.33.00+4.03] https://ocaml.janestreet.com/ocaml-core/113.33/files/ppx_optcomp-113.33.00+4.03.tar.gz downloaded
[protocol-9p: http] Command started
[ppx_sexp_conv: http] Command started
[ppx_sexp_conv.113.33.01+4.03] https://ocaml.janestreet.com/ocaml-core/113.33/files/ppx_sexp_conv-113.33.01+4.03.tar.gz downloaded
[re: http] Command started
[ppx_type_conv: http] Command started
[ppx_type_conv.113.33.02+4.03] https://ocaml.janestreet.com/ocaml-core/113.33/files/ppx_type_conv-113.33.02+4.03.tar.gz downloaded
[rresult: http] Command started
[rresult: http] Command started
[rresult.0.5.0] http://erratique.ch/software/rresult/releases/rresult-0.5.0.tbz downloaded
[sexplib: http] Command started
[protocol-9p: http] Command started
[protocol-9p.0.7.4] https://github.com/mirage/ocaml-9p/releases/download/v0.7.4/protocol-9p-0.7.4.tbz downloaded
[stringext: http] Command started
[sexplib: http] Command started
[sexplib.113.33.00+4.03] https://ocaml.janestreet.com/ocaml-core/113.33/files/sexplib-113.33.00+4.03.tar.gz downloaded
[uri: http] Command started
[re: http] Command started
[re.1.7.1] https://github.com/ocaml/ocaml-re/archive/1.7.1.tar.gz downloaded
[win-error: http] Command started
[stringext: http] Command started
[stringext.1.4.3] https://github.com/rgrinberg/stringext/archive/v1.4.3.tar.gz downloaded
[win-error: http] Command started
[win-error.0.2] https://github.com/djs55/ocaml-win-error/archive/v0.2.tar.gz downloaded
[uri: http] Command started
[uri.1.9.2] https://github.com/mirage/ocaml-uri/archive/v1.9.2.tar.gz downloaded

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[cppo: make opt] Command started
[logs: ocaml build] Command started
[ocb-stubblr: ocaml build] Command started
[ppx_core: ./configure] Command started
-> installed ocb-stubblr.0.1.0
[named-pipe: ocaml build] Command started
[cppo: make ocamlbuild] Command started
[ppx_core: make] Command started
-> installed logs.0.6.2
[re: ocaml setup.ml] Command started
[cppo: make install-lib] Command started
-> installed cppo.1.4.1
[ocplib-endian: ocaml setup.ml] Command started
-> installed named-pipe.0.4.0
[ppx_deriving: ocaml] Command started
[re: ocaml setup.ml] Command started
[ocplib-endian: ocaml setup.ml] Command started
[ocplib-endian: ocaml setup.ml] Command started
-> installed ocplib-endian.1.0
[rresult: ocaml build] Command started
-> installed rresult.0.5.0
[sexplib: ./configure] Command started
[re: ocaml setup.ml] Command started
[sexplib: make] Command started
-> installed ppx_deriving.4.1
[stringext: ocaml setup.ml] Command started
-> installed re.1.7.1
[win-error: make] Command started
[stringext: ocaml setup.ml] Command started
[win-error: make install] Command started
[stringext: ocaml setup.ml] Command started
-> installed stringext.1.4.3
-> installed win-error.0.2
-> installed sexplib.113.33.00+4.03
[cstruct: ./configure] Command started
[cstruct: make] Command started
-> installed ppx_core.113.33.01+4.03
[ppx_optcomp: ./configure] Command started
[ppx_optcomp: make] Command started
[cstruct: make install] Command started
[cstruct: make js-install] Command started
-> installed cstruct.2.3.0
[io-page: ./configure] Command started
[io-page: make] Command started
-> installed ppx_optcomp.113.33.00+4.03
[ppx_driver: ./configure] Command started
[ppx_driver: make] Command started
[io-page: make install] Command started
-> installed io-page.1.6.1
-> installed ppx_driver.113.33.01+4.03
[ppx_type_conv: ./configure] Command started
[ppx_type_conv: make] Command started
-> installed ppx_type_conv.113.33.02+4.03
[ppx_sexp_conv: ./configure] Command started
[ppx_sexp_conv: make] Command started
-> installed ppx_sexp_conv.113.33.01+4.03
[ipaddr: ocaml build] Command started
[uri: ocaml setup.ml] Command started
-> installed ipaddr.2.7.1
[mirage-types: make build-types] Command started
[uri: ocaml setup.ml] Command started
[mirage-types: make install-types] Command started
-> installed mirage-types.2.8.0
-> installed mirage-types-lwt.2.8.0
[channel: ocaml build] Command started
-> installed channel.1.1.1
[protocol-9p: ocaml build] Command started
[uri: ocaml setup.ml] Command started
-> installed uri.1.9.2
-> installed protocol-9p.0.7.4
Done.
 ---> 2dc0411943fe
Removing intermediate container ac03312e20e1
Step 7 : COPY . /home/opam/src/datakit
 ---> f8753b3cbea8
Removing intermediate container 0ea88f3f19b0
Step 8 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in c5255045d349
 ---> 66ca8078aa16
Removing intermediate container c5255045d349
Step 9 : RUN cd /home/opam/src/datakit &&     git diff && git status --porcelain &&     git checkout . && scripts/watermark.sh &&     git status --porcelain
 ---> Running in 784e8ac5b113
 M src/version.ml
 ---> d06b3bc5c319
Removing intermediate container 784e8ac5b113
Step 10 : RUN opam update datakit-client
 ---> Running in 245b65c5a4ec

=-=- Synchronizing development packages -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
[datakit-client] /home/opam/src/datakit/ synchronized
 ---> 9344cec87308
Removing intermediate container 245b65c5a4ec
Step 11 : RUN opam info datakit-client --raw
 ---> Running in 043b7e447dc9
opam-version: "1.2"
name: "datakit-client"
version: "dev"
maintainer: "thomas@gazagnaire.org"
authors: [
  "Thomas Leonard" "Magnus Skjegstad" "David Scott" "Thomas Gazagnaire"
]
homepage: "https://github.com/docker/datakit"
bug-reports: "https://github.com/docker/datakit/issues"
license: "Apache"
doc: "https://docker.github.io/datakit/"
dev-repo: "https://github.com/docker/datakit.git"
build: [
  "ocaml" "pkg/pkg.ml" "build" "--pinned" "%{pinned}%" "-n" "datakit-client"
]
depends: [
  "ocamlfind" {build}
  "ocamlbuild" {build}
  "topkg" {build}
  "base-bytes"
  "astring"
  "logs"
  "uri"
  "rresult"
  "cstruct"
  "fmt"
  "protocol-9p" {>= "0.7.4"}
  "cmdliner"
]
 ---> 990936f55321
Removing intermediate container 043b7e447dc9
Step 12 : RUN opam install datakit-client.dev -vv
 ---> Running in ffac91a77b5f

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.03.0/packages.dev/datakit-client"
- sending incremental file list
- 
- sent 7,331 bytes  received 37 bytes  14,736.00 bytes/sec
- total size is 1,171,199  speedup is 158.96
[datakit-client] /home/opam/src/datakit/ already up-to-date
The following actions will be performed:
  - install datakit-client dev*

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.03.0/packages.dev/datakit-client"
- sending incremental file list
- 
- sent 7,331 bytes  received 37 bytes  14,736.00 bytes/sec
- total size is 1,171,199  speedup is 158.96
[datakit-client.dev] /home/opam/src/datakit/ already up-to-date

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: ocaml build] Command started
+ ocaml "pkg/pkg.ml" "build" "--pinned" "true" "-n" "datakit-client" (CWD=/home/opam/.opam/4.03.0/build/datakit-client.dev)
- ocamlfind ocamlopt unix.cmxa -I /home/opam/.opam/4.03.0/lib/ocamlbuild /home/opam/.opam/4.03.0/lib/ocamlbuild/ocamlbuildlib.cmxa -linkpkg myocamlbuild.ml /home/opam/.opam/4.03.0/lib/ocamlbuild/ocamlbuild.cmx -o myocamlbuild
- ocamlfind ocamldep -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit-client/datakit_client_9p.ml > src/datakit-client/datakit_client_9p.ml.depends
- ocamlfind ocamldep -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit-client/datakit_client_9p.mli > src/datakit-client/datakit_client_9p.mli.depends
- ocamlfind ocamldep -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit-client/datakit_S.mli > src/datakit-client/datakit_S.mli.depends
- ocamlfind ocamldep -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit-client/datakit_path.mli > src/datakit-client/datakit_path.mli.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/datakit-client -I src -I ci/src -I src/datakit -o src/datakit-client/datakit_path.cmi src/datakit-client/datakit_path.mli
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/datakit-client -I src -I ci/src -I src/datakit -o src/datakit-client/datakit_S.cmi src/datakit-client/datakit_S.mli
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/datakit-client -I src -I ci/src -I src/datakit -o src/datakit-client/datakit_client_9p.cmi src/datakit-client/datakit_client_9p.mli
- ocamlfind ocamldep -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit-client/datakit_path.ml > src/datakit-client/datakit_path.ml.depends
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/datakit-client -I src -I ci/src -I src/datakit -o src/datakit-client/datakit_path.cmx src/datakit-client/datakit_path.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/datakit-client -I src -I ci/src -I src/datakit -o src/datakit-client/datakit_client_9p.cmx src/datakit-client/datakit_client_9p.ml
- ocamlfind ocamlopt -a -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' src/datakit-client/datakit_path.cmx src/datakit-client/datakit_client_9p.cmx -o src/datakit-client/datakit-client.cmxa
- ocamlfind ocamlopt -shared -linkall -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' src/datakit-client/datakit-client.cmxa -o src/datakit-client/datakit-client.cmxs
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/datakit-client -I src -I ci/src -I src/datakit -o src/datakit-client/datakit_client_9p.cmo src/datakit-client/datakit_client_9p.ml
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/datakit-client -I src -I ci/src -I src/datakit -o src/datakit-client/datakit_path.cmo src/datakit-client/datakit_path.ml
- ocamlfind ocamlc -a -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' src/datakit-client/datakit_path.cmo src/datakit-client/datakit_client_9p.cmo -o src/datakit-client/datakit-client.cma
- ocamlfind ocamldep -package 'cmdliner fmt.cli fmt.tty logs.fmt' -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit-client/mount.ml > src/datakit-client/mount.ml.depends
- ocamlfind ocamldep -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/version.ml > src/version.ml.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src -I ci/src -I src/datakit -o src/version.cmo src/version.ml
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'cmdliner fmt.cli fmt.tty logs.fmt' -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/datakit-client -I src -I ci/src -I src/datakit -o src/datakit-client/mount.cmo src/datakit-client/mount.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src -I ci/src -I src/datakit -o src/version.cmx src/version.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'cmdliner fmt.cli fmt.tty logs.fmt' -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/datakit-client -I src -I ci/src -I src/datakit -o src/datakit-client/mount.cmx src/datakit-client/mount.ml
- ocamlfind ocamlopt -linkpkg -g -package 'cmdliner fmt.cli fmt.tty logs.fmt' -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' src/version.cmx src/datakit-client/mount.cmx -o src/datakit-client/mount.native
+ install "-m" "0755" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/datakit-client/mount.native" "/home/opam/.opam/4.03.0/bin/datakit-mount"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/datakit-client.opam" "/home/opam/.opam/4.03.0/lib/datakit-client/opam"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/pkg/META.client" "/home/opam/.opam/4.03.0/lib/datakit-client/META"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/datakit-client/datakit-client.a" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit-client.a"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/datakit-client/datakit-client.cma" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit-client.cma"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/datakit-client/datakit-client.cmxa" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit-client.cmxa"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/datakit-client/datakit-client.cmxs" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit-client.cmxs"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/datakit-client/datakit_S.cmi" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_S.cmi"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/datakit-client/datakit_S.mli" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_S.mli"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/datakit-client/datakit_client_9p.cmi" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client_9p.cmi"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/datakit-client/datakit_client_9p.cmti" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client_9p.cmti"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/datakit-client/datakit_client_9p.cmx" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client_9p.cmx"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/datakit-client/datakit_client_9p.mli" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_client_9p.mli"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/datakit-client/datakit_path.cmi" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_path.cmi"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/datakit-client/datakit_path.cmti" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_path.cmti"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/datakit-client/datakit_path.cmx" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_path.cmx"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/src/datakit-client/datakit_path.mli" "/home/opam/.opam/4.03.0/lib/datakit-client/datakit_path.mli"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/CHANGES.md" "/home/opam/.opam/4.03.0/doc/datakit-client/CHANGES.md"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/LICENSE.md" "/home/opam/.opam/4.03.0/doc/datakit-client/LICENSE.md"
+ install "-m" "0644" "/home/opam/.opam/4.03.0/build/datakit-client.dev/_build/README.md" "/home/opam/.opam/4.03.0/doc/datakit-client/README.md"
-> installed datakit-client.dev
Done.
 ---> 0733bc1f134a
Removing intermediate container ffac91a77b5f
Step 13 : RUN sudo mkdir /data && sudo chown opam.nogroup /data && chmod 700 /data &&     sudo cp $(opam config exec -- which datakit-mount) /usr/bin/datakit-mount
 ---> Running in 9476bdebf274
 ---> b7f175c7395b
Removing intermediate container 9476bdebf274
Step 14 : CMD bash -c "/usr/bin/datakit-mount -h $(getent hosts datakit | awk '{print $1}')";     bash
 ---> Running in 19262307491a
 ---> b2a8389234de
Removing intermediate container 19262307491a
Successfully built b2a8389234de
[2016-11-22 15:09.11] Success
