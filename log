=== Docker run test-datakit
[2017-02-09 14:35.54] Starting...
[2017-02-09 14:36.09] Running "docker" "run" "--rm" "--entrypoint" "/bin/sh" "sha256:39f244b265ad9359cd182133f8776d8791ca4881759c36f117651b2d124d5c6b" "-c" "opam remove -y \"datakit\" && opam depext -i -y \"conf-gmp\" \"conf-libpcre\" \"conf-perl\" \"conf-autoconf\"&& opam install -y -t --deps-only \"datakit\" && opam install -y -v -t \"datakit\""
The following actions will be performed:
  - remove datakit dev*

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> removed   datakit.dev
Done.
# Run eval `opam env` to update the current shell environment
# Detecting depexts using flags: x86_64 linux alpine
# The following system packages are needed:
#  - autoconf
#  - gmp-dev
#  - pcre-dev
#  - perl
#  - pkgconfig
gmp-dev
pcre-dev
perl
pkgconf
# The following new OS packages need to be installed: autoconf
The following command needs to be run through "sudo":
    apk add autoconf
(1/1) Installing autoconf (2.69-r0)
Executing busybox-1.25.1-r0.trigger
OK: 661 MiB in 107 packages
# OS packages installation successful
# Now letting OPAM install the packages
The following actions will be performed:
  - install conf-gmp        1
  - install conf-which      1                                   [required by conf-autoconf]
  - install conf-perl       1
  - install conf-pkg-config 1.0                                 [required by conf-libpcre]
  - install conf-autoconf   0.1
  - install conf-libpcre    1
===== 6 to install =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed conf-perl.1
-> installed conf-gmp.1
-> installed conf-pkg-config.1.0
-> installed conf-which.1
-> installed conf-libpcre.1
-> installed conf-autoconf.0.1
Done.
# Run eval `opam env` to update the current shell environment

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[NOTE] Ignoring uncommitted changes in /home/opam/src/datakit (`--working-dir' not active).
[datakit.dev] no changes from git+file:///home/opam/src/datakit#master

The following actions will be performed:
  - install   datakit-client   dev*
  - install   menhir           20170101
  - install   mirage-no-xen    1
  - install   zarith           1.4.1
  - install   ocamlify         0.0.1
  - install   ocamlmod         0.0.8
  - install   easy-format      1.2.0
  - install   asn1-combinators 0.1.3
  - install   oasis            0.4.8
  - install   biniou           1.0.12
  - install   atd              1.2.0
  - install   nocrypto         0.5.3
  - install   yojson           1.3.3
  - install   x509             0.5.3
  - install   atdgen           1.10.0
  - install   tls              0.7.1
  - recompile conduit          0.14.5
  - recompile cohttp           0.21.0
  - install   github           2.2.0
  - recompile prometheus-app   0.1
  - recompile git              1.9.3
  - install   github-hooks     0.1.1
  - recompile irmin            0.12.0
  - install   datakit-github   dev*
===== 19 to install | 5 to recompile =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[asn1-combinators.0.1.3] downloaded from https://opam.ocaml.org/2.0/cache
[atd.1.2.0] downloaded from https://opam.ocaml.org/2.0/cache
[cohttp.0.21.0] found in cache
[conduit.0.14.5] found in cache
[datakit-client.dev] synchronised from file:///home/opam/src/datakit
[biniou.1.0.12] downloaded from https://opam.ocaml.org/2.0/cache
[atdgen.1.10.0] downloaded from https://opam.ocaml.org/2.0/cache
[git.1.9.3] found in cache
[easy-format.1.2.0] downloaded from https://opam.ocaml.org/2.0/cache
[datakit-github.dev] synchronised from git+file:///home/opam/src/datakit#master
[irmin.0.12.0] found in cache
[github-hooks.0.1.1] downloaded from https://opam.ocaml.org/2.0/cache
[github.2.2.0] downloaded from https://opam.ocaml.org/2.0/cache
[menhir.20170101] downloaded from https://opam.ocaml.org/2.0/cache
[oasis.0.4.8] downloaded from https://opam.ocaml.org/2.0/cache
[ocamlify.0.0.1] downloaded from https://opam.ocaml.org/2.0/cache
[prometheus-app.0.1] found in cache
[ocamlmod.0.0.8] downloaded from https://opam.ocaml.org/2.0/cache
[x509.0.5.3] downloaded from https://opam.ocaml.org/2.0/cache
[yojson.1.3.3] downloaded from https://opam.ocaml.org/2.0/cache
[zarith.1.4.1] downloaded from https://opam.ocaml.org/2.0/cache
[tls.0.7.1] downloaded from https://opam.ocaml.org/2.0/cache
[nocrypto.0.5.3] downloaded from https://opam.ocaml.org/2.0/cache

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed mirage-no-xen.1
-> installed easy-format.1.2.0
-> installed datakit-client.dev
-> installed ocamlify.0.0.1
-> installed biniou.1.0.12
-> removed   irmin.0.12.0
-> removed   git.1.9.3
-> removed   prometheus-app.0.1
-> removed   cohttp.0.21.0
-> removed   conduit.0.14.5
-> installed ocamlmod.0.0.8
-> installed zarith.1.4.1
-> installed yojson.1.3.3
-> installed asn1-combinators.0.1.3
-> installed menhir.20170101
-> installed atd.1.2.0
-> installed atdgen.1.10.0
-> installed oasis.0.4.8
-> installed nocrypto.0.5.3
-> installed x509.0.5.3
-> installed tls.0.7.1
-> installed conduit.0.14.5
-> installed cohttp.0.21.0
-> installed prometheus-app.0.1
-> installed git.1.9.3
-> installed irmin.0.12.0
-> installed github.2.2.0
-> installed github-hooks.0.1.1
[ERROR] The compilation of datakit-github failed at "ocaml pkg/pkg.ml build --pinned true -n datakit-github".

#=== ERROR while compiling datakit-github.dev =================================#
# command              ocaml pkg/pkg.ml build --pinned true -n datakit-github
# path                 /home/opam/.opam/default/.opam-switch/build/datakit-github.dev
# exit-code            1
# env-file             /home/opam/.opam/log/datakit-github-118-163344.env
# output-file          /home/opam/.opam/log/datakit-github-118-163344.out
### output ###
# pkg.ml: [WARNING] Watermarks: OPAM fields of datakit-github.opam: topkg: no such command. Did you install topkg-care ?
# pkg.ml: [WARNING] file datakit-github.opam: opam field "maintainer" undefined or unsupported
# pkg.ml: [WARNING] file datakit-github.opam: opam field "authors" undefined or unsupported
# pkg.ml: [WARNING] file datakit-github.opam: opam field "homepage" undefined or unsupported
# pkg.ml: [WARNING] file datakit-github.opam: opam field "bug-reports" undefined or unsupported
# pkg.ml: [WARNING] file datakit-github.opam: opam field "doc" undefined or unsupported
# pkg.ml: [WARNING] file datakit-github.opam: opam field "license" undefined or unsupported
# pkg.ml: [WARNING] file datakit-github.opam: opam field "dev-repo" undefined or unsupported
# ocamlfind ocamlopt unix.cmxa -I /home/opam/.opam/default/lib/ocamlbuild /home/opam/.opam/default/lib/ocamlbuild/ocamlbuildlib.cmxa -linkpkg myocamlbuild.ml /home/opam/.opam/default/lib/ocamlbuild/ocamlbuild.cmx -o myocamlbuild
# ocamlfind ocamldep -package 'github github-hooks.unix' -package 'uri datakit-client datakit-server.vfs asetmap prometheus' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules bridge/github/datakit_github_api.ml > bridge/github/datakit_github_api.ml.depends
# ocamlfind ocamldep -package 'github github-hooks.unix' -package 'uri datakit-client datakit-server.vfs asetmap prometheus' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules bridge/github/datakit_github_api.mli > bridge/github/datakit_github_api.mli.depends
# ocamlfind ocamldep -package 'uri datakit-client datakit-server.vfs asetmap prometheus' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules bridge/github/datakit_github.mli > bridge/github/datakit_github.mli.depends
# ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'uri datakit-client datakit-server.vfs asetmap prometheus' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I bridge/github -I src -I src/datakit -o bridge/github/datakit_github.cmi bridge/github/datakit_github.mli
# ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'github github-hooks.unix' -package 'uri datakit-client datakit-server.vfs asetmap prometheus' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I bridge/github -I src -I src/datakit -o bridge/github/datakit_github_api.cmi bridge/github/datakit_github_api.mli
# ocamlfind ocamldep -package 'uri datakit-client datakit-server.vfs asetmap prometheus' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules bridge/github/datakit_github.ml > bridge/github/datakit_github.ml.depends
# ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'uri datakit-client datakit-server.vfs asetmap prometheus' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I bridge/github -I src -I src/datakit -o bridge/github/datakit_github.cmx bridge/github/datakit_github.ml
# + ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'uri datakit-client datakit-server.vfs asetmap prometheus' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I bridge/github -I src -I src/datakit -o bridge/github/datakit_github.cmx bridge/github/datakit_github.ml
# File "bridge/github/datakit_github.ml", line 326, characters 11-17:
# Warning 48: implicit elimination of optional argument ?none
# File "bridge/github/datakit_github.ml", line 1:
# Error: Some fatal warnings were triggered (1 occurrences)
# Command exited with code 2.
# pkg.ml: [ERROR] cmd ['ocamlbuild' '-use-ocamlfind' '-tag' 'debug' '-Is' 'src,src/datakit'
#      '-build-dir' '_build' 'CHANGES.md' 'LICENSE.md' 'README.md'
#      'pkg/META.github' 'datakit-github.opam' 'bridge/github/datakit-github.a'
#      'bridge/github/datakit-github.cmxs' 'bridge/github/datakit-github.cmxa'
#      'bridge/github/datakit-github.cma'
#      'bridge/github/datakit_github_api.cmx'
#      'bridge/github/datakit_github_api.cmi'
#      'bridge/github/datakit_github_api.mli'
#      'bridge/github/datakit-github-client.a'
#      'bridge/github/datakit-github-client.cmxs'
#      'bridge/github/datakit-github-client.cmxa'
#      'bridge/github/datakit-github-client.cma'
#      'bridge/github/datakit_github_sync.cmx'
#      'bridge/github/datakit_github_sync.cmi'
#      'bridge/github/datakit_github_sync.mli'
#      'bridge/github/datakit_github_conv.cmx'
#      'bridge/github/datakit_github_conv.cmi'
#      'bridge/github/datakit_github_conv.mli'
#      'bridge/github/datakit_github.cmx' 'bridge/github/datakit_github.cmi'
#      'bridge/github/datakit_github.mli'
#      'bridge/github/datakit-github-server.a'
#      'bridge/github/datakit-github-server.cmxs'
#      'bridge/github/datakit-github-server.cmxa'
#      'bridge/github/datakit-github-server.cma'
#      'bridge/github/datakit_github_vfs.cmx'
#      'bridge/github/datakit_github_vfs.cmi'
#      'bridge/github/datakit_github_vfs.mli' 'bridge/github/main.native']: exited with 10



=-=- Error report -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
+- The following actions failed
| - build datakit-github dev
+- 
+- The following changes have been performed
| - recompile cohttp           0.21.0
| - recompile conduit          0.14.5
| - recompile git              1.9.3
| - recompile irmin            0.12.0
| - recompile prometheus-app   0.1
| - install   asn1-combinators 0.1.3
| - install   atd              1.2.0
| - install   atdgen           1.10.0
| - install   biniou           1.0.12
| - install   datakit-client   dev
| - install   easy-format      1.2.0
| - install   github           2.2.0
| - install   github-hooks     0.1.1
| - install   menhir           20170101
| - install   mirage-no-xen    1
| - install   nocrypto         0.5.3
| - install   oasis            0.4.8
| - install   ocamlify         0.0.1
| - install   ocamlmod         0.0.8
| - install   tls              0.7.1
| - install   x509             0.5.3
| - install   yojson           1.3.3
| - install   zarith           1.4.1
+- 
# Run eval `opam env` to update the current shell environment

The former state can be restored with:
    opam switch import "/home/opam/.opam/default/.opam-switch/backup/state-20170209143642.export"
[2017-02-09 14:39.13] Failed: Command "docker" "run" "--rm" "--entrypoint" "/bin/sh" "sha256:39f244b265ad9359cd182133f8776d8791ca4881759c36f117651b2d124d5c6b" "-c" "opam remove -y \"datakit\" && opam depext -i -y \"conf-gmp\" \"conf-libpcre\" \"conf-perl\" \"conf-autoconf\"&& opam install -y -t --deps-only \"datakit\" && opam install -y -v -t \"datakit\"" exited with status 4
