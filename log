=== Docker build Dockerfile.ci
[2017-11-16 11:47.20] Starting...
Cloning into '/tmp/with_clone3a371f0f'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at 8031c3d Update to latest versions of conduit, session and ocaml-github-hooks
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 6.128 MBSending build context to Docker daemon 6.685 MBSending build context to Docker daemon 7.242 MBSending build context to Docker daemon 7.799 MBSending build context to Docker daemon 8.356 MBSending build context to Docker daemon 8.913 MBSending build context to Docker daemon 9.018 MB
Step 1/15 : FROM ocaml/opam-dev@sha256:f04c7fbe8fe103b77186f02a5b6c43f9a52e31af26b1211adf86698cfb5bb91f
sha256:f04c7fbe8fe103b77186f02a5b6c43f9a52e31af26b1211adf86698cfb5bb91f: Pulling from ocaml/opam-dev
Digest: sha256:f04c7fbe8fe103b77186f02a5b6c43f9a52e31af26b1211adf86698cfb5bb91f
Status: Image is up to date for ocaml/opam-dev@sha256:f04c7fbe8fe103b77186f02a5b6c43f9a52e31af26b1211adf86698cfb5bb91f
 ---> e190faf31c25
Step 2/15 : RUN git -C /home/opam/opam-repository fetch origin &&     git -C /home/opam/opam-repository reset 3bcfe6c8d --hard &&     opam update -u
 ---> Using cache
 ---> ec45e8a6cb61
Step 3/15 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> a2b033586612
Step 4/15 : RUN sudo apk update && sudo apk add tzdata aspcud
 ---> Using cache
 ---> 6787bafcdedd
Step 5/15 : RUN opam depext -i asl win-eventlog alcotest mtime mirage-flow hvsock     git irmin irmin-unix lwt protocol-9p-unix tyxml redis multipart-form-data     pbkdf tls prometheus-app github git session irmin irmin-unix cmdliner     webmachine alcotest
 ---> Using cache
 ---> e7f3f20ac086
Step 6/15 : ADD . /home/opam/datakit
 ---> f4a0175f4471
Removing intermediate container 5a2cdba34032
Step 7/15 : RUN sudo chown opam /home/opam/datakit
 ---> Running in 56bd1f12b068
 ---> 84e78d2dec42
Removing intermediate container 56bd1f12b068
Step 8/15 : RUN opam pin add datakit-client.dev /home/opam/datakit -y
 ---> Running in 5362ae5bfe0e
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-client/datakit-client.opam from 1.2 to 2.0~beta
[0mdatakit-client is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-client dev* 

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-client.dev
Done.
# Run eval $(opam env) to update the current shell environment
 ---> f28b15165677
Removing intermediate container 5362ae5bfe0e
Step 9/15 : RUN opam pin add datakit-client-9p.dev /home/opam/datakit -y
 ---> Running in dffeacf87dd9
[datakit-client-9p.dev: git]
[datakit-client-9p.dev: git]
[datakit-client-9p.dev: git]
[datakit-client-9p.dev: git]
[datakit-client-9p.dev: git]
[datakit-client-9p.dev: git]
[datakit-client-9p.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-client-9p/datakit-client-9p.opam from 1.2 to 2.0~beta
[0mdatakit-client-9p is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-client-9p dev* 

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-client-9p.dev
Done.
# Run eval $(opam env) to update the current shell environment
 ---> ed08bfc0e5f8
Removing intermediate container dffeacf87dd9
Step 10/15 : RUN opam pin add datakit-server.dev /home/opam/datakit -y
 ---> Running in ba85ac008ba2
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-server/datakit-server.opam from 1.2 to 2.0~beta
[0mdatakit-server is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-server dev* 

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-server.dev
Done.
# Run eval $(opam env) to update the current shell environment
 ---> 4222a2526997
Removing intermediate container ba85ac008ba2
Step 11/15 : RUN opam pin add datakit-server-9p.dev /home/opam/datakit -y
 ---> Running in 5a10d4503df1
[datakit-server-9p.dev: git]
[datakit-server-9p.dev: git]
[datakit-server-9p.dev: git]
[datakit-server-9p.dev: git]
[datakit-server-9p.dev: git]
[datakit-server-9p.dev: git]
[datakit-server-9p.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-server-9p/datakit-server-9p.opam from 1.2 to 2.0~beta
[0mdatakit-server-9p is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-server-9p dev* 

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-server-9p.dev
Done.
# Run eval $(opam env) to update the current shell environment
 ---> 055b523e24a2
Removing intermediate container 5a10d4503df1
Step 12/15 : RUN opam pin add datakit-github.dev /home/opam/datakit -y
 ---> Running in 3f14807a1d68
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-github/datakit-github.opam from 1.2 to 2.0~beta
[0mdatakit-github is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - downgrade jbuilder           1.0+beta15 to 1.0+beta11 [required by datakit-github]
  - install   datakit-client-git 0.11.0                   [required by datakit-github]
  - install   datakit-github     dev*                     
===== 2 to install | 1 to downgrade =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[jbuilder.1.0+beta11] downloaded from https://github.com/janestreet/jbuilder/releases/download/1.0+beta11/jbuilder-1.0.beta11.tbz
[datakit-client-git.0.11.0] downloaded from https://github.com/moby/datakit/releases/download/0.11.0/datakit-0.11.0.tbz

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> removed   jbuilder.1.0+beta15
-> installed jbuilder.1.0+beta11
-> installed datakit-client-git.0.11.0
-> installed datakit-github.dev
Done.
# Run eval $(opam env) to update the current shell environment
 ---> aa40487f58fa
Removing intermediate container 3f14807a1d68
Step 13/15 : RUN opam pin add datakit.dev /home/opam/datakit -y
 ---> Running in 95dfb97eee5c
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit/datakit.opam from 1.2 to 2.0~beta
[0mdatakit is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit dev* 

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit.dev
Done.
# Run eval $(opam env) to update the current shell environment
 ---> 995fc06c5bfe
Removing intermediate container 95dfb97eee5c
Step 14/15 : RUN opam pin add datakit-ci.dev /home/opam/datakit -yt
 ---> Running in bda801b0e56d
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-ci/datakit-ci.opam from 1.2 to 2.0~beta
[0mdatakit-ci is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install session-cohttp     0.4.0 [required by session-webmachine]
  - install redis-lwt          0.3.5 [required by datakit-ci]
  - install camomile           0.8.6 [required by zed]
  - install react              1.2.1 [required by lwt_react, zed]
  - install session-webmachine 0.4.0 [required by datakit-ci]
  - install session-redis-lwt  0.4.0 [required by datakit-ci]
  - install zed                1.5   [required by lambda-term]
  - install lwt_react          1.1.0 [required by lambda-term]
  - install lambda-term        1.11  [required by github-unix]
  - install github-unix        3.0.1 [required by datakit-ci]
  - install datakit-ci         dev*  
===== 11 to install =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[github-unix.3.0.1] downloaded from https://github.com/mirage/ocaml-github/archive/v3.0.1.tar.gz
[lwt_react.1.1.0] found in cache
[lambda-term.1.11] downloaded from https://github.com/diml/lambda-term/archive/1.11.tar.gz
[redis-lwt.0.3.5] found in cache
[session-cohttp.0.4.0] found in cache
[react.1.2.1] downloaded from http://erratique.ch/software/react/releases/react-1.2.1.tbz
[session-redis-lwt.0.4.0] found in cache
[session-webmachine.0.4.0] found in cache
[camomile.0.8.6] downloaded from https://github.com/yoriyuki/Camomile/archive/rel-0.8.6.tar.gz
[zed.1.5] downloaded from https://github.com/diml/zed/archive/1.5.tar.gz

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed camomile.0.8.6
-> installed react.1.2.1
-> installed lwt_react.1.1.0
-> installed redis-lwt.0.3.5
-> installed session-cohttp.0.4.0
-> installed session-redis-lwt.0.4.0
-> installed session-webmachine.0.4.0
-> installed zed.1.5
-> installed lambda-term.1.11
-> installed github-unix.3.0.1
-> installed datakit-ci.dev
Done.
# Run eval $(opam env) to update the current shell environment
 ---> 9cfa78912fe6
Removing intermediate container bda801b0e56d
Step 15/15 : VOLUME /secrets
 ---> Running in 885a740f01dc
 ---> 5e8107872900
Removing intermediate container 885a740f01dc
Successfully built 5e8107872900
[2017-11-16 11:50.57] Success
