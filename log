=== Docker build Dockerfile.ci
[2017-02-07 09:51.09] Starting...
Cloning into '/tmp/with_clonebfa7115'...
done.
HEAD is now at 83488c9 Move Prometheus libraries into a separate repository
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 6.128 MBSending build context to Docker daemon 6.412 MB
Step 1/19 : FROM ocaml/opam:alpine-3.5_ocaml-4.04.0
alpine-3.5_ocaml-4.04.0: Pulling from ocaml/opam
Digest: sha256:29fbcdf704ed24b28d873c491db2d78e1e0eda8e8c81bf1c8bb5a95ddc17a5b6
Status: Image is up to date for ocaml/opam:alpine-3.5_ocaml-4.04.0
 ---> 6d8185a9354a
Step 2/19 : ENV OPAMYES 1 OPAMERRLOGLEN 0
 ---> Using cache
 ---> c07fce1d14f5
Step 3/19 : RUN sudo apk add tzdata
 ---> Using cache
 ---> c7940c385e48
Step 4/19 : RUN opam depext -i opam-devel && sudo cp $(opam config var "opam-devel:lib")/opam /usr/bin/opam
 ---> Using cache
 ---> 66176dfb7526
Step 5/19 : RUN rm -rf ~/.opam
 ---> Using cache
 ---> d24549fe05af
Step 6/19 : RUN opam init -y
 ---> Using cache
 ---> 54aa18bea0ea
Step 7/19 : RUN opam install ocaml -y
 ---> Using cache
 ---> 6f6dde4db1ed
Step 8/19 : RUN opam install depext -y
 ---> Using cache
 ---> c756e2cf4ccf
Step 9/19 : RUN opam pin add -yn datakit-client https://github.com/docker/datakit.git &&     opam pin add -yn github --dev &&     opam pin add -yn datakit-github https://github.com/talex5/datakit.git#split-prometheus &&     opam pin add -yn datakit-server https://github.com/talex5/datakit.git#split-prometheus &&     opam pin add -yn datakit https://github.com/talex5/datakit.git#split-prometheus
 ---> Running in ce769f33a375
[datakit-client: git]
[datakit-client: git]
[datakit-client: git]
[datakit-client: git]
[datakit-client: git]
[datakit-client: git]
[datakit-client] git+https://github.com/docker/datakit.git changed
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/packages.dev/datakit-client/datakit-client.opam from 1.2 to 2.0~alpha3
[0mdatakit-client is now pinned to git+https://github.com/docker/datakit.git (version 0.8.0)
[github: git]
[github: git]
[github: git]
[github: git]
[github: git]
[github: git]
[github] git+https://github.com/mirage/ocaml-github.git changed
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/packages.dev/github/opam from 1.2 to 2.0~alpha3
[0mgithub is now pinned to git+https://github.com/mirage/ocaml-github.git (version 2.2.0)
[datakit-github: git]
[datakit-github: git]
[datakit-github: git]
[datakit-github: git]
[datakit-github: git]
[datakit-github: git]
[datakit-github] git+https://github.com/talex5/datakit.git#split-prometheus changed
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/packages.dev/datakit-github/datakit-github.opam from 1.2 to 2.0~alpha3
[0mdatakit-github is now pinned to git+https://github.com/talex5/datakit.git#split-prometheus (version 0.8.1)
[datakit-server: git]
[datakit-server: git]
[datakit-server: git]
[datakit-server: git]
[datakit-server: git]
[datakit-server: git]
[datakit-server] git+https://github.com/talex5/datakit.git#split-prometheus changed
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/packages.dev/datakit-server/datakit-server.opam from 1.2 to 2.0~alpha3
[0mdatakit-server is now pinned to git+https://github.com/talex5/datakit.git#split-prometheus (version 0.8.0)
[datakit: git]
[datakit: git]
[datakit: git]
[datakit: git]
[datakit: git]
[datakit: git]
[datakit] git+https://github.com/talex5/datakit.git#split-prometheus changed
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/packages.dev/datakit/opam from 1.2 to 2.0~alpha3
[0mdatakit is now pinned to git+https://github.com/talex5/datakit.git#split-prometheus (version 0.8.0)
 ---> 2e81281f8883
Removing intermediate container ce769f33a375
Step 10/19 : ADD datakit-ci.opam /tmp/deps/opam
 ---> 99f7a63f949c
Removing intermediate container 414138b9dc84
Step 11/19 : RUN opam pin add -y tmp /tmp/deps/opam -n
 ---> Running in b5bb48796d2f
Package tmp does not exist, create as a NEW package ? [Y/n] y
[tmp: rsync]
[tmp.~dev] file:///tmp/deps/opam synchronized
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/packages.dev/tmp/opam from 1.2 to 2.0~alpha3
[0mtmp is now pinned to file:///tmp/deps/opam (version ~dev)
 ---> f770b8081325
Removing intermediate container b5bb48796d2f
Step 12/19 : RUN opam depext tmp -y
 ---> Running in d7e9fbe443cd
# Detecting depexts using flags: x86_64 linux alpine
# The following system packages are needed:
#  - gmp-dev
#  - linux-headers
#  - m4
#  - ncurses-dev
#  - openssl-dev
#  - pcre-dev
#  - perl
#  - pkgconfig
m4
ncurses-dev
perl
pkgconf
# The following new OS packages need to be installed: gmp-dev linux-headers openssl-dev pcre-dev
The following command needs to be run through "sudo":
    apk add gmp-dev linux-headers openssl-dev pcre-dev
(1/11) Installing libgmpxx (6.1.1-r0)
(2/11) Installing gmp-dev (6.1.1-r0)
(3/11) Installing linux-headers (4.4.6-r1)
(4/11) Installing zlib-dev (1.2.8-r2)
(5/11) Installing libcrypto1.0 (1.0.2k-r0)
(6/11) Installing libssl1.0 (1.0.2k-r0)
(7/11) Installing openssl-dev (1.0.2k-r0)
(8/11) Installing libpcre16 (8.39-r0)
(9/11) Installing libpcre32 (8.39-r0)
(10/11) Installing libpcrecpp (8.39-r0)
(11/11) Installing pcre-dev (8.39-r0)
Executing busybox-1.25.1-r0.trigger
OK: 659 MiB in 104 packages
# OS packages installation successful
 ---> ce3e7a05b426
Removing intermediate container d7e9fbe443cd
Step 13/19 : RUN opam install --deps-only tmp -y
 ---> Running in 82513708e791

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/1: [tmp: rsync]
[tmp.~dev] file:///tmp/deps/opam already up-to-date
The following dependencies couldn't be met:
  - tmp -> prometheus-app
Your request can't be satisfied:
  - No package matching "prometheus-app" found

No solution found, exiting
The command '/bin/sh -c opam install --deps-only tmp -y' returned a non-zero code: 3
[2017-02-07 09:51.42] Failed: Command "docker" "build" "--pull" "-f" "Dockerfile.ci" "." exited with status 3
