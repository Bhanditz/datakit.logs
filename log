=== Docker build Dockerfile.client
[2017-04-20 08:03.34] Starting...
Cloning into '/tmp/with_clone314c2a99'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at 47fcb4c Merge pull request #524 from samoht/no-http
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.331 MB
Step 1/15 : FROM ocaml/opam:alpine
alpine: Pulling from ocaml/opam
Digest: sha256:8f656a87109cbaca7fd86e405a66b87f10b23df731f08df42742150ef9a8c6dc
Status: Image is up to date for ocaml/opam:alpine
 ---> 2ad2f3609e7e
Step 2/15 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> 8be0bb29d608
Step 3/15 : RUN cd /home/opam/opam-repository && git pull && opam update -y
 ---> Using cache
 ---> 62c3e7be53ab
Step 4/15 : RUN opam depext -ui lwt alcotest conf-libev
 ---> Using cache
 ---> 1a321fe1eb6c
Step 5/15 : COPY datakit-client.opam /home/opam/src/datakit/datakit-client.opam
 ---> Using cache
 ---> 733f38a6bac7
Step 6/15 : RUN opam pin add datakit-client.dev /home/opam/src/datakit -n
 ---> Using cache
 ---> 2a63e0308870
Step 7/15 : RUN opam depext datakit-client &&     opam install datakit-client --deps
 ---> Using cache
 ---> 40cb5ad1a7bb
Step 8/15 : COPY . /home/opam/src/datakit
 ---> 58ae5b0d2cb8
Error removing intermediate container 270d25aa4c2d: Driver aufs failed to remove root filesystem 270d25aa4c2d1a505f923c44077c7457edb5f4b0e738ff3665ccf35a7c674e7f: rename /var/lib/docker/aufs/mnt/005a1d02d67fcf0663b3e4fbf0e564053331cf7ca1a310fd98b5f1916715d064 /var/lib/docker/aufs/mnt/005a1d02d67fcf0663b3e4fbf0e564053331cf7ca1a310fd98b5f1916715d064-removing: device or resource busy
Step 9/15 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in 3b3c11da4663
 ---> 53b72f50fe38
Error removing intermediate container 270d25aa4c2d: No such container: 270d25aa4c2d1a505f923c44077c7457edb5f4b0e738ff3665ccf35a7c674e7f
Step 10/15 : RUN cd /home/opam/src/datakit &&     git diff && git status --porcelain &&     git checkout . && scripts/watermark.sh &&     git status --porcelain
 ---> Running in dd2591d74861
 M src/version.ml
 ---> f9647b2efc84
Error removing intermediate container 270d25aa4c2d: No such container: 270d25aa4c2d1a505f923c44077c7457edb5f4b0e738ff3665ccf35a7c674e7f
Step 11/15 : RUN opam update datakit-client
 ---> Running in a512cb0decb3

=-=- Synchronizing development packages -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
[datakit-client] /home/opam/src/datakit/ synchronized
 ---> 8af39bbce578
Removing intermediate container 3b3c11da4663
Removing intermediate container dd2591d74861
Error removing intermediate container a512cb0decb3: Driver aufs failed to remove root filesystem a512cb0decb37267bf775c3aaca30d3cebb4c22f0b30cc66129650ef80441f27: rename /var/lib/docker/aufs/mnt/19e8520a3a89f5722e2197a6a7b5fe2ab5353569ff9316ad76e8400307b066a6 /var/lib/docker/aufs/mnt/19e8520a3a89f5722e2197a6a7b5fe2ab5353569ff9316ad76e8400307b066a6-removing: device or resource busy
Step 12/15 : RUN opam info datakit-client --raw
 ---> Running in d88e1065feb6
opam-version: "1.2"
name: "datakit-client"
version: "dev"
maintainer: "thomas@gazagnaire.org"
authors: [
  "Thomas Leonard" "Magnus Skjegstad" "David Scott" "Thomas Gazagnaire"
]
homepage: "https://github.com/docker/datakit"
bug-reports: "https://github.com/docker/datakit/issues"
license: "Apache"
doc: "https://docker.github.io/datakit/"
dev-repo: "https://github.com/docker/datakit.git"
build: ["ocaml" "pkg/pkg.ml" "build" "--pinned" "%{pinned}%" "-n" name]
depends: [
  "ocamlfind" {build}
  "ocamlbuild" {build}
  "topkg" {build}
  "base-bytes"
  "astring"
  "logs"
  "uri"
  "rresult"
  "fmt"
  "cstruct" {> "2.2.0"}
  "protocol-9p" {>= "0.7.4"}
  "cmdliner"
]
 ---> d69e8f83ad07
Error removing intermediate container 270d25aa4c2d: No such container: 270d25aa4c2d1a505f923c44077c7457edb5f4b0e738ff3665ccf35a7c674e7f
Step 13/15 : RUN opam install datakit-client.dev -vv
 ---> Running in feedad33dee7

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.04.1/packages.dev/datakit-client"
- sending incremental file list
- 
- sent 8,417 bytes  received 39 bytes  16,912.00 bytes/sec
- total size is 1,315,414  speedup is 155.56
[datakit-client] /home/opam/src/datakit/ already up-to-date
The following actions will be performed:
  - install datakit-client dev*

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.04.1/packages.dev/datakit-client"
- sending incremental file list
- 
- sent 8,417 bytes  received 39 bytes  16,912.00 bytes/sec
- total size is 1,315,414  speedup is 155.56
[datakit-client.dev] /home/opam/src/datakit/ already up-to-date

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: ocaml build] Command started
+ ocaml "pkg/pkg.ml" "build" "--pinned" "true" "-n" "datakit-client" (CWD=/home/opam/.opam/4.04.1/build/datakit-client.dev)
- ocamlfind ocamlopt unix.cmxa -I /home/opam/.opam/4.04.1/lib/ocamlbuild /home/opam/.opam/4.04.1/lib/ocamlbuild/ocamlbuildlib.cmxa -linkpkg myocamlbuild.ml /home/opam/.opam/4.04.1/lib/ocamlbuild/ocamlbuild.cmx -o myocamlbuild
- ocamlfind ocamldep -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit-client/datakit_client_9p.ml > src/datakit-client/datakit_client_9p.ml.depends
- ocamlfind ocamldep -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit-client/datakit_client_9p.mli > src/datakit-client/datakit_client_9p.mli.depends
- ocamlfind ocamldep -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit-client/datakit_S.mli > src/datakit-client/datakit_S.mli.depends
- ocamlfind ocamldep -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit-client/datakit_path.mli > src/datakit-client/datakit_path.mli.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit-client -I src -o src/datakit-client/datakit_path.cmi src/datakit-client/datakit_path.mli
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit-client -I src -o src/datakit-client/datakit_S.cmi src/datakit-client/datakit_S.mli
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit-client -I src -o src/datakit-client/datakit_client_9p.cmi src/datakit-client/datakit_client_9p.mli
- ocamlfind ocamldep -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit-client/datakit_path.ml > src/datakit-client/datakit_path.ml.depends
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit-client -I src -o src/datakit-client/datakit_path.cmx src/datakit-client/datakit_path.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit-client -I src -o src/datakit-client/datakit_client_9p.cmx src/datakit-client/datakit_client_9p.ml
- ocamlfind ocamlopt -a -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -I src/datakit-client src/datakit-client/datakit_path.cmx src/datakit-client/datakit_client_9p.cmx -o src/datakit-client/datakit-client.cmxa
- ocamlfind ocamlopt -shared -linkall -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -I src/datakit-client src/datakit-client/datakit-client.cmxa -o src/datakit-client/datakit-client.cmxs
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit-client -I src -o src/datakit-client/datakit_client_9p.cmo src/datakit-client/datakit_client_9p.ml
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit-client -I src -o src/datakit-client/datakit_path.cmo src/datakit-client/datakit_path.ml
- ocamlfind ocamlc -a -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -I src/datakit-client src/datakit-client/datakit_path.cmo src/datakit-client/datakit_client_9p.cmo -o src/datakit-client/datakit-client.cma
- ocamlfind ocamldep -package 'cmdliner fmt.cli fmt.tty logs.fmt' -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/datakit-client/mount.ml > src/datakit-client/mount.ml.depends
- ocamlfind ocamldep -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/version.ml > src/version.ml.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src -I src/datakit-client -o src/version.cmo src/version.ml
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'cmdliner fmt.cli fmt.tty logs.fmt' -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit-client -I src -o src/datakit-client/mount.cmo src/datakit-client/mount.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src -I src/datakit-client -o src/version.cmx src/version.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'cmdliner fmt.cli fmt.tty logs.fmt' -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49-3 -w A-4-41-44 -I src/datakit-client -I src -o src/datakit-client/mount.cmx src/datakit-client/mount.ml
- ocamlfind ocamlopt -linkpkg -g -package 'cmdliner fmt.cli fmt.tty logs.fmt' -package 'protocol-9p uri' -package 'bytes lwt astring logs result cstruct fmt rresult' -I src -I src/datakit-client src/version.cmx src/datakit-client/mount.cmx -o src/datakit-client/mount.native
+ install "-m" "0755" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/src/datakit-client/mount.native" "/home/opam/.opam/4.04.1/bin/datakit-mount"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/datakit-client.opam" "/home/opam/.opam/4.04.1/lib/datakit-client/opam"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/pkg/META.client" "/home/opam/.opam/4.04.1/lib/datakit-client/META"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/src/datakit-client/datakit-client.a" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit-client.a"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/src/datakit-client/datakit-client.cma" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit-client.cma"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/src/datakit-client/datakit-client.cmxa" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit-client.cmxa"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/src/datakit-client/datakit-client.cmxs" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit-client.cmxs"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/src/datakit-client/datakit_S.cmi" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_S.cmi"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/src/datakit-client/datakit_S.mli" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_S.mli"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/src/datakit-client/datakit_client_9p.cmi" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_client_9p.cmi"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/src/datakit-client/datakit_client_9p.cmti" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_client_9p.cmti"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/src/datakit-client/datakit_client_9p.cmx" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_client_9p.cmx"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/src/datakit-client/datakit_client_9p.mli" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_client_9p.mli"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/src/datakit-client/datakit_path.cmi" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_path.cmi"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/src/datakit-client/datakit_path.cmti" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_path.cmti"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/src/datakit-client/datakit_path.cmx" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_path.cmx"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/src/datakit-client/datakit_path.mli" "/home/opam/.opam/4.04.1/lib/datakit-client/datakit_path.mli"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/CHANGES.md" "/home/opam/.opam/4.04.1/doc/datakit-client/CHANGES.md"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/LICENSE.md" "/home/opam/.opam/4.04.1/doc/datakit-client/LICENSE.md"
+ install "-m" "0644" "/home/opam/.opam/4.04.1/build/datakit-client.dev/_build/README.md" "/home/opam/.opam/4.04.1/doc/datakit-client/README.md"
-> installed datakit-client.dev
Done.
 ---> d7e2098571fe
Error removing intermediate container a512cb0decb3: No such container: a512cb0decb37267bf775c3aaca30d3cebb4c22f0b30cc66129650ef80441f27
Step 14/15 : RUN sudo mkdir /data && sudo chown opam.nogroup /data && chmod 700 /data &&     sudo cp $(opam config exec -- which datakit-mount) /usr/bin/datakit-mount
 ---> Running in b8e4cb9fd266
 ---> 582f77f74d90
Error removing intermediate container a512cb0decb3: No such container: a512cb0decb37267bf775c3aaca30d3cebb4c22f0b30cc66129650ef80441f27
Step 15/15 : CMD bash -c "/usr/bin/datakit-mount -h $(getent hosts datakit | awk '{print $1}')";     bash
 ---> Running in 6c73fe1e8581
 ---> 57debbd3237b
Removing intermediate container feedad33dee7
Error removing intermediate container a512cb0decb3: No such container: a512cb0decb37267bf775c3aaca30d3cebb4c22f0b30cc66129650ef80441f27
Successfully built 57debbd3237b
[2017-04-20 08:04.13] Success
