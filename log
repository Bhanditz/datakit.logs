=== Run docker-build-github on commit 760ba70c051dfa6507fea3c4e6f211751bae0dbf
[2016-11-28 19:14.16] Starting...
Cloning into '/tmp/with_clonea624502'...
done.
HEAD is now at 760ba70 github: add .dirty files to tell the bridge to resync on repo/prs
[2016-11-28 19:14.16] Running "docker" "build" "--pull" "-f" "Dockerfile.github" "."...
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 6.128 MBSending build context to Docker daemon 6.167 MB
Step 1 : FROM docker/datakit:server
server: Pulling from docker/datakit
Digest: sha256:bf23bb00ab6bfd4cfa3383d57c5958945ff8affb4ec177a4a755d9b1efd5b322
Status: Image is up to date for docker/datakit:server
 ---> 5af27af467c6
Step 2 : RUN cd /home/opam/opam-repository && git pull && opam update -y
 ---> Using cache
 ---> e0e5da2db4ea
Step 3 : COPY datakit-github.opam /home/opam/src/datakit/datakit-github.opam
 ---> Using cache
 ---> 2e0641ae2beb
Step 4 : RUN opam pin add datakit-client.dev /home/opam/src/datakit -n
 ---> Using cache
 ---> f8c3fae37eef
Step 5 : RUN opam pin add datakit-github.dev /home/opam/src/datakit -n
 ---> Using cache
 ---> 87d146286daa
Step 6 : RUN opam depext datakit-github && opam install datakit-github --deps
 ---> Using cache
 ---> 9bf92b652b9c
Step 7 : COPY . /home/opam/src/datakit/
 ---> b87fbc6c804d
Removing intermediate container 044b71fd0940
Step 8 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in e61df6a996f1
 ---> de6b4ee71f50
Removing intermediate container e61df6a996f1
Step 9 : RUN cd /home/opam/src/datakit &&     git diff && git status --porcelain &&     git checkout . && scripts/watermark.sh &&     git status --porcelain
 ---> Running in c54c5625b31d
 M src/version.ml
 ---> 44e4af6584b9
Removing intermediate container c54c5625b31d
Step 10 : RUN opam update datakit-github
 ---> Running in 9d8de321aa0d

=-=- Synchronizing development packages -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-github: local] Command started
[datakit-github] /home/opam/src/datakit/ synchronized

Updates available for 4.03.0, apply them with 'opam upgrade':
===== 1 to recompile =====
 ---> 3a1ec82e4752
Removing intermediate container 9d8de321aa0d
Step 11 : RUN opam install datakit-github -vv
 ---> Running in fba563620bf5

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-github: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.03.0/packages.dev/datakit-github"
- sending incremental file list
- 
- sent 7,327 bytes  received 37 bytes  14,728.00 bytes/sec
- total size is 1,188,010  speedup is 161.33
[datakit-github] /home/opam/src/datakit/ already up-to-date
The following actions will be performed:
  - install datakit-github dev*

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-github: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.03.0/packages.dev/datakit-github"
- sending incremental file list
- 
- sent 7,327 bytes  received 37 bytes  14,728.00 bytes/sec
- total size is 1,188,010  speedup is 161.33
[datakit-github.dev] /home/opam/src/datakit/ already up-to-date

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-github: ocaml build] Command started
+ ocaml "pkg/pkg.ml" "build" "--pinned" "true" "-n" "datakit-github" (CWD=/home/opam/.opam/4.03.0/build/datakit-github.dev)
- ocamlfind ocamlopt unix.cmxa -I /home/opam/.opam/4.03.0/lib/ocamlbuild /home/opam/.opam/4.03.0/lib/ocamlbuild/ocamlbuildlib.cmxa -linkpkg myocamlbuild.ml /home/opam/.opam/4.03.0/lib/ocamlbuild/ocamlbuild.cmx -o myocamlbuild
- ocamlfind ocamldep -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules bridge/github/datakit_github.ml > bridge/github/datakit_github.ml.depends
- ocamlfind ocamldep -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules bridge/github/datakit_github.mli > bridge/github/datakit_github.mli.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I bridge/github -I src -I ci/src -I src/datakit -o bridge/github/datakit_github.cmi bridge/github/datakit_github.mli
- ocamlfind ocamldep -package 'github github-hooks.unix' -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules bridge/github/datakit_github_api.ml > bridge/github/datakit_github_api.ml.depends
- ocamlfind ocamldep -package 'github github-hooks.unix' -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules bridge/github/datakit_github_api.mli > bridge/github/datakit_github_api.mli.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'github github-hooks.unix' -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I bridge/github -I src -I ci/src -I src/datakit -o bridge/github/datakit_github_api.cmi bridge/github/datakit_github_api.mli
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I bridge/github -I src -I ci/src -I src/datakit -o bridge/github/datakit_github.cmx bridge/github/datakit_github.ml
- ocamlfind ocamldep -package 'github github-hooks.unix' -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules bridge/github/datakit_github_conv.ml > bridge/github/datakit_github_conv.ml.depends
- ocamlfind ocamldep -package 'github github-hooks.unix' -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules bridge/github/datakit_github_conv.mli > bridge/github/datakit_github_conv.mli.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'github github-hooks.unix' -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I bridge/github -I src -I ci/src -I src/datakit -o bridge/github/datakit_github_conv.cmi bridge/github/datakit_github_conv.mli
- ocamlfind ocamldep -package 'github github-hooks.unix' -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules bridge/github/datakit_github_vfs.ml > bridge/github/datakit_github_vfs.ml.depends
- ocamlfind ocamldep -package 'github github-hooks.unix' -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules bridge/github/datakit_github_vfs.mli > bridge/github/datakit_github_vfs.mli.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'github github-hooks.unix' -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I bridge/github -I src -I ci/src -I src/datakit -o bridge/github/datakit_github_vfs.cmi bridge/github/datakit_github_vfs.mli
- ocamlfind ocamldep -package 'github github-hooks.unix' -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules bridge/github/datakit_github_sync.ml > bridge/github/datakit_github_sync.ml.depends
- ocamlfind ocamldep -package 'github github-hooks.unix' -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules bridge/github/datakit_github_sync.mli > bridge/github/datakit_github_sync.mli.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'github github-hooks.unix' -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I bridge/github -I src -I ci/src -I src/datakit -o bridge/github/datakit_github_sync.cmi bridge/github/datakit_github_sync.mli
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'github github-hooks.unix' -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I bridge/github -I src -I ci/src -I src/datakit -o bridge/github/datakit_github_conv.cmx bridge/github/datakit_github_conv.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'github github-hooks.unix' -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I bridge/github -I src -I ci/src -I src/datakit -o bridge/github/datakit_github_api.cmx bridge/github/datakit_github_api.ml
- + ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'github github-hooks.unix' -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I bridge/github -I src -I ci/src -I src/datakit -o bridge/github/datakit_github_api.cmx bridge/github/datakit_github_api.ml
- File "bridge/github/datakit_github_api.ml", line 395, characters 3-22:
- Error: Unbound value Github.Repo.get_ref
- Hint: Did you mean get_tag?
- Command exited with code 2.
- pkg.ml: [ERROR] cmd ['ocamlbuild' '-use-ocamlfind' '-tag' 'debug' '-build-dir' '_build'
-      'CHANGES.md' 'LICENSE.md' 'README.md' 'pkg/META.github'
-      'datakit-github.opam' 'bridge/github/datakit-github.a'
-      'bridge/github/datakit-github.cmxs' 'bridge/github/datakit-github.cmxa'
-      'bridge/github/datakit-github.cma'
-      'bridge/github/datakit_github_sync.cmx'
-      'bridge/github/datakit_github_sync.cmi'
-      'bridge/github/datakit_github_sync.mli'
-      'bridge/github/datakit_github_vfs.cmx'
-      'bridge/github/datakit_github_vfs.cmi'
-      'bridge/github/datakit_github_vfs.mli'
-      'bridge/github/datakit_github_conv.cmx'
-      'bridge/github/datakit_github_conv.cmi'
-      'bridge/github/datakit_github_conv.mli'
-      'bridge/github/datakit_github_api.cmx'
-      'bridge/github/datakit_github_api.cmi'
-      'bridge/github/datakit_github_api.mli'
-      'bridge/github/datakit_github.cmx' 'bridge/github/datakit_github.cmi'
-      'bridge/github/datakit_github.mli' 'bridge/github/main.native']: exited with 10
[91m[ERROR] The compilation of datakit-github failed at "ocaml pkg/pkg.ml build
        --pinned true -n datakit-github".
[0m[91m
#=== ERROR while installing datakit-github.dev ================================#
# opam-version         1.2.2 (58ef3b8213100953848d362f7120a30356d7f77d)
# os                   linux
# command              ocaml pkg/pkg.ml build --pinned true -n datakit-github
# path                 /home/opam/.opam/4.03.0/build/datakit-github.dev
# compiler             4.03.0
# exit-code            1
# env-file             /home/opam/.opam/4.03.0/build/datakit-github.dev/datakit-github-7-ffb3fd.env
# stdout-file          /home/opam/.opam/4.03.0/build/datakit-github.dev/datakit-github-7-ffb3fd.out
# stderr-file          /home/opam/.opam/4.03.0/build/datakit-github.dev/datakit-github-7-ffb3fd.err
### stdout ###
# [...]
# ocamlfind ocamldep -package 'github github-hooks.unix' -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules bridge/github/datakit_github_sync.ml > bridge/github/datakit_github_sync.ml.depends
# ocamlfind ocamldep -package 'github github-hooks.unix' -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules bridge/github/datakit_github_sync.mli > bridge/github/datakit_github_sync.mli.depends
# ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'github github-hooks.unix' -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I bridge/github -I src -I ci/src -I src/datakit -o bridge/github/datakit_github_sync.cmi bridge/github/datakit_github_sync.mli
# ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'github github-hooks.unix' -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I bridge/github -I src -I ci/src -I src/datakit -o bridge/github/datakit_github_conv.cmx bridge/github/datakit_github_conv.ml
# ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'github github-hooks.unix' -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I bridge/github -I src -I ci/src -I src/datakit -o bridge/github/datakit_github_api.cmx bridge/github/datakit_github_api.ml
# + ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'github github-hooks.unix' -package 'uri datakit-client datakit-server.vfs' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I bridge/github -I src -I ci/src -I src/datakit -o bridge/github/datakit_github_api.cmx bridge/github/datakit_github_api.ml
# File "bridge/github/datakit_github_api.ml", line 395, characters 3-22:
# Error: Unbound value Github.Repo.get_ref
# Hint: Did you mean get_tag?
# Command exited with code 2.
### stderr ###
# pkg.ml: [ERROR] cmd ['ocamlbuild' '-use-ocamlfind' '-tag' 'debug' '-build-dir' '_build'
# [...]
#      'bridge/github/datakit_github_vfs.mli'
#      'bridge/github/datakit_github_conv.cmx'
#      'bridge/github/datakit_github_conv.cmi'
#      'bridge/github/datakit_github_conv.mli'
#      'bridge/github/datakit_github_api.cmx'
#      'bridge/github/datakit_github_api.cmi'
#      'bridge/github/datakit_github_api.mli'
#      'bridge/github/datakit_github.cmx' 'bridge/github/datakit_github.cmi'
#      'bridge/github/datakit_github.mli' 'bridge/github/main.native']: exited with 10

[0m

=-=- Error report -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
The following actions failed
  - install datakit-github dev
No changes have been performed
[91m'opam install datakit-github -vv' failed.
[0mThe command '/bin/sh -c opam install datakit-github -vv' returned a non-zero code: 4
[2016-11-28 19:14.50] Failed: Command "docker" "build" "--pull" "-f" "Dockerfile.github" "." exited with status 1
