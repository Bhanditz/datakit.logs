=== Docker build Dockerfile
[2017-04-25 22:50.33] Starting...
Cloning into '/tmp/with_clone16725307'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at afda918 Use jbuilder
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.081 MB
Step 1/30 : FROM ocaml/opam-dev@sha256:337fd0f78b182a12da3f66d9d5ca075dbb79df414fc01d6a0aee99ffeb35552a
sha256:337fd0f78b182a12da3f66d9d5ca075dbb79df414fc01d6a0aee99ffeb35552a: Pulling from ocaml/opam-dev
Digest: sha256:337fd0f78b182a12da3f66d9d5ca075dbb79df414fc01d6a0aee99ffeb35552a
Status: Image is up to date for ocaml/opam-dev@sha256:337fd0f78b182a12da3f66d9d5ca075dbb79df414fc01d6a0aee99ffeb35552a
 ---> 9107a2254d1d
Step 2/30 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> 90b67f82c489
Step 3/30 : RUN sudo apk add tzdata aspcud gmp-dev perl
 ---> Using cache
 ---> fff031e34a88
Step 4/30 : RUN opam pin add hvsock.0.14.0 -n https://github.com/mirage/ocaml-hvsock.git#88397c37a910c61507a9655ed8413c1692294da0
 ---> Using cache
 ---> a0c3d8deec46
Step 5/30 : RUN opam pin add irmin.1.1.0 -n https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0
 ---> Using cache
 ---> 3bf883894542
Step 6/30 : RUN opam pin add irmin-git.1.1.0 -n https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0
 ---> Using cache
 ---> 1ccc0ba0bf22
Step 7/30 : RUN opam pin add -yn protocol-9p.0.9.0 'https://github.com/talex5/ocaml-9p.git#ping-mirage-3'
 ---> Using cache
 ---> b838aad27cb7
Step 8/30 : RUN opam depext -ui lwt inotify alcotest conf-libev lambda-term asl win-eventlog camlzip irmin-watcher mtime mirage-flow conduit hvsock cohttp prometheus-app git irmin cmdliner protocol-9p channel rresult win-error named-pipe
 ---> Using cache
 ---> 52acce475392
Step 9/30 : COPY check-libev.ml /tmp/check-libev.ml
 ---> Using cache
 ---> 160f7abd7470
Step 10/30 : RUN opam config exec -- ocaml /tmp/check-libev.ml
 ---> Using cache
 ---> 0eacad368f36
Step 11/30 : COPY datakit.opam /home/opam/src/datakit/
 ---> Using cache
 ---> cc0eb990fc2e
Step 12/30 : COPY datakit-client.opam /home/opam/src/datakit/datakit-client.opam
 ---> Using cache
 ---> be7286be13e4
Step 13/30 : COPY datakit-server.opam /home/opam/src/datakit/datakit-server.opam
 ---> Using cache
 ---> 06c6a5cd0341
Step 14/30 : COPY datakit-github.opam /home/opam/src/datakit/datakit-github.opam
 ---> Using cache
 ---> a5f6c20b5275
Step 15/30 : RUN opam pin add datakit-server.dev /home/opam/src/datakit -yn &&     opam pin add datakit-client.dev /home/opam/src/datakit -yn &&     opam pin add datakit.dev /home/opam/src/datakit -yn        &&     opam pin add datakit-github.dev /home/opam/src/datakit -yn
 ---> Using cache
 ---> 6e1f40acd9f3
Step 16/30 : RUN opam depext -y datakit
 ---> Using cache
 ---> be81f5eb5d26
Step 17/30 : RUN opam install -y --deps-only datakit-client datakit-server
 ---> Using cache
 ---> 6ace1208848d
Step 18/30 : COPY . /home/opam/src/datakit
 ---> 2b5011ab12f8
Error removing intermediate container 6c5df8f48836: Driver aufs failed to remove root filesystem 6c5df8f48836c5418497a597432bfc1ced461dc6b47ea938764717e4159cf144: rename /var/lib/docker/aufs/mnt/41a606c63207a7401d7a59ce22abea7e208ba09498c961e2e7df6ed11c2a64ee /var/lib/docker/aufs/mnt/41a606c63207a7401d7a59ce22abea7e208ba09498c961e2e7df6ed11c2a64ee-removing: device or resource busy
Step 19/30 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in 987852ec2462
 ---> 0d7154a6e25b
Error removing intermediate container 6c5df8f48836: No such container: 6c5df8f48836c5418497a597432bfc1ced461dc6b47ea938764717e4159cf144
Step 20/30 : RUN cd /home/opam/src/datakit &&     scripts/watermark.sh &&     git status --porcelain
 ---> Running in 2d73d0d800c1
 M src/version.ml
 ---> c430e4bd9ea6
Error removing intermediate container 6c5df8f48836: No such container: 6c5df8f48836c5418497a597432bfc1ced461dc6b47ea938764717e4159cf144
Step 21/30 : RUN opam install datakit-client datakit-github alcotest
 ---> Running in f7815ad1bc9a

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client.dev] synchronised from file:///home/opam/src/datakit
[datakit-github.dev] synchronised from file:///home/opam/src/datakit

[91m[NOTE] Package alcotest is already installed (current version is 0.7.2).
[0mThe following actions will be performed:
  - install datakit-client dev*
  - install datakit-github dev*
===== 2 to install =====
[datakit-client.dev] synchronised from file:///home/opam/src/datakit
[datakit-github.dev] synchronised from file:///home/opam/src/datakit

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-client.dev
-> installed datakit-github.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> d7822d0dd08e
Error removing intermediate container 6c5df8f48836: No such container: 6c5df8f48836c5418497a597432bfc1ced461dc6b47ea938764717e4159cf144
Step 22/30 : RUN opam install datakit -ytv
 ---> Running in a0f8863bee1a

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/1: [datakit.dev: rsync]
[datakit.dev] synchronised from file:///home/opam/src/datakit

The following actions will be performed:
  - install irmin-git      1.1.0*                               [required by datakit]
  - install datakit-server dev*                                 [required by datakit]
  - install datakit        dev*
===== 3 to install =====
Processing  1/3: [datakit.dev: rsync]
Processing  2/3: [datakit.dev: rsync] [datakit-server.dev: rsync]
Processing  3/3: [datakit.dev: rsync] [datakit-server.dev: rsync] [irmin-git.1.1.0: git]
[datakit.dev] synchronised from file:///home/opam/src/datakit
Processing  3/3: [datakit-server.dev: rsync] [irmin-git.1.1.0: git]
[datakit-server.dev] synchronised from file:///home/opam/src/datakit
Processing  3/3: [irmin-git.1.1.0: git]
[irmin-git.1.1.0] synchronised from git+https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/6: [datakit-server: ocaml build]
+ ocaml "pkg/pkg.ml" "build" "--pinned" "true" "-n" "datakit-server" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit-server.dev)
-> compiled  datakit-server.dev
Processing  2/6: [irmin-git: ocaml build]
+ ocaml "pkg/pkg.ml" "build" "--pinned" "true" "-n" "irmin-git" (CWD=/home/opam/.opam/default/.opam-switch/build/irmin-git.1.1.0)
- pkg.ml: [WARNING] Watermarks: opam fields of irmin-git.opam: topkg: no such command. Did you install topkg-care ?
- pkg.ml: [WARNING] file irmin-git.opam: opam field "maintainer" undefined or unsupported
- pkg.ml: [WARNING] file irmin-git.opam: opam field "authors" undefined or unsupported
- pkg.ml: [WARNING] file irmin-git.opam: opam field "homepage" undefined or unsupported
- pkg.ml: [WARNING] file irmin-git.opam: opam field "bug-reports" undefined or unsupported
- pkg.ml: [WARNING] file irmin-git.opam: opam field "doc" undefined or unsupported
- pkg.ml: [WARNING] file irmin-git.opam: opam field "license" undefined or unsupported
- pkg.ml: [WARNING] file irmin-git.opam: opam field "dev-repo" undefined or unsupported
- ocamlfind ocamldep -package 'git irmin' -package 'cstruct fmt hex logs lwt ocamlgraph re astring uri jsonm' -package irmin -modules src-git/irmin_git.ml > src-git/irmin_git.ml.depends
- ocamlfind ocamldep -package 'git irmin' -package 'cstruct fmt hex logs lwt ocamlgraph re astring uri jsonm' -package irmin -modules src-git/irmin_git.mli > src-git/irmin_git.mli.depends
- ocamlfind ocamlc -c -g -bin-annot -short-paths -strict-sequence -package 'git irmin' -package 'cstruct fmt hex logs lwt ocamlgraph re astring uri jsonm' -warn-error +1..49+60 -w A-4-41-44-7 -package irmin -I src-git -o src-git/irmin_git.cmi src-git/irmin_git.mli
- ocamlfind ocamlopt -c -g -bin-annot -short-paths -strict-sequence -package 'git irmin' -package 'cstruct fmt hex logs lwt ocamlgraph re astring uri jsonm' -warn-error +1..49+60 -w A-4-41-44-7 -package irmin -I src-git -o src-git/irmin_git.cmx src-git/irmin_git.ml
- ocamlfind ocamlopt -a -package 'git irmin' -package 'cstruct fmt hex logs lwt ocamlgraph re astring uri jsonm' -package irmin -I src-git src-git/irmin_git.cmx -o src-git/irmin-git.cmxa
- ocamlfind ocamlopt -shared -linkall -package 'git irmin' -package 'cstruct fmt hex logs lwt ocamlgraph re astring uri jsonm' -package irmin -I src-git src-git/irmin-git.cmxa -o src-git/irmin-git.cmxs
- ocamlfind ocamlc -c -g -bin-annot -short-paths -strict-sequence -package 'git irmin' -package 'cstruct fmt hex logs lwt ocamlgraph re astring uri jsonm' -warn-error +1..49+60 -w A-4-41-44-7 -package irmin -I src-git -o src-git/irmin_git.cmo src-git/irmin_git.ml
- ocamlfind ocamlc -a -package 'git irmin' -package 'cstruct fmt hex logs lwt ocamlgraph re astring uri jsonm' -package irmin -I src-git src-git/irmin_git.cmo -o src-git/irmin-git.cma
- pkg.ml: [WARNING] Package description has 8 warning(s), see log above.
-> compiled  irmin-git.1.1.0
-> installed datakit-server.dev
-> installed irmin-git.1.1.0
Processing  5/6: [datakit: ocaml build]
+ ocaml "pkg/pkg.ml" "build" "--pinned" "true" "--tests" "false" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit.dev)
+ ocaml "pkg/pkg.ml" "build" "--pinned" "true" "--tests" "true" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit.dev)
Processing  5/6: [datakit: ocaml test]
+ ocaml "pkg/pkg.ml" "test" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit.dev)
- pkg.ml: No tests to run.
-> compiled  datakit.dev
-> installed datakit.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 470bb054dfa4
Error removing intermediate container 6c5df8f48836: No such container: 6c5df8f48836c5418497a597432bfc1ced461dc6b47ea938764717e4159cf144
Step 23/30 : RUN sudo cp $(opam config exec -- which datakit) /usr/bin/datakit &&     sudo cp $(opam config exec -- which datakit-mount) /usr/bin/datakit-mount
 ---> Running in 1608e7f3562b
[91mBusyBox v1.25.1 (2016-10-26 16:15:20 GMT) multi-call binary.

Usage: cp [OPTIONS] SOURCE... DEST

Copy SOURCE(s) to DEST

	-a	Same as -dpR
	-R,-r	Recurse
	-d,-P	Preserve symlinks (default if -R)
	-L	Follow all symlinks
	-H	Follow symlinks on command line
	-p	Preserve file attributes if possible
	-f	Overwrite
	-i	Prompt before overwrite
	-l,-s	Create (sym)links
	-u	Copy only newer files
[0mThe command '/bin/sh -c sudo cp $(opam config exec -- which datakit) /usr/bin/datakit &&     sudo cp $(opam config exec -- which datakit-mount) /usr/bin/datakit-mount' returned a non-zero code: 1
[2017-04-25 22:51.24] Failed: Command "docker" "build" "--pull" "-f" "Dockerfile" "." exited with status 1
