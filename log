=== Docker build Dockerfile.ci
[2017-06-01 11:50.38] Starting...
Cloning into '/tmp/with_clone2bccbeec'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at d4cc23d Merge pull request #585 from samoht/doc
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 6.128 MBSending build context to Docker daemon 6.685 MBSending build context to Docker daemon 7.242 MBSending build context to Docker daemon 7.799 MBSending build context to Docker daemon 7.821 MB
Step 1/23 : FROM ocaml/opam-dev@sha256:1dd4440b3e5f182f705cb5a74f9d4e860c2842b45ed72c199de89a894d13f522
sha256:1dd4440b3e5f182f705cb5a74f9d4e860c2842b45ed72c199de89a894d13f522: Pulling from ocaml/opam-dev
Digest: sha256:1dd4440b3e5f182f705cb5a74f9d4e860c2842b45ed72c199de89a894d13f522
Status: Image is up to date for ocaml/opam-dev@sha256:1dd4440b3e5f182f705cb5a74f9d4e860c2842b45ed72c199de89a894d13f522
 ---> f03bf6a81395
Step 2/23 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> be24092c1ade
Step 3/23 : RUN sudo apk add tzdata aspcud
 ---> Using cache
 ---> fb977fe6cf1e
Step 4/23 : RUN opam pin add git.dev --dev -n
 ---> Using cache
 ---> 895d36113164
Step 5/23 : RUN opam pin add git-unix.dev --dev -n
 ---> Using cache
 ---> 6d91b9423869
Step 6/23 : RUN opam pin add irmin.1.2.0 -n https://github.com/mirage/irmin.git#81ffa256d3aa6b73b689609f7a5ff01c298fe821
 ---> Using cache
 ---> 37c2174c7130
Step 7/23 : RUN opam pin add irmin-mem.1.2.0 -n https://github.com/mirage/irmin.git#81ffa256d3aa6b73b689609f7a5ff01c298fe821
 ---> Using cache
 ---> 13dfd291b03e
Step 8/23 : RUN opam pin add irmin-fs.1.2.0 -n https://github.com/mirage/irmin.git#81ffa256d3aa6b73b689609f7a5ff01c298fe821
 ---> Using cache
 ---> 6b804e3a3eae
Step 9/23 : RUN opam pin add irmin-http.1.2.0 -n https://github.com/mirage/irmin.git#81ffa256d3aa6b73b689609f7a5ff01c298fe821
 ---> Using cache
 ---> 04643dd0a58e
Step 10/23 : RUN opam pin add irmin-git.1.2.0 -n https://github.com/mirage/irmin.git#81ffa256d3aa6b73b689609f7a5ff01c298fe821
 ---> Using cache
 ---> 998a3f8f8ee5
Step 11/23 : RUN opam pin add irmin-unix.1.2.0 -n https://github.com/mirage/irmin.git#81ffa256d3aa6b73b689609f7a5ff01c298fe821
 ---> Using cache
 ---> 046542d5dfe0
Step 12/23 : RUN opam pin add protocol-9p-unix.dev --dev -n
 ---> Using cache
 ---> f4ef1ccac99f
Step 13/23 : RUN opam depext -i asl win-eventlog alcotest mtime mirage-flow hvsock     git irmin irmin-unix lwt protocol-9p-unix tyxml redis multipart-form-data     pbkdf tls prometheus-app github git session irmin irmin-unix cmdliner     webmachine alcotest
 ---> Using cache
 ---> adf052ead044
Step 14/23 : ADD . /home/opam/datakit
 ---> 13959e2d21cd
Removing intermediate container a2c586889d52
Step 15/23 : RUN sudo chown opam /home/opam/datakit
 ---> Running in d1a9a1311155
 ---> a66e970bee9a
Removing intermediate container d1a9a1311155
Step 16/23 : RUN opam pin add -k git datakit-client.dev /home/opam/datakit -y
 ---> Running in 8f2ac8eec004
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-client/datakit-client.opam from 1.2 to 2.0~beta
[0mdatakit-client is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-client dev*
[datakit-client.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-client.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> bdd53f97ccde
Removing intermediate container 8f2ac8eec004
Step 17/23 : RUN opam pin add -k git datakit-client-9p.dev /home/opam/datakit -y
 ---> Running in 8e3e4f2de2fd
Package datakit-client-9p does not exist, create as a NEW package ? [Y/n] y
[datakit-client-9p.dev: git]
[datakit-client-9p.dev: git]
[datakit-client-9p.dev: git]
[datakit-client-9p.dev: git]
[datakit-client-9p.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-client-9p/datakit-client-9p.opam from 1.2 to 2.0~beta
[0mdatakit-client-9p is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-client-9p dev*
[datakit-client-9p.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-client-9p.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 18f5f3e77b25
Error removing intermediate container 8e3e4f2de2fd: Driver aufs failed to remove root filesystem 8e3e4f2de2fddf058f528fe650e42722d8d552ed6849374a74874d8cae3f6f57: rename /var/lib/docker/aufs/mnt/95b60664164cc729efa4e53fff11ec36a01e2aa0fd5cf65d5f0baeda6150d9b0 /var/lib/docker/aufs/mnt/95b60664164cc729efa4e53fff11ec36a01e2aa0fd5cf65d5f0baeda6150d9b0-removing: device or resource busy
Step 18/23 : RUN opam pin add -k git datakit-server.dev /home/opam/datakit -y
 ---> Running in 6ec40906ac34
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-server/datakit-server.opam from 1.2 to 2.0~beta
[0mdatakit-server is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-server dev*
[datakit-server.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-server.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 62e527297088
Error removing intermediate container 8e3e4f2de2fd: No such container: 8e3e4f2de2fddf058f528fe650e42722d8d552ed6849374a74874d8cae3f6f57
Step 19/23 : RUN opam pin add -k git datakit-server-9p.dev /home/opam/datakit -y
 ---> Running in 870385df430b
Package datakit-server-9p does not exist, create as a NEW package ? [Y/n] y
[datakit-server-9p.dev: git]
[datakit-server-9p.dev: git]
[datakit-server-9p.dev: git]
[datakit-server-9p.dev: git]
[datakit-server-9p.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-server-9p/datakit-server-9p.opam from 1.2 to 2.0~beta
[0mdatakit-server-9p is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-server-9p dev*
[datakit-server-9p.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-server-9p.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> d02b1b939de6
Error removing intermediate container 8e3e4f2de2fd: No such container: 8e3e4f2de2fddf058f528fe650e42722d8d552ed6849374a74874d8cae3f6f57
Step 20/23 : RUN opam pin add -k git datakit-github.dev /home/opam/datakit -y
 ---> Running in 3a7702240b34
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-github/datakit-github.opam from 1.2 to 2.0~beta
[0mdatakit-github is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-github dev*
[datakit-github.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-github.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> ce3d306fb792
Error removing intermediate container 8e3e4f2de2fd: No such container: 8e3e4f2de2fddf058f528fe650e42722d8d552ed6849374a74874d8cae3f6f57
Step 21/23 : RUN opam pin add -k git datakit.dev /home/opam/datakit -y
 ---> Running in 5be4c0cf5a86
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit/datakit.opam from 1.2 to 2.0~beta
[0mdatakit is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install irmin-mem 1.2.0*                                    [required by datakit]
  - install datakit   dev*
===== 2 to install =====
[datakit.dev] synchronised from git+file:///home/opam/datakit#master
[irmin-mem.1.2.0] synchronised from git+https://github.com/mirage/irmin.git#81ffa256d3aa6b73b689609f7a5ff01c298fe821

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed irmin-mem.1.2.0
-> installed datakit.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 5b0034decc2a
Removing intermediate container 6ec40906ac34
Removing intermediate container 870385df430b
Removing intermediate container 3a7702240b34
Removing intermediate container 5be4c0cf5a86
Error removing intermediate container 8e3e4f2de2fd: No such container: 8e3e4f2de2fddf058f528fe650e42722d8d552ed6849374a74874d8cae3f6f57
Step 22/23 : RUN opam pin add -k git datakit-ci.dev /home/opam/datakit -yt
 ---> Running in c2fcd6557230
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-ci/datakit-ci.opam from 1.2 to 2.0~beta
[0mdatakit-ci is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install   redis-lwt  0.3.5                                  [required by datakit-ci]
  - recompile session    0.3.2                                  [uses redis-lwt]
  - install   datakit-ci dev*
===== 2 to install | 1 to recompile =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[redis-lwt.0.3.5] found in cache
[session.0.3.2] found in cache
[datakit-ci.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> removed   session.0.3.2
-> installed redis-lwt.0.3.5
-> installed session.0.3.2
-> installed datakit-ci.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 903099328057
Error removing intermediate container 8e3e4f2de2fd: No such container: 8e3e4f2de2fddf058f528fe650e42722d8d552ed6849374a74874d8cae3f6f57
Step 23/23 : VOLUME /secrets
 ---> Running in 9f8e7515c3f1
 ---> d7cd5a8b4106
Error removing intermediate container 8e3e4f2de2fd: No such container: 8e3e4f2de2fddf058f528fe650e42722d8d552ed6849374a74874d8cae3f6f57
Successfully built d7cd5a8b4106
[2017-06-01 11:53.03] Success
