=== Docker build Dockerfile.client
[2017-11-20 11:01.47] Starting...
Cloning into '/tmp/with_clone39e54645'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at e579862 Simplify Dockerfiles using new features from opam2
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 6.128 MBSending build context to Docker daemon 6.685 MBSending build context to Docker daemon 7.242 MBSending build context to Docker daemon 7.799 MBSending build context to Docker daemon 8.356 MBSending build context to Docker daemon 8.913 MBSending build context to Docker daemon 9.059 MB
Step 1/16 : FROM ocaml/opam-dev:alpine-3.5_ocaml-4.05.0
alpine-3.5_ocaml-4.05.0: Pulling from ocaml/opam-dev
Digest: sha256:c670cf0cecaeffc8ba4dec59bd89ba59c17de29a848b11156c2c241e9f8661a7
Status: Image is up to date for ocaml/opam-dev:alpine-3.5_ocaml-4.05.0
 ---> 58ba28296f15
Step 2/16 : RUN sudo apk add --no-cache tzdata aspcud gmp-dev perl libev-dev m4
 ---> Using cache
 ---> b60d3cbf57ba
Step 3/16 : RUN git -C /home/opam/opam-repository fetch origin &&     git -C /home/opam/opam-repository reset beba7fea --hard &&     opam update -u
 ---> Using cache
 ---> 31bf106271c0
Step 4/16 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> cbdb481a8d8c
Step 5/16 : RUN opam install alcotest lwt conf-libev inotify
 ---> Using cache
 ---> b38c41380436
Step 6/16 : COPY check-libev.ml /tmp/check-libev.ml
 ---> Using cache
 ---> f2f25cb9cddb
Step 7/16 : RUN opam config exec -- ocaml /tmp/check-libev.ml
 ---> Using cache
 ---> 6f08bf93985b
Step 8/16 : COPY *.opam /home/opam/src/datakit/
 ---> Using cache
 ---> af90049d3d1c
Step 9/16 : RUN opam pin add /home/opam/src/datakit/ -n
 ---> Using cache
 ---> 6ebcaef1b363
Step 10/16 : RUN opam install datakit-client-git datakit-client-9p --deps -t
 ---> Running in 9cc279dcdd78

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client-9p.0.11.0] no changes from file:///home/opam/src/datakit
[datakit-client-git.0.11.0] no changes from file:///home/opam/src/datakit

The following actions will be performed:
  - install conf-gmp              1          
  - install mirage-no-xen         1          
  - install ocaml-compiler-libs   v0.9.0     
  - install re                    1.7.1      
  - install rresult               0.5.0      
  - install mirage-flow           1.3.0      
  - install mirage-device         1.1.0      
  - install ocb-stubblr           0.1.1      
  - install base-num              base       
  - install mtime                 1.1.0      
  - install cppo_ocamlbuild       1.6.0      
  - install stringext             1.5.0      
  - install mirage-no-solo5       1          
  - install magic-mime            1.1.0      
  - install win-error             0.2        
  - install octavius              1.1.0      
  - install decompress            0.7        
  - install conf-perl             1          
  - install ppx_tools             5.0+4.05.0 
  - install uutf                  1.0.1      
  - install ocamlgraph            1.8.8      
  - install logs                  0.6.2      
  - install asetmap               0.8.1      
  - install ocplib-endian         1.0        
  - install ppx_derivers          1.0        
  - install ppx_traverse_builtins v0.9.0     
  - install base64                2.2.0      
  - install ppx_ast               v0.9.1     
  - install mirage-channel        3.1.0      
  - install mirage-kv             1.1.1      
  - install mirage-clock          1.3.0      
  - install named-pipe            0.4.0      
  - install cpuid                 0.1.1      
  - install num                   0          
  - install zarith                1.7        
  - install jsonm                 1.0.1      
  - install irmin-watcher         0.3.0      
  - install prometheus            0.4        
  - install ppx_deriving          4.2        
  - install sexplib               v0.9.3     
  - install cstruct               3.1.1      
  - install base                  v0.9.4     
  - install mstruct               1.4.0      
  - install mirage-kv-lwt         1.1.0      
  - install mirage-flow-lwt       1.4.0      
  - install hex                   1.2.0      
  - install datakit-client        0.11.0*    
  - install cstruct-lwt           3.2.0      
  - install stdio                 v0.9.1     
  - install ppx_core              v0.9.0     
  - install ppx_optcomp           v0.9.0     
  - install ppx_driver            v0.9.1     
  - install ppx_metaquot          v0.9.0     
  - install fieldslib             v0.9.0     
  - install ppx_type_conv         v0.9.0     
  - install ppx_js_style          v0.9.0     
  - install ppx_sexp_conv         v0.9.0     
  - install ppx_fields_conv       v0.9.0     
  - install ppx_enumerate         v0.9.0     
  - install ppx_compare           v0.9.0     
  - install uri                   1.9.5      
  - install nocrypto              0.5.4      
  - install ipaddr                2.8.0      
  - install ppx_hash              v0.9.0     
  - install irmin                 1.3.0      
  - install git                   1.11.2     
  - install cohttp                0.99.0     
  - install conduit               1.0.0      
  - install ppx_base              v0.9.0     
  - install irmin-mem             1.3.0      
  - install irmin-git             1.3.0      
  - install conduit-lwt           1.0.0      
  - install cohttp-lwt            0.99.0     
  - install configurator          v0.9.1     
  - install conduit-lwt-unix      1.0.2      
  - install git-http              1.11.2     
  - install io-page               2.0.1      
  - install cohttp-lwt-unix       0.99.0     
  - install mirage-channel-lwt    3.1.0      
  - install io-page-unix          2.0.1      
  - install git-unix              1.11.2     
  - install protocol-9p           0.12.0     
  - install protocol-9p-unix      0.12.0     
===== 83 to install =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[asetmap.0.8.1] downloaded from http://erratique.ch/software/asetmap/releases/asetmap-0.8.1.tbz
[base64.2.2.0] downloaded from https://github.com/mirage/ocaml-base64/releases/download/v2.2.0/base64-2.2.0.tbz
[base.v0.9.4] downloaded from https://github.com/janestreet/base/archive/v0.9.4.tar.gz
[cohttp.0.99.0] downloaded from https://github.com/mirage/ocaml-cohttp/releases/download/v0.99.0/cohttp-0.99.0.tbz
[cohttp-lwt.0.99.0] downloaded from https://github.com/mirage/ocaml-cohttp/releases/download/v0.99.0/cohttp-0.99.0.tbz
[cohttp-lwt-unix.0.99.0] downloaded from https://github.com/mirage/ocaml-cohttp/releases/download/v0.99.0/cohttp-0.99.0.tbz
[conduit.1.0.0] downloaded from https://github.com/mirage/ocaml-conduit/releases/download/v1.0.0/conduit-1.0.0.tbz
[configurator.v0.9.1] downloaded from https://github.com/janestreet/configurator/archive/v0.9.1.tar.gz
[cppo_ocamlbuild.1.6.0] found in cache
[conduit-lwt.1.0.0] downloaded from https://github.com/mirage/ocaml-conduit/releases/download/v1.0.0/conduit-1.0.0.tbz
[conduit-lwt-unix.1.0.2] downloaded from https://github.com/mirage/ocaml-conduit/releases/download/v1.0.2/conduit-1.0.2.tbz
[cpuid.0.1.1] downloaded from https://github.com/pqwy/cpuid/releases/download/v0.1.1/cpuid-0.1.1.tbz
[cstruct-lwt.3.2.0] downloaded from https://github.com/mirage/ocaml-cstruct/releases/download/v3.2.0/cstruct-3.2.0.tbz
[cstruct.3.1.1] downloaded from https://github.com/mirage/ocaml-cstruct/releases/download/v3.1.1/cstruct-3.1.1.tbz
[decompress.0.7] downloaded from https://github.com/mirage/decompress/releases/download/v0.7/decompress-0.7.tbz
[fieldslib.v0.9.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.9/files/fieldslib-v0.9.0.tar.gz
[git.1.11.2] downloaded from https://github.com/mirage/ocaml-git/releases/download/1.11.2/git-1.11.2.tbz
[git-http.1.11.2] downloaded from https://github.com/mirage/ocaml-git/releases/download/1.11.2/git-1.11.2.tbz
[git-unix.1.11.2] downloaded from https://github.com/mirage/ocaml-git/releases/download/1.11.2/git-1.11.2.tbz
[hex.1.2.0] downloaded from https://github.com/mirage/ocaml-hex/releases/download/v1.2.0/hex-1.2.0.tbz
[io-page-unix.2.0.1] downloaded from https://github.com/mirage/io-page/releases/download/2.0.1/io-page-2.0.1.tbz
[io-page.2.0.1] downloaded from https://github.com/mirage/io-page/releases/download/2.0.1/io-page-2.0.1.tbz
[ipaddr.2.8.0] downloaded from https://github.com/mirage/ocaml-ipaddr/releases/download/2.8.0/ipaddr-2.8.0.tbz
[irmin-git.1.3.0] downloaded from https://github.com/mirage/irmin/releases/download/1.3.0/irmin-1.3.0.tbz
[irmin-mem.1.3.0] downloaded from https://github.com/mirage/irmin/releases/download/1.3.0/irmin-1.3.0.tbz
[irmin-watcher.0.3.0] downloaded from https://github.com/mirage/irmin-watcher/releases/download/0.3.0/irmin-watcher-0.3.0.tbz
[irmin.1.3.0] downloaded from https://github.com/mirage/irmin/releases/download/1.3.0/irmin-1.3.0.tbz
[jsonm.1.0.1] downloaded from http://erratique.ch/software/jsonm/releases/jsonm-1.0.1.tbz
[logs.0.6.2] downloaded from http://erratique.ch/software/logs/releases/logs-0.6.2.tbz
[mirage-channel-lwt.3.1.0] downloaded from https://github.com/mirage/mirage-channel/releases/download/v3.1.0/mirage-channel-3.1.0.tbz
[mirage-channel.3.1.0] downloaded from https://github.com/mirage/mirage-channel/releases/download/v3.1.0/mirage-channel-3.1.0.tbz
[magic-mime.1.1.0] downloaded from https://github.com/mirage/ocaml-magic-mime/releases/download/v1.1.0/magic-mime-1.1.0.tbz
[mirage-clock.1.3.0] downloaded from https://github.com/mirage/mirage-clock/releases/download/v1.3.0/mirage-clock-1.3.0.tbz
[mirage-device.1.1.0] downloaded from https://github.com/mirage/mirage-device/releases/download/v1.1.0/mirage-device-1.1.0.tbz
[mirage-flow.1.3.0] downloaded from https://github.com/mirage/mirage-flow/releases/download/v1.3.0/mirage-flow-1.3.0.tbz
[mirage-flow-lwt.1.4.0] downloaded from https://github.com/mirage/mirage-flow/releases/download/v1.4.0/mirage-flow-1.4.0.tbz
[mirage-kv.1.1.1] downloaded from https://github.com/mirage/mirage-kv/releases/download/v1.1.1/mirage-kv-1.1.1.tbz
[mtime.1.1.0] downloaded from http://erratique.ch/software/mtime/releases/mtime-1.1.0.tbz
[mirage-kv-lwt.1.1.0] downloaded from https://github.com/mirage/mirage-kv/releases/download/v1.1.0/mirage-kv-1.1.0.tbz
[mstruct.1.4.0] downloaded from https://github.com/mirage/ocaml-mstruct/releases/download/v1.4.0/mstruct-1.4.0.tbz
[named-pipe.0.4.0] downloaded from https://github.com/mirage/ocaml-named-pipe/releases/download/0.4.0/named-pipe-0.4.0.tbz
[ocaml-compiler-libs.v0.9.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.9/files/ocaml-compiler-libs-v0.9.0.tar.gz
[ocamlgraph.1.8.8] downloaded from http://ocamlgraph.lri.fr/download/ocamlgraph-1.8.8.tar.gz
[ocb-stubblr.0.1.1] downloaded from https://github.com/pqwy/ocb-stubblr/releases/download/v0.1.1/ocb-stubblr-0.1.1.tbz
[ocplib-endian.1.0] downloaded from https://github.com/OCamlPro/ocplib-endian/archive/1.0.tar.gz
[octavius.1.1.0] downloaded from http://github.com/ocaml-doc/octavius/releases/download/v1.1.0/octavius-1.1.0.tbz
[ppx_ast.v0.9.1] downloaded from https://github.com/janestreet/ppx_ast/archive/v0.9.1.tar.gz
[ppx_base.v0.9.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.9/files/ppx_base-v0.9.0.tar.gz
[ppx_compare.v0.9.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.9/files/ppx_compare-v0.9.0.tar.gz
[nocrypto.0.5.4] downloaded from https://github.com/mirleft/ocaml-nocrypto/releases/download/v0.5.4/nocrypto-0.5.4.tbz
[ppx_core.v0.9.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.9/files/ppx_core-v0.9.0.tar.gz
[ppx_derivers.1.0] downloaded from https://github.com/diml/ppx_derivers/archive/1.0.tar.gz
[ppx_enumerate.v0.9.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.9/files/ppx_enumerate-v0.9.0.tar.gz
[ppx_deriving.4.2] downloaded from https://github.com/whitequark/ppx_deriving/archive/v4.2.tar.gz
[ppx_driver.v0.9.1] downloaded from https://github.com/janestreet/ppx_driver/archive/v0.9.1.tar.gz
[ppx_fields_conv.v0.9.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.9/files/ppx_fields_conv-v0.9.0.tar.gz
[ppx_hash.v0.9.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.9/files/ppx_hash-v0.9.0.tar.gz
[ppx_js_style.v0.9.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.9/files/ppx_js_style-v0.9.0.tar.gz
[ppx_metaquot.v0.9.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.9/files/ppx_metaquot-v0.9.0.tar.gz
[ppx_optcomp.v0.9.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.9/files/ppx_optcomp-v0.9.0.tar.gz
[ppx_sexp_conv.v0.9.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.9/files/ppx_sexp_conv-v0.9.0.tar.gz
[ppx_traverse_builtins.v0.9.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.9/files/ppx_traverse_builtins-v0.9.0.tar.gz
[ppx_type_conv.v0.9.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.9/files/ppx_type_conv-v0.9.0.tar.gz
[ppx_tools.5.0+4.05.0] downloaded from https://github.com/ocaml-ppx/ppx_tools/archive/5.0+4.05.0.tar.gz
[prometheus.0.4] downloaded from https://github.com/mirage/prometheus/releases/download/v0.4/prometheus-0.4.tbz
[protocol-9p-unix.0.12.0] downloaded from https://github.com/mirage/ocaml-9p/releases/download/v0.12.0/protocol-9p-0.12.0.tbz
[rresult.0.5.0] downloaded from http://erratique.ch/software/rresult/releases/rresult-0.5.0.tbz
[protocol-9p.0.12.0] downloaded from https://github.com/mirage/ocaml-9p/releases/download/v0.12.0/protocol-9p-0.12.0.tbz
[re.1.7.1] downloaded from https://github.com/ocaml/ocaml-re/archive/1.7.1.tar.gz
[stdio.v0.9.1] downloaded from https://github.com/janestreet/stdio/archive/v0.9.1.tar.gz
[sexplib.v0.9.3] downloaded from https://github.com/janestreet/sexplib/archive/v0.9.3.tar.gz
[uutf.1.0.1] downloaded from http://erratique.ch/software/uutf/releases/uutf-1.0.1.tbz
[stringext.1.5.0] downloaded from https://github.com/rgrinberg/stringext/archive/1.5.0.zip
[win-error.0.2] downloaded from https://github.com/djs55/ocaml-win-error/archive/v0.2.tar.gz
[uri.1.9.5] downloaded from https://github.com/mirage/ocaml-uri/releases/download/v1.9.5/uri-1.9.5.tbz
[zarith.1.7] downloaded from https://github.com/ocaml/Zarith/archive/release-1.7.tar.gz

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed asetmap.0.8.1
-> installed base-num.base
-> installed base64.2.2.0
-> installed conf-gmp.1
-> installed conf-perl.1
-> installed cppo_ocamlbuild.1.6.0
-> installed decompress.0.7
-> installed logs.0.6.2
-> installed irmin-watcher.0.3.0
-> installed magic-mime.1.1.0
-> installed mirage-device.1.1.0
-> installed mirage-clock.1.3.0
-> installed mirage-flow.1.3.0
-> installed mirage-channel.3.1.0
-> installed mirage-kv.1.1.1
-> installed mirage-no-solo5.1
-> installed mirage-no-xen.1
-> installed mtime.1.1.0
-> installed num.0
-> installed ocaml-compiler-libs.v0.9.0
-> installed ocamlgraph.1.8.8
-> installed ocb-stubblr.0.1.1
-> installed cpuid.0.1.1
-> installed named-pipe.0.4.0
-> installed ocplib-endian.1.0
-> installed octavius.1.1.0
-> installed ppx_ast.v0.9.1
-> installed ppx_derivers.1.0
-> installed ppx_tools.5.0+4.05.0
-> installed ppx_deriving.4.2
-> installed ppx_traverse_builtins.v0.9.0
-> installed re.1.7.1
-> installed prometheus.0.4
-> installed rresult.0.5.0
-> installed sexplib.v0.9.3
-> installed base.v0.9.4
-> installed cstruct.3.1.1
-> installed cstruct-lwt.3.2.0
-> installed datakit-client.0.11.0
-> installed hex.1.2.0
-> installed mirage-flow-lwt.1.4.0
-> installed mirage-kv-lwt.1.1.0
-> installed mstruct.1.4.0
-> installed stdio.v0.9.1
-> installed ppx_core.v0.9.0
-> installed ppx_optcomp.v0.9.0
-> installed ppx_driver.v0.9.1
-> installed fieldslib.v0.9.0
-> installed ppx_metaquot.v0.9.0
-> installed ppx_js_style.v0.9.0
-> installed ppx_type_conv.v0.9.0
-> installed ppx_compare.v0.9.0
-> installed ppx_enumerate.v0.9.0
-> installed ppx_fields_conv.v0.9.0
-> installed ppx_sexp_conv.v0.9.0
-> installed ipaddr.2.8.0
-> installed ppx_hash.v0.9.0
-> installed ppx_base.v0.9.0
-> installed configurator.v0.9.1
-> installed io-page.2.0.1
-> installed io-page-unix.2.0.1
-> installed mirage-channel-lwt.3.1.0
-> installed stringext.1.5.0
-> installed uri.1.9.5
-> installed conduit.1.0.0
-> installed conduit-lwt.1.0.0
-> installed conduit-lwt-unix.1.0.2
-> installed git.1.11.2
-> installed uutf.1.0.1
-> installed jsonm.1.0.1
-> installed cohttp.0.99.0
-> installed cohttp-lwt.0.99.0
-> installed cohttp-lwt-unix.0.99.0
-> installed git-http.1.11.2
-> installed irmin.1.3.0
-> installed irmin-git.1.3.0
-> installed irmin-mem.1.3.0
-> installed win-error.0.2
-> installed protocol-9p.0.12.0
-> installed protocol-9p-unix.0.12.0
-> installed zarith.1.7
-> installed nocrypto.0.5.4
-> installed git-unix.1.11.2
Done.
# Run eval $(opam env) to update the current shell environment
 ---> 35c0bc099930
Removing intermediate container 9cc279dcdd78
Step 11/16 : COPY . /home/opam/src/datakit
 ---> 6c6e754dc094
Removing intermediate container ee4f25408a12
Step 12/16 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in 3c1577d114ee
 ---> 7d0827ac36c4
Removing intermediate container 3c1577d114ee
Step 13/16 : RUN opam update --dev && opam upgrade
 ---> Running in fd9dce588b13

=-=- Synchronising development packages -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit.0.11.0] synchronised from file:///home/opam/src/datakit
[datakit-bridge-github.0.11.0] synchronised from file:///home/opam/src/datakit
[datakit-bridge-local-git.0.11.0] synchronised from file:///home/opam/src/datakit
[datakit-ci.0.11.0] synchronised from file:///home/opam/src/datakit
[datakit-client.0.11.0] synchronised from file:///home/opam/src/datakit
[datakit-client-9p.0.11.0] synchronised from file:///home/opam/src/datakit
[datakit-github.0.11.0] synchronised from file:///home/opam/src/datakit
[datakit-client-git.0.11.0] synchronised from file:///home/opam/src/datakit
[datakit-server.0.11.0] synchronised from file:///home/opam/src/datakit
[datakit-server-9p.0.11.0] synchronised from file:///home/opam/src/datakit
[datakit] Conflicting update of the metadata from file:///home/opam/src/datakit.
Override files in /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/overlay/datakit (there will be a backup) ? [Y/n] y
User metadata backed up in /home/opam/.opam/backup/datakit.bak
[datakit-bridge-github] Conflicting update of the metadata from file:///home/opam/src/datakit.
Override files in /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/overlay/datakit-bridge-github (there will be a backup) ? [Y/n] y
User metadata backed up in /home/opam/.opam/backup/datakit-bridge-github.bak
[datakit-bridge-local-git] Conflicting update of the metadata from file:///home/opam/src/datakit.
Override files in /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/overlay/datakit-bridge-local-git (there will be a backup) ? [Y/n] y
User metadata backed up in /home/opam/.opam/backup/datakit-bridge-local-git.bak
[datakit-ci] Conflicting update of the metadata from file:///home/opam/src/datakit.
Override files in /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/overlay/datakit-ci (there will be a backup) ? [Y/n] y
User metadata backed up in /home/opam/.opam/backup/datakit-ci.bak
[datakit-client] Conflicting update of the metadata from file:///home/opam/src/datakit.
Override files in /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/overlay/datakit-client (there will be a backup) ? [Y/n] y
User metadata backed up in /home/opam/.opam/backup/datakit-client.bak
[datakit-client-9p] Conflicting update of the metadata from file:///home/opam/src/datakit.
Override files in /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/overlay/datakit-client-9p (there will be a backup) ? [Y/n] y
User metadata backed up in /home/opam/.opam/backup/datakit-client-9p.bak
[datakit-client-git] Conflicting update of the metadata from file:///home/opam/src/datakit.
Override files in /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/overlay/datakit-client-git (there will be a backup) ? [Y/n] y
User metadata backed up in /home/opam/.opam/backup/datakit-client-git.bak
[datakit-github] Conflicting update of the metadata from file:///home/opam/src/datakit.
Override files in /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/overlay/datakit-github (there will be a backup) ? [Y/n] y
User metadata backed up in /home/opam/.opam/backup/datakit-github.bak
[datakit-server] Conflicting update of the metadata from file:///home/opam/src/datakit.
Override files in /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/overlay/datakit-server (there will be a backup) ? [Y/n] y
User metadata backed up in /home/opam/.opam/backup/datakit-server.bak
[datakit-server-9p] Conflicting update of the metadata from file:///home/opam/src/datakit.
Override files in /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/overlay/datakit-server-9p (there will be a backup) ? [Y/n] y
User metadata backed up in /home/opam/.opam/backup/datakit-server-9p.bak
Now run 'opam upgrade' to apply any package updates.
The following actions will be performed:
  - recompile datakit-client 0.11.0* [upstream changes]

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> removed   datakit-client.0.11.0
-> installed datakit-client.0.11.0
Done.
# Run eval $(opam env) to update the current shell environment
 ---> 667824c2c600
Removing intermediate container fd9dce588b13
Step 14/16 : RUN opam install datakit-client-9p datakit-client-git -tyv
 ---> Running in f9ba601f2ece

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/2: [datakit-client-9p.0.11.0: rsync]
Processing  2/2: [datakit-client-9p.0.11.0: rsync] [datakit-client-git.0.11.0: rsync]
[datakit-client-9p.0.11.0] no changes from file:///home/opam/src/datakit
Processing  2/2: [datakit-client-git.0.11.0: rsync]
[datakit-client-git.0.11.0] no changes from file:///home/opam/src/datakit

The following actions will be performed:
  - install datakit-client-9p  0.11.0* 
  - install datakit-client-git 0.11.0* 
===== 2 to install =====

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/4: [datakit-client-9p: jbuilder build]
+ /home/opam/.opam/ocaml-base-compiler.4.05.0/bin/jbuilder "build" "-p" "datakit-client-9p" "-j" "1" (CWD=/home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/build/datakit-client-9p.0.11.0)
-     ocamldep api/ocaml/9p/mount/mount.depends.ocamldep-output
-     ocamldep api/ocaml/9p/datakit_client_9p.depends.ocamldep-output
-     ocamldep api/ocaml/9p/datakit_client_9p.dependsi.ocamldep-output
-       ocamlc api/ocaml/9p/mount/version.{cmi,cmo,cmt}
-       ocamlc api/ocaml/9p/datakit_client_9p.{cmi,cmti}
-     ocamlopt api/ocaml/9p/mount/version.{cmx,o}
-       ocamlc api/ocaml/9p/mount/mount.{cmi,cmo,cmt}
-       ocamlc api/ocaml/9p/datakit_client_9p.{cmo,cmt}
-     ocamlopt api/ocaml/9p/datakit_client_9p.{cmx,o}
-     ocamlopt api/ocaml/9p/mount/mount.{cmx,o}
-       ocamlc api/ocaml/9p/datakit_client_9p.cma
-     ocamlopt api/ocaml/9p/datakit_client_9p.{a,cmxa}
-     ocamlopt api/ocaml/9p/mount/mount.exe
-     ocamlopt api/ocaml/9p/datakit_client_9p.cmxs
-> compiled  datakit-client-9p.0.11.0
Processing  2/4: [datakit-client-git: jbuilder build]
+ /home/opam/.opam/ocaml-base-compiler.4.05.0/bin/jbuilder "build" "-p" "datakit-client-git" "-j" "1" (CWD=/home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/build/datakit-client-git.0.11.0)
-     ocamldep api/ocaml/git/datakit_client_git.depends.ocamldep-output
-     ocamldep api/ocaml/git/datakit_client_git.dependsi.ocamldep-output
-       ocamlc api/ocaml/git/datakit_client_git.{cmi,cmti}
-       ocamlc api/ocaml/git/datakit_client_git.{cmo,cmt}
-     ocamlopt api/ocaml/git/datakit_client_git.{cmx,o}
-       ocamlc api/ocaml/git/datakit_client_git.cma
-     ocamlopt api/ocaml/git/datakit_client_git.{a,cmxa}
-     ocamlopt api/ocaml/git/datakit_client_git.cmxs
Processing  2/4: [datakit-client-git: jbuilder runtest]
+ /home/opam/.opam/ocaml-base-compiler.4.05.0/bin/jbuilder "runtest" "tests/datakit-git" (CWD=/home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/build/datakit-client-git.0.11.0)
-     ocamldep tests/datakit-git/test.depends.ocamldep-output
-     ocamldep api/ocaml/datakit_client.depends.ocamldep-output
-     ocamldep api/ocaml/datakit_client.dependsi.ocamldep-output
-     ocamldep src/datakit-io/datakit_io.dependsi.ocamldep-output
-     ocamldep src/datakit-io/datakit_io.depends.ocamldep-output
-     ocamldep tests/common/test.depends.ocamldep-output
-     ocamldep tests/common/test.dependsi.ocamldep-output
-     ocamldep tests/datakit-git/test.dependsi.ocamldep-output
-       ocamlc api/ocaml/datakit_client.{cmi,cmti}
-       ocamlc src/datakit-io/datakit_io.{cmi,cmti}
-       ocamlc api/ocaml/git/datakit_client_git.{cmi,cmti}
-       ocamlc tests/common/test_client.{cmi,cmti}
-     ocamlopt api/ocaml/datakit_client.{cmx,o}
-     ocamlopt api/ocaml/datakit_client.{a,cmxa}
-       ocamlc tests/common/test_utils.{cmi,cmo,cmt}
-       ocamlc tests/datakit-git/test.{cmi,cmti}
-     ocamlopt src/datakit-io/datakit_io.{cmx,o}
-     ocamlopt src/datakit-io/datakit_io.{a,cmxa}
-     ocamlopt api/ocaml/git/datakit_client_git.{cmx,o}
-     ocamlopt tests/common/test_utils.{cmx,o}
-     ocamlopt tests/common/test_client.{cmx,o}
-     ocamlopt tests/common/test.{a,cmxa}
-     ocamlopt tests/datakit-git/test.{cmx,o}
-     ocamlopt tests/datakit-git/test.exe
-         test alias tests/datakit-git/runtest
- /bin/sh: tput: not found
- stty: standard input: Not a tty
- Testing datakit-git.
- [33m ...[m                [36mclient[m          0   Transaction.[32m[OK][m                [36mclient[m          0   Transaction.
- [33m ...[m                [36mclient[m          1   Watch.[32m[OK][m                [36mclient[m          1   Watch.
- [33m ...[m                [36mclient[m          2   Make dirs.[32m[OK][m                [36mclient[m          2   Make dirs.
- [33m ...[m                [36mclient[m          3   Truncate.[32m[OK][m                [36mclient[m          3   Truncate.
- [33m ...[m                [36mclient[m          4   Parents.[32m[OK][m                [36mclient[m          4   Parents.
- [33m ...[m                [36mclient[m          5   Merge.[32m[OK][m                [36mclient[m          5   Merge.
- [33m ...[m                [36mclient[m          6   Diff.[32m[OK][m                [36mclient[m          6   Diff.
- [33m ...[m                [36mclient[m          7   Merge_metadata.[32m[OK][m                [36mclient[m          7   Merge_metadata.
- [33m ...[m                [36mclient[m          8   Merge empty.[32m[OK][m                [36mclient[m          8   Merge empty.
- [33m ...[m                [36mclient[m          9   Conflicts.[32m[OK][m                [36mclient[m          9   Conflicts.
- [33m ...[m                [36mclient[m         10   Large write.[32m[OK][m                [36mclient[m         10   Large write.
- [33m ...[m                [36mclient[m         11   Remove.[32m[OK][m                [36mclient[m         11   Remove.
- [33m ...[m                [36mclient[m         12   Remotes.[33m[SKIP][m              [36mclient[m         12   Remotes.
- [33m ...[m                [36mclient[m         13   Create_or_replace.[33m[SKIP][m              [36mclient[m         13   Create_or_replace.
- The full test results are available in `_build/_tests`.
- [32mTest Successful[m in 0.392s. 12 tests run.
-> compiled  datakit-client-git.0.11.0
-> installed datakit-client-9p.0.11.0
-> installed datakit-client-git.0.11.0
Done.
# Run eval $(opam env) to update the current shell environment
 ---> 99d50cf75b33
Removing intermediate container f9ba601f2ece
Step 15/16 : RUN sudo mkdir /data && sudo chown opam.nogroup /data && chmod 700 /data &&     sudo cp $(opam config exec -- which datakit-mount) /usr/bin/datakit-mount
 ---> Running in 4e2ebedd4159
 ---> fb3bb3792587
Removing intermediate container 4e2ebedd4159
Step 16/16 : CMD bash -c "/usr/bin/datakit-mount -h $(getent hosts datakit | awk '{print $1}')";     bash
 ---> Running in 5aa72275edba
 ---> 1c56d3eb23b6
Removing intermediate container 5aa72275edba
Successfully built 1c56d3eb23b6
[2017-11-20 11:06.41] Success
