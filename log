=== Docker build Dockerfile.ci
[2017-05-08 20:39.44] Starting...
Cloning into '/tmp/with_clone5adb312'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at d69d4f3 Dockerfile: fix installation of dependencies
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 5.847 MB
Step 1/19 : FROM ocaml/opam-dev@sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe: Pulling from ocaml/opam-dev
Digest: sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
Status: Image is up to date for ocaml/opam-dev@sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
 ---> 477ad7d223ad
Step 2/19 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> 20061f41087f
Step 3/19 : RUN sudo apk add tzdata aspcud
 ---> Using cache
 ---> c9c160bcf357
Step 4/19 : RUN opam pin add hvsock.0.14.0 -n https://github.com/mirage/ocaml-hvsock.git#88397c37a910c61507a9655ed8413c1692294da0
 ---> Using cache
 ---> d7f99e2dde67
Step 5/19 : RUN opam pin add irmin.1.1.0 -n https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0
 ---> Using cache
 ---> 0a767c1dcced
Step 6/19 : RUN opam pin add irmin-git.1.1.0 -n https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0
 ---> Using cache
 ---> d407611488be
Step 7/19 : RUN opam pin add irmin-unix.1.1.0 -n https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0
 ---> Using cache
 ---> 2effcead53b8
Step 8/19 : RUN opam pin add -yn protocol-9p.0.11.0 'https://github.com/mirage/ocaml-9p.git#v0.11.0'
 ---> Using cache
 ---> 7be5a0bfd8d4
Step 9/19 : RUN opam pin add -yn protocol-9p-unix.0.11.0 'https://github.com/mirage/ocaml-9p.git#v0.11.0'
 ---> Using cache
 ---> 80bc48413276
Step 10/19 : RUN opam depext -i asl win-eventlog camlzip alcotest mtime mirage-flow hvsock git irmin irmin-unix lwt protocol-9p tyxml redis multipart-form-data pbkdf tls prometheus-app github git session irmin irmin-unix cmdliner webmachine
 ---> Using cache
 ---> f6a40b77cc48
Step 11/19 : RUN opam install irmin-unix alcotest
 ---> Using cache
 ---> 4a233c1b330b
Step 12/19 : ADD . /home/opam/datakit
 ---> f167cdfea589
Error removing intermediate container f82dd81f0997: Driver aufs failed to remove root filesystem f82dd81f09974679a7817f39d9583d5428e2e82cdfeec6348bde7def00f48d1d: rename /var/lib/docker/aufs/mnt/9b809e533e4bf50dffeda51cfd727bfbd82626e78219e7ab18bb00eb2cbd3dec /var/lib/docker/aufs/mnt/9b809e533e4bf50dffeda51cfd727bfbd82626e78219e7ab18bb00eb2cbd3dec-removing: device or resource busy
Step 13/19 : RUN sudo chown opam /home/opam/datakit
 ---> Running in dea427136f37
 ---> 352c08ff85c1
Error removing intermediate container f82dd81f0997: No such container: f82dd81f09974679a7817f39d9583d5428e2e82cdfeec6348bde7def00f48d1d
Step 14/19 : RUN opam pin add -k git datakit-client.dev /home/opam/datakit -y
 ---> Running in 08c7c26226e0
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-client/datakit-client.opam from 1.2 to 2.0~beta
[0mdatakit-client is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install protocol-9p-unix 0.11.0*                            [required by datakit-client]
  - install datakit-client   dev*
===== 2 to install =====
[datakit-client.dev] synchronised from git+file:///home/opam/datakit#master
[protocol-9p-unix.0.11.0] synchronised from git+https://github.com/mirage/ocaml-9p.git#v0.11.0

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed protocol-9p-unix.0.11.0
-> installed datakit-client.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 4356f6e538c8
Error removing intermediate container f82dd81f0997: No such container: f82dd81f09974679a7817f39d9583d5428e2e82cdfeec6348bde7def00f48d1d
Step 15/19 : RUN opam pin add -k git datakit-server.dev /home/opam/datakit -y
 ---> Running in be848ae4734c
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev: git]
[datakit-server.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-server/datakit-server.opam from 1.2 to 2.0~beta
[0mdatakit-server is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-server dev*
[datakit-server.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-server.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 5caf4e4a9d83
Error removing intermediate container f82dd81f0997: No such container: f82dd81f09974679a7817f39d9583d5428e2e82cdfeec6348bde7def00f48d1d
Step 16/19 : RUN opam pin add -k git datakit-github.dev /home/opam/datakit -y
 ---> Running in 6e905f340fde
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-github/datakit-github.opam from 1.2 to 2.0~beta
[0mdatakit-github is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-github dev*
[datakit-github.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-github.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 1ff591eda6fe
Error removing intermediate container f82dd81f0997: No such container: f82dd81f09974679a7817f39d9583d5428e2e82cdfeec6348bde7def00f48d1d
Step 17/19 : RUN opam pin add -k git datakit.dev /home/opam/datakit -y
 ---> Running in ffde0078e7a9
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev: git]
[datakit.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit/datakit.opam from 1.2 to 2.0~beta
[0mdatakit is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit dev*
[datakit.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> e8ef25575896
Removing intermediate container dea427136f37
Removing intermediate container 08c7c26226e0
Removing intermediate container be848ae4734c
Removing intermediate container 6e905f340fde
Removing intermediate container ffde0078e7a9
Error removing intermediate container f82dd81f0997: No such container: f82dd81f09974679a7817f39d9583d5428e2e82cdfeec6348bde7def00f48d1d
Step 18/19 : RUN opam pin add -k git datakit-ci.dev /home/opam/datakit -yt
 ---> Running in 8e866ffa2db0
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-ci/datakit-ci.opam from 1.2 to 2.0~beta
[0mdatakit-ci is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-ci dev*
[datakit-ci.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-ci.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 5ca113fa3869
Error removing intermediate container f82dd81f0997: No such container: f82dd81f09974679a7817f39d9583d5428e2e82cdfeec6348bde7def00f48d1d
Step 19/19 : VOLUME /secrets
 ---> Running in 3c0aad877101
 ---> 27db85313254
Error removing intermediate container f82dd81f0997: No such container: f82dd81f09974679a7817f39d9583d5428e2e82cdfeec6348bde7def00f48d1d
Successfully built 27db85313254
[2017-05-08 20:41.29] Success
