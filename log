=== Docker build Dockerfile
[2017-05-15 23:19.58] Starting...
Cloning into '/tmp/with_clone41114df'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at b5b65d9 Fix CI scripts to pin irmin-mem too
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 6.128 MBSending build context to Docker daemon 6.338 MB
Step 1/33 : FROM ocaml/opam-dev@sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe: Pulling from ocaml/opam-dev
Digest: sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
Status: Image is up to date for ocaml/opam-dev@sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
 ---> 477ad7d223ad
Step 2/33 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> 20061f41087f
Step 3/33 : RUN sudo apk add tzdata aspcud gmp-dev perl
 ---> Using cache
 ---> f112729d161c
Step 4/33 : RUN opam pin add irmin.1.2.0 -n https://github.com/mirage/irmin.git#ca886ac8e1a0b36879617d7c973852d6d04bfede
 ---> Using cache
 ---> 8c5c2a71afb8
Step 5/33 : RUN opam pin add irmin-mem.1.2.0 -n https://github.com/mirage/irmin.git#ca886ac8e1a0b36879617d7c973852d6d04bfede
 ---> Using cache
 ---> a259d109bc72
Step 6/33 : RUN opam pin add irmin-git.1.2.0 -n https://github.com/mirage/irmin.git#ca886ac8e1a0b36879617d7c973852d6d04bfede
 ---> Using cache
 ---> a3da10ac28ea
Step 7/33 : RUN opam pin add -yn protocol-9p.0.11.0 'https://github.com/mirage/ocaml-9p.git#v0.11.0'
 ---> Using cache
 ---> e87f1d32fe6a
Step 8/33 : RUN opam pin add -yn protocol-9p-unix.0.11.0 'https://github.com/mirage/ocaml-9p.git#v0.11.0'
 ---> Using cache
 ---> 5d8f46121e7f
Step 9/33 : RUN opam depext -ui lwt inotify alcotest conf-libev asl win-eventlog camlzip     irmin-watcher mtime mirage-flow conduit hvsock prometheus-app git irmin     cmdliner protocol-9p rresult win-error named-pipe
 ---> Using cache
 ---> ce4ae02ea83a
Step 10/33 : COPY check-libev.ml /tmp/check-libev.ml
 ---> Using cache
 ---> 89d7deff2493
Step 11/33 : RUN opam config exec -- ocaml /tmp/check-libev.ml
 ---> Using cache
 ---> dd113db8e15a
Step 12/33 : COPY datakit.opam /home/opam/src/datakit/
 ---> Using cache
 ---> cd71f49027e5
Step 13/33 : COPY datakit-client.opam /home/opam/src/datakit/datakit-client.opam
 ---> Using cache
 ---> 6031ae80c742
Step 14/33 : COPY datakit-client-9p.opam /home/opam/src/datakit/datakit-client-9p.opam
 ---> Using cache
 ---> 72a015b42fce
Step 15/33 : COPY datakit-server.opam /home/opam/src/datakit/datakit-server.opam
 ---> Using cache
 ---> 78162047c8cc
Step 16/33 : COPY datakit-server-9p.opam /home/opam/src/datakit/datakit-server-9p.opam
 ---> Using cache
 ---> 87d18df7578a
Step 17/33 : RUN opam pin add datakit-server.dev /home/opam/src/datakit -yn &&     opam pin add datakit-server-9p.dev /home/opam/src/datakit -yn &&     opam pin add datakit-client.dev /home/opam/src/datakit -yn &&     opam pin add datakit-client-9p.dev /home/opam/src/datakit -yn &&     opam pin add datakit.dev /home/opam/src/datakit -yn
 ---> Using cache
 ---> 84e3272046fa
Step 18/33 : RUN opam depext -y datakit
 ---> Using cache
 ---> e6e229781697
Step 19/33 : RUN opam install -y --deps-only datakit-client datakit-server
 ---> Using cache
 ---> 42787a699038
Step 20/33 : RUN opam install alcotest
 ---> Using cache
 ---> 5c9b621ab422
Step 21/33 : COPY . /home/opam/src/datakit
 ---> 8a0fca036a8f
Removing intermediate container b4ec43f80980
Step 22/33 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in 19b84afef307
 ---> e2f7603bb7c3
Removing intermediate container 19b84afef307
Step 23/33 : RUN cd /home/opam/src/datakit &&     scripts/watermark.sh &&     git status --porcelain
 ---> Running in 4a7112003d9c
 M src/version.ml
 ---> 8621622ac514
Removing intermediate container 4a7112003d9c
Step 24/33 : RUN opam install datakit-client-9p
 ---> Running in 9d0f1ab44f23

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client-9p.dev] synchronised from file:///home/opam/src/datakit

The following actions will be performed:
  - install datakit-client    dev*                              [required by datakit-client-9p]
  - install protocol-9p-unix  0.11.0*                           [required by datakit-client-9p]
  - install datakit-client-9p dev*
===== 3 to install =====
[datakit-client.dev] synchronised from file:///home/opam/src/datakit
[datakit-client-9p.dev] synchronised from file:///home/opam/src/datakit
[protocol-9p-unix.0.11.0] synchronised from git+https://github.com/mirage/ocaml-9p.git#v0.11.0

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-client.dev
-> installed protocol-9p-unix.0.11.0
-> installed datakit-client-9p.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 93097e938927
Removing intermediate container 9d0f1ab44f23
Step 25/33 : RUN opam install datakit -ytv
 ---> Running in 0760154fbe29

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/1: [datakit.dev: rsync]
[datakit.dev] synchronised from file:///home/opam/src/datakit

The following actions will be performed:
  - install irmin-git         1.2.0*                            [required by datakit]
  - install datakit-server    dev*                              [required by datakit-server-9p]
  - install datakit-server-9p dev*                              [required by datakit]
  - install datakit           dev*
===== 4 to install =====
Processing  1/4: [datakit.dev: rsync]
Processing  2/4: [datakit.dev: rsync] [datakit-server.dev: rsync]
Processing  3/4: [datakit.dev: rsync] [datakit-server.dev: rsync] [datakit-server-9p.dev: rsync]
[datakit.dev] synchronised from file:///home/opam/src/datakit
Processing  3/4: [datakit-server.dev: rsync] [datakit-server-9p.dev: rsync]
Processing  4/4: [datakit-server.dev: rsync] [datakit-server-9p.dev: rsync] [irmin-git.1.2.0: git]
[datakit-server.dev] synchronised from file:///home/opam/src/datakit
Processing  4/4: [datakit-server-9p.dev: rsync] [irmin-git.1.2.0: git]
[datakit-server-9p.dev] synchronised from file:///home/opam/src/datakit
Processing  4/4: [irmin-git.1.2.0: git]
[irmin-git.1.2.0] synchronised from git+https://github.com/mirage/irmin.git#ca886ac8e1a0b36879617d7c973852d6d04bfede

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/8: [datakit-server: jbuilder build]
+ jbuilder "build" "-p" "datakit-server" "-j" "1" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit-server.dev)
-     ocamldep src/datakit-server/datakit_server.depends.ocamldep-output
-     ocamldep src/datakit-server/datakit_server.dependsi.ocamldep-output
-       ocamlc src/datakit-server/vfs.{cmi,cmti}
-       ocamlc src/datakit-server/vfs.{cmo,cmt}
-     ocamlopt src/datakit-server/vfs.{cmx,o}
-       ocamlc src/datakit-server/datakit_server.cma
-     ocamlopt src/datakit-server/datakit_server.{a,cmxa}
-     ocamlopt src/datakit-server/datakit_server.cmxs
-> compiled  datakit-server.dev
Processing  2/8: [irmin-git: jbuilder build]
+ jbuilder "build" "-p" "irmin-git" "-j" "1" (CWD=/home/opam/.opam/default/.opam-switch/build/irmin-git.1.2.0)
-     ocamldep src/irmin-git/irmin_git.depends.ocamldep-output
-     ocamldep src/irmin-git/irmin_git.dependsi.ocamldep-output
-       ocamlc src/irmin-git/irmin_git.{cmi,cmti}
-       ocamlc src/irmin-git/irmin_git.{cmo,cmt}
-     ocamlopt src/irmin-git/irmin_git.{cmx,o}
-       ocamlc src/irmin-git/irmin_git.cma
-     ocamlopt src/irmin-git/irmin_git.{a,cmxa}
-     ocamlopt src/irmin-git/irmin_git.cmxs
-> compiled  irmin-git.1.2.0
-> installed datakit-server.dev
Processing  4/8: [datakit-server-9p: jbuilder build]
+ jbuilder "build" "-p" "datakit-server-9p" "-j" "1" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit-server-9p.dev)
-     ocamldep src/datakit-server-9p/datakit_server_9p.depends.ocamldep-output
-     ocamldep src/datakit-server-9p/datakit_server_9p.dependsi.ocamldep-output
-       ocamlc src/datakit-server-9p/fs9p.{cmi,cmti}
-       ocamlc src/datakit-server-9p/fs9p_error.{cmi,cmti}
-       ocamlc src/datakit-server-9p/fs9p_error.{cmo,cmt}
-     ocamlopt src/datakit-server-9p/fs9p_error.{cmx,o}
-       ocamlc src/datakit-server-9p/fs9p.{cmo,cmt}
-     ocamlopt src/datakit-server-9p/fs9p.{cmx,o}
-       ocamlc src/datakit-server-9p/datakit_server_9p.cma
-     ocamlopt src/datakit-server-9p/datakit_server_9p.{a,cmxa}
-     ocamlopt src/datakit-server-9p/datakit_server_9p.cmxs
-> compiled  datakit-server-9p.dev
-> installed datakit-server-9p.dev
-> installed irmin-git.1.2.0
Processing  7/8: [datakit: jbuilder build]
+ jbuilder "build" "-p" "datakit" "-j" "1" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit.dev)
- Error: Findlib package "irmin-mem" not found.
- -> required by "src/datakit/jbuild (context default)"
- Hint: try: jbuilder external-lib-deps --missing -p datakit -j 1


=-=- Error report -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
+- The following actions failed
| - build datakit dev
+- 
+- The following changes have been performed
| - install datakit-server    dev
| - install datakit-server-9p dev
| - install irmin-git         1.2.0
+- 
[91m[ERROR] The compilation of datakit failed at "jbuilder build -p datakit -j 1".

#=== ERROR while compiling datakit.dev ========================================#
# command              jbuilder build -p datakit -j 1
# path                 /home/opam/.opam/default/.opam-switch/build/datakit.dev
# exit-code            1
# env-file             /home/opam/.opam/log/datakit-7-e0259d.env
# output-file          /home/opam/.opam/log/datakit-7-e0259d.out
### output ###
# Error: Findlib package "irmin-mem" not found.
# -> required by "src/datakit/jbuild (context default)"
# Hint: try: jbuilder external-lib-deps --missing -p datakit -j 1

[0m# Run eval `opam env` to update the current shell environment
[91m
The former state can be restored with:
    opam switch import "/home/opam/.opam/default/.opam-switch/backup/state-20170515232033.export"
'opam install datakit -ytv' failed.
[0mThe command '/bin/sh -c opam install datakit -ytv' returned a non-zero code: 4
[2017-05-15 23:20.51] Failed: Command "docker" "build" "--pull" "-f" "Dockerfile" "." exited with status 4
