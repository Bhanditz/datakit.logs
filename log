=== Docker build Dockerfile.ci
[2017-02-14 13:45.10] Starting...
Cloning into '/tmp/with_clone2e55e55d'...
done.
HEAD is now at 134a3c5 Merge pull request #486 from samoht/hvsock
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 6.128 MBSending build context to Docker daemon 6.685 MBSending build context to Docker daemon 6.885 MB
Step 1/19 : FROM ocaml/opam:alpine-3.5_ocaml-4.04.0
alpine-3.5_ocaml-4.04.0: Pulling from ocaml/opam
Digest: sha256:a4d07643bc7825a34986bdc4d0216e08f3d0714888ded2368c470765dbb164c0
Status: Image is up to date for ocaml/opam:alpine-3.5_ocaml-4.04.0
 ---> c1ca2cf6d3c1
Step 2/19 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> e2d560c55d7e
Step 3/19 : RUN sudo apk add tzdata
 ---> Using cache
 ---> 4e0f83e9adab
Step 4/19 : RUN opam depext -i opam-devel && sudo cp $(opam config var "opam-devel:lib")/opam /usr/bin/opam
 ---> Using cache
 ---> f15acb5e5230
Step 5/19 : RUN rm -rf ~/.opam
 ---> Using cache
 ---> 2446e4f4dc37
Step 6/19 : RUN opam init -y
 ---> Using cache
 ---> 3482e8e9328d
Step 7/19 : RUN opam install ocaml -y
 ---> Using cache
 ---> 01cb09506337
Step 8/19 : RUN opam install depext -y
 ---> Using cache
 ---> c6e798953201
Step 9/19 : RUN opam pin add -yn datakit-client.dev https://github.com/docker/datakit.git &&     opam pin add -yn github --dev &&     opam pin add -yn datakit-github.dev https://github.com/talex5/datakit.git#split-prometheus &&     opam pin add -yn datakit-server.dev https://github.com/talex5/datakit.git#split-prometheus &&     opam pin add -yn datakit.dev https://github.com/talex5/datakit.git#split-prometheus
 ---> Using cache
 ---> d7e93dcd7a05
Step 10/19 : ADD datakit-ci.opam /tmp/deps/opam
 ---> Using cache
 ---> 27beeb15f03d
Step 11/19 : RUN opam pin add -y tmp /tmp/deps/opam -n
 ---> Using cache
 ---> ebfedf7cfd75
Step 12/19 : RUN opam depext tmp -y
 ---> Using cache
 ---> fcad8d7beda2
Step 13/19 : RUN opam install --deps-only tmp -y
 ---> Using cache
 ---> e2eae6f9f025
Step 14/19 : ADD . /home/opam/datakit
 ---> 555190eb14d8
Removing intermediate container 37b1aa220e27
Step 15/19 : RUN sudo chown opam /home/opam/datakit
 ---> Running in cbb9af41ba57
 ---> 65795a68494f
Removing intermediate container cbb9af41ba57
Step 16/19 : RUN opam pin add -k git datakit-client.dev /home/opam/datakit -y
 ---> Running in e8f9b9137118
[91m[NOTE] Will pin to 'master' using git
[0mProceed and change pinning target ? [Y/n] y
[91m[NOTE] Package datakit-client is currently pinned to git+https://github.com/docker/datakit.git (version dev).
[0m[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-client/datakit-client.opam from 1.2 to 2.0~beta
[0mdatakit-client is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - recompile datakit-client dev*
  - recompile datakit-github dev*                               [uses datakit-client]
===== 2 to recompile =====
[datakit-client.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> removed   datakit-github.dev
-> removed   datakit-client.dev
-> installed datakit-client.dev
-> installed datakit-github.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> a28cada5f29c
Removing intermediate container e8f9b9137118
Step 17/19 : RUN opam pin add -k git datakit-ci.dev /home/opam/datakit -y
 ---> Running in 31d2fafdac78
[91m[NOTE] Will pin to 'master' using git
[0mPackage datakit-ci does not exist, create as a NEW package ? [Y/n] y
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-ci/datakit-ci.opam from 1.2 to 2.0~beta
[0mdatakit-ci is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-ci dev*
[datakit-ci.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-ci.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 6f60a7769465
Removing intermediate container 31d2fafdac78
Step 18/19 : RUN opam pin add -k git datakit-github.dev /home/opam/datakit -yn
 ---> Running in def41e3b242e
[91m[NOTE] Will pin to 'master' using git
[0mProceed and change pinning target ? [Y/n] y
[91m[NOTE] Package datakit-github is currently pinned to git+https://github.com/talex5/datakit.git#split-prometheus (version dev).
[0m[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-github/datakit-github.opam from 1.2 to 2.0~beta
[0mdatakit-github is now pinned to git+file:///home/opam/datakit#master (version dev)
 ---> d292fe899f72
Removing intermediate container def41e3b242e
Step 19/19 : VOLUME /secrets
 ---> Running in 2098b719ead6
 ---> 4d6b26013ad9
Removing intermediate container 2098b719ead6
Successfully built 4d6b26013ad9
[2017-02-14 13:46.10] Success
