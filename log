=== Docker build Dockerfile.github
[2017-05-09 10:38.04] Starting...
Cloning into '/tmp/with_clone130eb105'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at 6c4e8ae client/server: split the libraires between core API and 9p transport
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 6.074 MB
Step 1/32 : FROM ocaml/opam-dev@sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe: Pulling from ocaml/opam-dev
Digest: sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
Status: Image is up to date for ocaml/opam-dev@sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
 ---> 477ad7d223ad
Step 2/32 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> 20061f41087f
Step 3/32 : RUN sudo apk add tzdata aspcud
 ---> Using cache
 ---> c9c160bcf357
Step 4/32 : RUN opam pin add hvsock.0.14.0 -n https://github.com/mirage/ocaml-hvsock.git#88397c37a910c61507a9655ed8413c1692294da0
 ---> Using cache
 ---> d7f99e2dde67
Step 5/32 : RUN opam pin add irmin.1.1.0 -n https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0
 ---> Using cache
 ---> 0a767c1dcced
Step 6/32 : RUN opam pin add irmin-git.1.1.0 -n https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0
 ---> Using cache
 ---> d407611488be
Step 7/32 : RUN opam pin add -yn protocol-9p.0.11.0 'https://github.com/mirage/ocaml-9p.git#v0.11.0'
 ---> Using cache
 ---> c120a89ffcbc
Step 8/32 : RUN opam pin add -yn protocol-9p-unix.0.11.0 'https://github.com/mirage/ocaml-9p.git#v0.11.0'
 ---> Using cache
 ---> 46d4dd821e68
Step 9/32 : RUN opam pin add github --dev -n
 ---> Using cache
 ---> 136c28a82f4c
Step 10/32 : RUN opam depext -ui lwt inotify alcotest conf-libev lambda-term cmdliner github protocol-9p rresult prometheus-app asl win-eventlog mtime hex github-hooks hvsock camlzip irmin-watcher git irmin
 ---> Using cache
 ---> 67e733390729
Step 11/32 : COPY check-libev.ml /tmp/check-libev.ml
 ---> Using cache
 ---> 2d1763007aee
Step 12/32 : RUN opam config exec -- ocaml /tmp/check-libev.ml
 ---> Using cache
 ---> 4265a0c1a7fe
Step 13/32 : COPY datakit.opam /home/opam/src/datakit/datakit.opam
 ---> Using cache
 ---> 76754e8c3ade
Step 14/32 : COPY datakit-client.opam /home/opam/src/datakit/datakit-client.opam
 ---> 0296a66a7c2a
Removing intermediate container e21b8f8d1ea0
Step 15/32 : COPY datakit-server.opam /home/opam/src/datakit/datakit-server.opam
 ---> 464c45a71416
Error removing intermediate container 72aa623c411e: Driver aufs failed to remove root filesystem 72aa623c411e214d731637409e786317cb148e5da8dd8b05c0e22fb8e419d429: rename /var/lib/docker/aufs/mnt/dd3d4e85554c2f419f738e196287e12cafcb3997a7b306683719419401124310 /var/lib/docker/aufs/mnt/dd3d4e85554c2f419f738e196287e12cafcb3997a7b306683719419401124310-removing: device or resource busy
Step 16/32 : COPY datakit-github.opam /home/opam/src/datakit/datakit-github.opam
 ---> 1871879e4ecd
Error removing intermediate container 72aa623c411e: No such container: 72aa623c411e214d731637409e786317cb148e5da8dd8b05c0e22fb8e419d429
Step 17/32 : COPY datakit-bridge-github.opam /home/opam/src/datakit/datakit-bridge-github.opam
 ---> d40670094724
Error removing intermediate container 72aa623c411e: No such container: 72aa623c411e214d731637409e786317cb148e5da8dd8b05c0e22fb8e419d429
Step 18/32 : RUN opam pin add datakit.dev /home/opam/src/datakit -yn &&     opam pin add datakit-server.dev /home/opam/src/datakit -yn &&     opam pin add datakit-client.dev /home/opam/src/datakit -yn &&     opam pin add datakit-github.dev /home/opam/src/datakit -yn &&     opam pin add datakit-bridge-github.dev /home/opam/src/datakit -yn
 ---> Running in 72729338d391
[datakit.dev: rsync]
[datakit.dev] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit/datakit.opam from 1.2 to 2.0~beta
[0mdatakit is now pinned to file:///home/opam/src/datakit (version dev)
[datakit-server.dev: rsync]
[datakit-server.dev] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-server/datakit-server.opam from 1.2 to 2.0~beta
[0mdatakit-server is now pinned to file:///home/opam/src/datakit (version dev)
[datakit-client.dev: rsync]
[datakit-client.dev] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-client/datakit-client.opam from 1.2 to 2.0~beta
[0mdatakit-client is now pinned to file:///home/opam/src/datakit (version dev)
[datakit-github.dev: rsync]
[datakit-github.dev] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-github/datakit-github.opam from 1.2 to 2.0~beta
[0mdatakit-github is now pinned to file:///home/opam/src/datakit (version dev)
[datakit-bridge-github.dev: rsync]
[datakit-bridge-github.dev] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-bridge-github/datakit-bridge-github.opam from 1.2 to 2.0~beta
[0mdatakit-bridge-github is now pinned to file:///home/opam/src/datakit (version dev)
 ---> 8249ef2b32b7
Error removing intermediate container 72aa623c411e: No such container: 72aa623c411e214d731637409e786317cb148e5da8dd8b05c0e22fb8e419d429
Step 19/32 : COPY . /home/opam/src/datakit
 ---> 4f2a69f440e5
Error removing intermediate container 72aa623c411e: No such container: 72aa623c411e214d731637409e786317cb148e5da8dd8b05c0e22fb8e419d429
Step 20/32 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in 5e8125d86313
 ---> 7ebb343d5465
Error removing intermediate container 72aa623c411e: No such container: 72aa623c411e214d731637409e786317cb148e5da8dd8b05c0e22fb8e419d429
Step 21/32 : RUN cd /home/opam/src/datakit &&     scripts/watermark.sh &&     git status --porcelain
 ---> Running in 46eda5608782
 M src/version.ml
 ---> 61daac0a304e
Error removing intermediate container 72aa623c411e: No such container: 72aa623c411e214d731637409e786317cb148e5da8dd8b05c0e22fb8e419d429
Step 22/32 : RUN opam install datakit
 ---> Running in 3ea6b74ea611

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit.dev] synchronised from file:///home/opam/src/datakit

The following actions will be performed:
  - install irmin-git      1.1.0*                               [required by datakit]
  - install datakit-server dev*                                 [required by datakit]
  - install datakit        dev*
===== 3 to install =====
[datakit.dev] synchronised from file:///home/opam/src/datakit
[datakit-server.dev] synchronised from file:///home/opam/src/datakit
[irmin-git.1.1.0] synchronised from git+https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-server.dev
-> installed irmin-git.1.1.0
[91m[ERROR] The compilation of datakit failed at "jbuilder build -p datakit -j 1".

#=== ERROR while compiling datakit.dev ========================================#
# command              jbuilder build -p datakit -j 1
# path                 /home/opam/.opam/default/.opam-switch/build/datakit.dev
# exit-code            1
# env-file             /home/opam/.opam/log/datakit-7-4f1270.env
# output-file          /home/opam/.opam/log/datakit-7-4f1270.out
### output ###
# Error: Findlib package "protocol-9p-unix" not found.
# -> required by "tests/datakit-9p/jbuild (context default)"
# Hint: try: jbuilder external-lib-deps --missing -p datakit -j 1

[0m

=-=- Error report -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
+- The following actions failed
| - build datakit dev
+- 
+- The following changes have been performed
| - install datakit-server dev
| - install irmin-git      1.1.0
+- 
# Run eval `opam env` to update the current shell environment
[91m
The former state can be restored with:
    opam switch import "/home/opam/.opam/default/.opam-switch/backup/state-20170509103827.export"
[0mThe command '/bin/sh -c opam install datakit' returned a non-zero code: 4
[2017-05-09 10:38.46] Failed: Command "docker" "build" "--pull" "-f" "Dockerfile.github" "." exited with status 4
