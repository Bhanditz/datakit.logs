=== Docker build Dockerfile.bridge-local-git
[2018-04-24 15:21.35] Starting...
Cloning into '/tmp/with_clone2a64e81e'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at 1490c49 Increase opam solver timeout
[2018-04-24 15:21.36] Rewrite Dockerfile's first line to:
FROM sha256:df1434ed748df76cf8406593aa913ceab15f83f06dcc49663ded2255a8a0a305
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 6.128 MBSending build context to Docker daemon 6.685 MBSending build context to Docker daemon 7.242 MBSending build context to Docker daemon 7.799 MBSending build context to Docker daemon 8.356 MBSending build context to Docker daemon 8.913 MBSending build context to Docker daemon 9.316 MB
Step 1/10 : FROM sha256:df1434ed748df76cf8406593aa913ceab15f83f06dcc49663ded2255a8a0a305
 ---> df1434ed748d
Step 2/10 : COPY . /home/opam/src/datakit
 ---> b9029ebe84a7
Removing intermediate container cb714ec68659
Step 3/10 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in cac11fe3397b
 ---> 9e5307bbcdc0
Removing intermediate container cac11fe3397b
Step 4/10 : RUN opam update --dev && opam upgrade
 ---> Running in 370d70a0db87

=-=- Synchronising development packages -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-bridge-github.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-bridge-local-git.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-ci.0.12.1] synchronised from file:///home/opam/src/datakit
[datakit-client.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-client-9p.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-client-git.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-github.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-server.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-server-9p.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit] Conflicting update of the metadata from file:///home/opam/src/datakit.
Override files in /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/overlay/datakit (there will be a backup) ? [Y/n] y
User metadata backed up in /home/opam/.opam/backup/datakit.bak
[datakit-bridge-github] Conflicting update of the metadata from file:///home/opam/src/datakit.
Override files in /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/overlay/datakit-bridge-github (there will be a backup) ? [Y/n] y
User metadata backed up in /home/opam/.opam/backup/datakit-bridge-github.bak
[datakit-bridge-local-git] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-ci] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-client] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-client-9p] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-client-git] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-github] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-server] Installing new package description from upstream file:///home/opam/src/datakit
[datakit-server-9p] Installing new package description from upstream file:///home/opam/src/datakit
Now run 'opam upgrade' to apply any package updates.
The following actions will be performed:
  - recompile datakit-client     0.12.0* [upstream changes]
  - recompile datakit-client-git 0.12.0* [upstream changes]
  - recompile datakit-client-9p  0.12.0* [upstream changes]
===== 3 to recompile =====

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> removed   datakit-client-9p.0.12.0
-> removed   datakit-client-git.0.12.0
-> removed   datakit-client.0.12.0
-> installed datakit-client.0.12.0
-> installed datakit-client-9p.0.12.0
-> installed datakit-client-git.0.12.0
Done.
# Run eval $(opam env) to update the current shell environment
 ---> 2ed1f886cdb8
Removing intermediate container 370d70a0db87
Step 5/10 : RUN opam install datakit-bridge-local-git -tyv
 ---> Running in 4ad55f01e60e

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/1: [datakit-bridge-local-git.0.12.0: rsync]
[datakit-bridge-local-git.0.12.0] synchronised from file:///home/opam/src/datakit
[datakit-bridge-local-git] Installing new package description from upstream file:///home/opam/src/datakit

The following actions will be performed:
  - install crunch                   2.1.0   [required by irmin-http]
  - install datakit-github           0.12.0* [required by datakit-bridge-local-git]
  - install irmin-fs                 1.3.0   [required by irmin-unix]
  - install calendar                 2.03.2  [required by webmachine]
  - install dispatch                 0.4.0   [required by webmachine]
  - install webmachine               0.5.0   [required by irmin-http]
  - install irmin-http               1.3.3   [required by irmin-unix]
  - install irmin-unix               1.3.3   [required by datakit-bridge-local-git]
  - install datakit-bridge-local-git 0.12.0* 
===== 9 to install =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/9: [calendar.2.03.2: http]
Processing  2/9: [calendar.2.03.2: http] [crunch.2.1.0: http]
Processing  3/9: [calendar.2.03.2: http] [crunch.2.1.0: http]
Processing  4/9: [calendar.2.03.2: http] [crunch.2.1.0: http]
Processing  5/9: [calendar.2.03.2: http] [crunch.2.1.0: http] [dispatch.0.4.0: http]
[calendar.2.03.2] downloaded from http://forge.ocamlcore.org/frs/download.php/915/calendar-2.03.2.tar.gz
Processing  5/9: [crunch.2.1.0: http] [dispatch.0.4.0: http]
[irmin-fs.1.3.0] found in cache
Processing  6/9: [crunch.2.1.0: http] [dispatch.0.4.0: http]
Processing  7/9: [crunch.2.1.0: http] [dispatch.0.4.0: http] [irmin-http.1.3.3: http]
[dispatch.0.4.0] downloaded from https://github.com/inhabitedtype/ocaml-dispatch/archive/0.4.0.tar.gz
Processing  7/9: [crunch.2.1.0: http] [irmin-http.1.3.3: http]
Processing  8/9: [crunch.2.1.0: http] [irmin-http.1.3.3: http] [irmin-unix.1.3.3: http]
[crunch.2.1.0] downloaded from https://github.com/mirage/ocaml-crunch/releases/download/v2.1.0/crunch-2.1.0.tbz
Processing  8/9: [irmin-http.1.3.3: http] [irmin-unix.1.3.3: http]
Processing  9/9: [irmin-http.1.3.3: http] [irmin-unix.1.3.3: http] [webmachine.0.5.0: http]
[irmin-http.1.3.3] downloaded from https://github.com/mirage/irmin/releases/download/1.3.3/irmin-1.3.3.tbz
Processing  9/9: [irmin-unix.1.3.3: http] [webmachine.0.5.0: http]
[webmachine.0.5.0] downloaded from https://github.com/inhabitedtype/ocaml-webmachine/archive/0.5.0.tar.gz
Processing  9/9: [irmin-unix.1.3.3: http]
[irmin-unix.1.3.3] downloaded from https://github.com/mirage/irmin/releases/download/1.3.3/irmin-1.3.3.tbz
Processing  9/9:

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/18: [calendar: ./configure]
+ /home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/build/calendar.2.03.2/./configure  (CWD=/home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/build/calendar.2.03.2)
- checking for ocamlc... ocamlc
- ocaml version is 4.05.0: Good!
- ocaml library path is /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/ocaml
- checking for ocamlopt... ocamlopt
- checking ocamlopt version... ok
- checking for ocamlc.opt... ocamlc.opt
- checking ocamlc.opt version... ok
- checking for ocamlopt.opt... ocamlopt.opt
- checking ocamlc.opt version... ok
- checking for ocamldep... ocamldep
- checking for ocamlfind... ocamlfind
- checking for ocamldoc... ocamldoc
- checking for ocamlweb... ocamlweb
- checking for ocamlwc... ocamlwc
- checking for ocamldot... ocamldot
- checking platform... linux
- checking extension for object files... .o
- checking extension for library files... .a
- checking for /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/ocaml/dynlink.cmxa... yes
- native dynlink works fine. Great.
- configure: creating ./config.status
- config.status: creating Makefile
Processing  1/18: [calendar: make]
+ /usr/bin/make  (CWD=/home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/build/calendar.2.03.2)
- echo "let version = \"2.03.2\"" > src/version.ml
- echo "let date = \"`date`\"" >> src/version.ml
- rm -f .depend
- ocamldep -I src -I tests src/*.ml src/*.mli tests/*.ml tests/*.mli \
-   > .depend
- ocamlc.opt -I src -I target -I tests -c src/period.mli
- ocamlc.opt -I src -I target -I tests -c src/date_sig.mli
- ocamlc.opt -I src -I target -I tests -c src/time_Zone.mli
- ocamlc.opt -I src -I target -I tests -c src/time_sig.mli
- ocamlc.opt -I src -I target -I tests -c src/calendar_sig.mli
- ocamlc.opt -I src -I target -I tests -c src/utils.mli
- ocamlc.opt -I src -I target -I tests -c src/utils.ml
- ocamlc.opt -I src -I target -I tests -c src/time_Zone.ml
- ocamlc.opt -I src -I target -I tests -c src/time.mli
- ocamlc.opt -I src -I target -I tests -c src/time.ml
- ocamlc.opt -I src -I target -I tests -c src/ftime.mli
- ocamlc.opt -I src -I target -I tests -c src/ftime.ml
- ocamlc.opt -I src -I target -I tests -c src/date.mli
- ocamlc.opt -I src -I target -I tests -c src/date.ml
- ocamlc.opt -I src -I target -I tests -c src/calendar_builder.mli
- ocamlc.opt -I src -I target -I tests -c src/calendar_builder.ml
- ocamlc.opt -I src -I target -I tests -c src/calendar.mli
- ocamlc.opt -I src -I target -I tests -c src/calendar.ml
- ocamlc.opt -I src -I target -I tests -c src/fcalendar.mli
- ocamlc.opt -I src -I target -I tests -c src/fcalendar.ml
- ocamlc.opt -I src -I target -I tests -c src/printer.mli
- ocamlc.opt -I src -I target -I tests -c src/printer.ml
- File "src/printer.ml", line 180, characters 16-32:
- Warning 3: deprecated: String.uppercase
- Use String.uppercase_ascii instead.
- File "src/printer.ml", line 235, characters 33-49:
- Warning 3: deprecated: String.lowercase
- Use String.lowercase_ascii instead.
- ocamlc.opt -I src -I target -I tests -c src/version.mli
- ocamlc.opt -I src -I target -I tests -c src/version.ml
- mkdir -p target
- ocamlfind ocamlc -I src -I target -I tests -pack -o target/calendarLib.cmo \
- 	src/period.cmi src/date_sig.cmi src/time_sig.cmi src/calendar_sig.cmi src/utils.cmo src/time_Zone.cmo src/time.cmo src/ftime.cmo src/date.cmo src/calendar_builder.cmo src/calendar.cmo src/fcalendar.cmo src/printer.cmo src/version.cmo
- ocamlfind ocamlc -I src -I target -I tests -a -o target/calendarLib.cma target/calendarLib.cmo
- ocamlopt.opt -I src -I target -I tests -noassert -for-pack CalendarLib -c src/utils.ml
- ocamlopt.opt -I src -I target -I tests -noassert -for-pack CalendarLib -c src/time_Zone.ml
- ocamlopt.opt -I src -I target -I tests -noassert -for-pack CalendarLib -c src/time.ml
- ocamlopt.opt -I src -I target -I tests -noassert -for-pack CalendarLib -c src/ftime.ml
- ocamlopt.opt -I src -I target -I tests -noassert -for-pack CalendarLib -c src/date.ml
- ocamlopt.opt -I src -I target -I tests -noassert -for-pack CalendarLib -c src/calendar_builder.ml
- ocamlopt.opt -I src -I target -I tests -noassert -for-pack CalendarLib -c src/calendar.ml
- ocamlopt.opt -I src -I target -I tests -noassert -for-pack CalendarLib -c src/fcalendar.ml
- ocamlopt.opt -I src -I target -I tests -noassert -for-pack CalendarLib -c src/printer.ml
- File "src/printer.ml", line 180, characters 16-32:
- Warning 3: deprecated: String.uppercase
- Use String.uppercase_ascii instead.
- File "src/printer.ml", line 235, characters 33-49:
- Warning 3: deprecated: String.lowercase
- Use String.lowercase_ascii instead.
- ocamlopt.opt -I src -I target -I tests -noassert -for-pack CalendarLib -c src/version.ml
- mkdir -p target
- ocamlfind ocamlopt -I src -I target -I tests -noassert -pack -o target/calendarLib.cmx \
- 	src/period.cmi src/date_sig.cmi src/time_sig.cmi src/calendar_sig.cmi src/utils.cmx src/time_Zone.cmx src/time.cmx src/ftime.cmx src/date.cmx src/calendar_builder.cmx src/calendar.cmx src/fcalendar.cmx src/printer.cmx src/version.cmx
- ocamlfind ocamlopt -I src -I target -I tests -noassert -a -o target/calendarLib.cmxa target/calendarLib.cmx
- ocamlfind ocamlopt -I target -shared -linkall -o target/calendarLib.cmxs target/calendarLib.cmxa
- echo "description = \"calendar library\"" > META
- echo "version = \"2.03.2\"" >> META
- echo "archive(byte) = \"calendarLib.cma\"" >> META
- echo "archive(native) = \"calendarLib.cmxa\"" >> META
- echo "requires = \"unix str\"" >> META
-> compiled  calendar.2.03.2
Processing  2/18: [crunch: jbuilder build]
+ /home/opam/.opam/ocaml-base-compiler.4.05.0/bin/jbuilder "build" "-p" "crunch" "-j" "1" (CWD=/home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/build/crunch.2.1.0)
-> compiled  crunch.2.1.0
Processing  3/18: [datakit-github: jbuilder build]
+ /home/opam/.opam/ocaml-base-compiler.4.05.0/bin/jbuilder "build" "-p" "datakit-github" "-j" "1" (CWD=/home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/build/datakit-github.0.12.0)
-> compiled  datakit-github.0.12.0
Processing  4/18: [dispatch: jbuilder build]
+ /home/opam/.opam/ocaml-base-compiler.4.05.0/bin/jbuilder "build" "-p" "dispatch" "-j" "1" (CWD=/home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/build/dispatch.0.4.0)
-> compiled  dispatch.0.4.0
Processing  5/18: [irmin-fs: jbuilder build]
+ /home/opam/.opam/ocaml-base-compiler.4.05.0/bin/jbuilder "build" "-p" "irmin-fs" "-j" "1" (CWD=/home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/build/irmin-fs.1.3.0)
-> compiled  irmin-fs.1.3.0
Processing  6/18: [calendar: make install]
+ /usr/bin/make "install" (CWD=/home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/build/calendar.2.03.2)
- Installed /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/calendar/calendarLib.a
- Installed /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/calendar/calendarLib.o
- Installed /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/calendar/version.mli
- Installed /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/calendar/printer.mli
- Installed /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/calendar/fcalendar.mli
- Installed /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/calendar/calendar.mli
- Installed /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/calendar/calendar_builder.mli
- Installed /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/calendar/calendar_sig.mli
- Installed /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/calendar/date.mli
- Installed /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/calendar/date_sig.mli
- Installed /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/calendar/ftime.mli
- Installed /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/calendar/time.mli
- Installed /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/calendar/time_sig.mli
- Installed /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/calendar/period.mli
- Installed /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/calendar/time_Zone.mli
- Installed /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/calendar/utils.mli
- Installed /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/calendar/calendarLib.cmxs
- Installed /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/calendar/calendarLib.cmxa
- Installed /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/calendar/calendarLib.cmx
- Installed /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/calendar/calendarLib.cmo
- Installed /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/calendar/calendarLib.cmi
- Installed /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/calendar/calendarLib.cma
- Installed /home/opam/.opam/ocaml-base-compiler.4.05.0/lib/calendar/META
-> installed calendar.2.03.2
-> installed crunch.2.1.0
-> installed datakit-github.0.12.0
-> installed dispatch.0.4.0
Processing 10/18: [webmachine: jbuilder build]
+ /home/opam/.opam/ocaml-base-compiler.4.05.0/bin/jbuilder "build" "-p" "webmachine" "-j" "1" (CWD=/home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/build/webmachine.0.5.0)
-       ocamlc lib/.webmachine.objs/wm_util.{cmi,cmo,cmt}
- File "lib/wm_util.ml", line 95, characters 12-18:
- Warning 3: deprecated: module Re_str
- Use Re.Str
-     ocamlopt lib/.webmachine.objs/wm_util.{cmx,o}
- File "lib/wm_util.ml", line 95, characters 12-18:
- Warning 3: deprecated: module Re_str
- Use Re.Str
-> compiled  webmachine.0.5.0
-> installed irmin-fs.1.3.0
-> installed webmachine.0.5.0
Processing 13/18: [irmin-http: jbuilder build]
+ /home/opam/.opam/ocaml-base-compiler.4.05.0/bin/jbuilder "build" "-p" "irmin-http" "-j" "1" (CWD=/home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/build/irmin-http.1.3.3)
-> compiled  irmin-http.1.3.3
-> installed irmin-http.1.3.3
Processing 15/18: [irmin-unix: jbuilder build]
+ /home/opam/.opam/ocaml-base-compiler.4.05.0/bin/jbuilder "build" "-p" "irmin-unix" "-j" "1" (CWD=/home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/build/irmin-unix.1.3.3)
-> compiled  irmin-unix.1.3.3
-> installed irmin-unix.1.3.3
Processing 17/18: [datakit-bridge-local-git: jbuilder build]
+ /home/opam/.opam/ocaml-base-compiler.4.05.0/bin/jbuilder "build" "-p" "datakit-bridge-local-git" "-j" "1" (CWD=/home/opam/.opam/ocaml-base-compiler.4.05.0/.opam-switch/build/datakit-bridge-local-git.0.12.0)
-> compiled  datakit-bridge-local-git.0.12.0
-> installed datakit-bridge-local-git.0.12.0
Done.
# Run eval $(opam env) to update the current shell environment
 ---> f8c7fd7f3c2c
Removing intermediate container 4ad55f01e60e
Step 6/10 : RUN sudo cp $(opam config exec -- which datakit-bridge-local-git) /usr/bin/
 ---> Running in 22159f4a530e
 ---> 5711e1ee996a
Removing intermediate container 22159f4a530e
Step 7/10 : FROM alpine:3.5
 ---> 6c6084ed97e5
Step 8/10 : RUN apk add --no-cache libev gmp tzdata ca-certificates
 ---> Using cache
 ---> d1f6489c4cf7
Step 9/10 : ENTRYPOINT /usr/bin/datakit-bridge-local-git
 ---> Using cache
 ---> 6e3140b32976
Step 10/10 : COPY --from=0 /usr/bin/datakit-bridge-local-git /usr/bin/datakit-bridge-local-git
 ---> c90d8f6fac18
Removing intermediate container 1eb44b5418bc
Successfully built c90d8f6fac18
[2018-04-24 15:22.26] Success
