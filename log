=== Docker build Dockerfile
[2017-05-09 12:16.30] Starting...
Cloning into '/tmp/with_cloneaf353b7'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at 467b437 Fix packaging
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 6.102 MBSending build context to Docker daemon 6.102 MB
Step 1/32 : FROM ocaml/opam-dev@sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe: Pulling from ocaml/opam-dev
Digest: sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
Status: Image is up to date for ocaml/opam-dev@sha256:64dc0522876ebbd27b186e3ba955ae5ab864ace580add5b0d1abb8715bdf1bbe
 ---> 477ad7d223ad
Step 2/32 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> 20061f41087f
Step 3/32 : RUN sudo apk add tzdata aspcud gmp-dev perl
 ---> Using cache
 ---> f112729d161c
Step 4/32 : RUN opam pin add hvsock.0.14.0 -n https://github.com/mirage/ocaml-hvsock.git#88397c37a910c61507a9655ed8413c1692294da0
 ---> Using cache
 ---> c9e1cdb34949
Step 5/32 : RUN opam pin add irmin.1.1.0 -n https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0
 ---> Using cache
 ---> 8ff065f06349
Step 6/32 : RUN opam pin add irmin-git.1.1.0 -n https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0
 ---> Using cache
 ---> 123b5d719f8c
Step 7/32 : RUN opam pin add -yn protocol-9p.0.11.0 'https://github.com/mirage/ocaml-9p.git#v0.11.0'
 ---> Using cache
 ---> 460fe659f53f
Step 8/32 : RUN opam pin add -yn protocol-9p-unix.0.11.0 'https://github.com/mirage/ocaml-9p.git#v0.11.0'
 ---> Using cache
 ---> 1be450a70afd
Step 9/32 : RUN opam depext -ui lwt inotify alcotest conf-libev asl win-eventlog camlzip irmin-watcher mtime mirage-flow conduit hvsock prometheus-app git irmin cmdliner protocol-9p rresult win-error named-pipe
 ---> Using cache
 ---> 409314d8cb58
Step 10/32 : COPY check-libev.ml /tmp/check-libev.ml
 ---> Using cache
 ---> 3ff3fdda202d
Step 11/32 : RUN opam config exec -- ocaml /tmp/check-libev.ml
 ---> Using cache
 ---> e52bf3a59636
Step 12/32 : COPY datakit.opam /home/opam/src/datakit/
 ---> 88c6ff49ec0c
Removing intermediate container c426ce6dd454
Step 13/32 : COPY datakit-client.opam /home/opam/src/datakit/datakit-client.opam
 ---> 512ee914ebea
Error removing intermediate container be3b0ad66aba: Driver aufs failed to remove root filesystem be3b0ad66aba093d5d05d9fff7e53856c11982ba64a7b720e54687e027e2f567: rename /var/lib/docker/aufs/mnt/51891a9db3fcf82cc68d28f177016099662ebfdaa2c4d3b1c4beb479b7384361 /var/lib/docker/aufs/mnt/51891a9db3fcf82cc68d28f177016099662ebfdaa2c4d3b1c4beb479b7384361-removing: device or resource busy
Step 14/32 : COPY datakit-client-9p.opam /home/opam/src/datakit/datakit-client-9p.opam
 ---> 9b9370198eee
Error removing intermediate container be3b0ad66aba: No such container: be3b0ad66aba093d5d05d9fff7e53856c11982ba64a7b720e54687e027e2f567
Step 15/32 : COPY datakit-server.opam /home/opam/src/datakit/datakit-server.opam
 ---> 131a5f41ca2c
Error removing intermediate container be3b0ad66aba: No such container: be3b0ad66aba093d5d05d9fff7e53856c11982ba64a7b720e54687e027e2f567
Step 16/32 : COPY datakit-server-9p.opam /home/opam/src/datakit/datakit-server-9p.opam
 ---> a9d8b2f255e0
Error removing intermediate container be3b0ad66aba: No such container: be3b0ad66aba093d5d05d9fff7e53856c11982ba64a7b720e54687e027e2f567
Step 17/32 : RUN opam pin add datakit-server.dev /home/opam/src/datakit -yn &&     opam pin add datakit-server-9p.dev /home/opam/src/datakit -yn &&     opam pin add datakit-client.dev /home/opam/src/datakit -yn &&     opam pin add datakit-client-9p.dev /home/opam/src/datakit -yn &&     opam pin add datakit.dev /home/opam/src/datakit -yn
 ---> Running in 7dc04348f01a
[datakit-server.dev: rsync]
[datakit-server.dev] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-server/datakit-server.opam from 1.2 to 2.0~beta
[0mdatakit-server is now pinned to file:///home/opam/src/datakit (version dev)
Package datakit-server-9p does not exist, create as a NEW package ? [Y/n] y
[datakit-server-9p.dev: rsync]
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-server-9p/datakit-server-9p.opam from 1.2 to 2.0~beta
[0m[datakit-server-9p.dev] synchronised from file:///home/opam/src/datakit
datakit-server-9p is now pinned to file:///home/opam/src/datakit (version dev)
[datakit-client.dev: rsync]
[datakit-client.dev] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-client/datakit-client.opam from 1.2 to 2.0~beta
[0mdatakit-client is now pinned to file:///home/opam/src/datakit (version dev)
Package datakit-client-9p does not exist, create as a NEW package ? [Y/n] y
[datakit-client-9p.dev: rsync]
[datakit-client-9p.dev] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-client-9p/datakit-client-9p.opam from 1.2 to 2.0~beta
[0mdatakit-client-9p is now pinned to file:///home/opam/src/datakit (version dev)
[datakit.dev: rsync]
[datakit.dev] synchronised from file:///home/opam/src/datakit
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit/datakit.opam from 1.2 to 2.0~beta
[0mdatakit is now pinned to file:///home/opam/src/datakit (version dev)
 ---> 8f2081bb9062
Error removing intermediate container be3b0ad66aba: No such container: be3b0ad66aba093d5d05d9fff7e53856c11982ba64a7b720e54687e027e2f567
Step 18/32 : RUN opam depext -y datakit
 ---> Running in 94a7f67708a9
# Detecting depexts using flags: x86_64 linux alpine
# The following system packages are needed:
#  - gmp-dev
#  - linux-headers
#  - m4
#  - ncurses-dev
#  - openssl-dev
#  - pcre-dev
#  - perl
#  - pkgconfig
#  - zlib-dev
gmp-dev
linux-headers
m4
ncurses-dev
openssl-dev
pcre-dev
perl
pkgconf
zlib-dev
# All required OS packages found.
 ---> 0ba612473645
Removing intermediate container a982fd1c24fa
Removing intermediate container e8428e31c073
Removing intermediate container 7dc04348f01a
Removing intermediate container 94a7f67708a9
Error removing intermediate container be3b0ad66aba: No such container: be3b0ad66aba093d5d05d9fff7e53856c11982ba64a7b720e54687e027e2f567
Step 19/32 : RUN opam install -y --deps-only datakit
 ---> Running in d7af25d69392

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit.dev] no changes from file:///home/opam/src/datakit

The following actions will be performed:
  - install irmin-git         1.1.0*
  - install protocol-9p-unix  0.11.0*
  - install datakit-server    dev*
  - install datakit-server-9p dev*
===== 4 to install =====
[datakit-server.dev] synchronised from file:///home/opam/src/datakit
[datakit-server-9p.dev] synchronised from file:///home/opam/src/datakit
[protocol-9p-unix.0.11.0] synchronised from git+https://github.com/mirage/ocaml-9p.git#v0.11.0
[irmin-git.1.1.0] synchronised from git+https://github.com/mirage/irmin.git#89196ad17c53b02f333022a87ecc264ec8c06af0

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-server.dev
-> installed datakit-server-9p.dev
-> installed irmin-git.1.1.0
-> installed protocol-9p-unix.0.11.0
Done.
# Run eval `opam env` to update the current shell environment
 ---> c7939c7f4978
Error removing intermediate container be3b0ad66aba: No such container: be3b0ad66aba093d5d05d9fff7e53856c11982ba64a7b720e54687e027e2f567
Step 20/32 : RUN opam install datakit-client-9p alcotest
 ---> Running in 09270ccb98ae

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client-9p.dev] no changes from file:///home/opam/src/datakit

[91m[NOTE] Package alcotest is already installed (current version is 0.7.2).
[0mThe following actions will be performed:
  - install datakit-client    dev*                              [required by datakit-client-9p]
  - install datakit-client-9p dev*
===== 2 to install =====
[datakit-client.dev] synchronised from file:///home/opam/src/datakit
[datakit-client-9p.dev] synchronised from file:///home/opam/src/datakit

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-client.dev
-> installed datakit-client-9p.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> dc9bcda6d0dc
Error removing intermediate container be3b0ad66aba: No such container: be3b0ad66aba093d5d05d9fff7e53856c11982ba64a7b720e54687e027e2f567
Step 21/32 : COPY . /home/opam/src/datakit
 ---> ff966a431d8e
Removing intermediate container d7af25d69392
Removing intermediate container 09270ccb98ae
Error removing intermediate container e4b2990d5ea4: Driver aufs failed to remove root filesystem e4b2990d5ea4ce77483fa3dcaf9d5a5c43524e52845930659d7b3588b7974d01: rename /var/lib/docker/aufs/diff/fb122868b242242f1349207f68b0e8ddd4839c280312c4bd09775492823d2f3e /var/lib/docker/aufs/diff/fb122868b242242f1349207f68b0e8ddd4839c280312c4bd09775492823d2f3e-removing: device or resource busy
Step 22/32 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in 04bbba2e47b6
 ---> a15fb169d73e
Removing intermediate container 04bbba2e47b6
Error removing intermediate container e4b2990d5ea4: No such container: e4b2990d5ea4ce77483fa3dcaf9d5a5c43524e52845930659d7b3588b7974d01
Step 23/32 : RUN cd /home/opam/src/datakit &&     scripts/watermark.sh &&     git status --porcelain
 ---> Running in 43307bcda675
 M src/version.ml
 ---> 1d14d1ef9dc7
Error removing intermediate container be3b0ad66aba: No such container: be3b0ad66aba093d5d05d9fff7e53856c11982ba64a7b720e54687e027e2f567
Step 24/32 : RUN opam install datakit -ytv
 ---> Running in 34f2dd2c5962

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/1: [datakit.dev: rsync]
[datakit.dev] synchronised from file:///home/opam/src/datakit

The following actions will be performed:
  - install datakit dev*
[datakit.dev] synchronised from file:///home/opam/src/datakit

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Processing  1/2: [datakit: jbuilder build]
+ jbuilder "build" "-p" "datakit" "-j" "1" (CWD=/home/opam/.opam/default/.opam-switch/build/datakit.dev)
-     ocamldep src/datakit/bin/main.depends.ocamldep-output
-     ocamldep src/datakit/datakit.depends.ocamldep-output
-     ocamldep src/datakit/datakit.dependsi.ocamldep-output
-     ocamldep src/datakit-conduit/datakit_conduit.depends.ocamldep-output
-     ocamldep src/datakit-io/datakit_io.depends.ocamldep-output
-     ocamldep src/datakit-log/datakit_log.depends.ocamldep-output
-     ocamldep src/datakit-conduit/datakit_conduit.dependsi.ocamldep-output
-     ocamldep src/datakit-io/datakit_io.dependsi.ocamldep-output
-     ocamldep src/datakit-log/datakit_log.dependsi.ocamldep-output
-       ocamlc src/datakit-conduit/datakit_conduit.{cmi,cmti} (exit 2)
- (cd _build/default && /usr/bin/ocamlc.opt -w -40 -g -bin-annot -I /home/opam/.opam/default/lib/asetmap -I /home/opam/.opam/default/lib/astring -I /home/opam/.opam/default/lib/bos -I /home/opam/.opam/default/lib/bytes -I /home/opam/.opam/default/lib/cstruct -I /home/opam/.opam/default/lib/datakit-server-9p -I /home/opam/.opam/default/lib/duration -I /home/opam/.opam/default/lib/fmt -I /home/opam/.opam/default/lib/fpath -I /home/opam/.opam/default/lib/hvsock -I /home/opam/.opam/default/lib/io-page -I /home/opam/.opam/default/lib/logs -I /home/opam/.opam/default/lib/lwt -I /home/opam/.opam/default/lib/mirage-channel-lwt -I /home/opam/.opam/default/lib/mirage-device -I /home/opam/.opam/default/lib/mirage-flow -I /home/opam/.opam/default/lib/mirage-flow-lwt -I /home/opam/.opam/default/lib/mirage-kv -I /home/opam/.opam/default/lib/mirage-kv-lwt -I /home/opam/.opam/default/lib/mirage-time -I /home/opam/.opam/default/lib/mirage-time-lwt -I /home/opam/.opam/default/lib/named-pipe -I /home/opam/.opam/default/lib/ocplib-endian -I /home/opam/.opam/default/lib/prometheus -I /home/opam/.opam/default/lib/protocol-9p -I /home/opam/.opam/default/lib/protocol-9p-unix -I /home/opam/.opam/default/lib/re -I /home/opam/.opam/default/lib/result -I /home/opam/.opam/default/lib/rresult -I /home/opam/.opam/default/lib/sexplib -I /home/opam/.opam/default/lib/sexplib/0 -I /home/opam/.opam/default/lib/stringext -I /home/opam/.opam/default/lib/uchar -I /home/opam/.opam/default/lib/uri -I /usr/lib/ocaml -I /usr/lib/ocaml/threads -no-alias-deps -I src/datakit-conduit -o src/datakit-conduit/datakit_conduit.cmi -c -intf src/datakit-conduit/datakit_conduit.mli)
- File "src/datakit-conduit/datakit_conduit.mli", line 24, characters 57-66:
- Error: Unbound module Vfs


=-=- Error report -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
+- The following actions failed
| - build datakit dev
+- 
- No changes have been performed
[91m[ERROR] The compilation of datakit failed at "jbuilder build -p datakit -j 1".

#=== ERROR while compiling datakit.dev ========================================#
# command              jbuilder build -p datakit -j 1
# path                 /home/opam/.opam/default/.opam-switch/build/datakit.dev
# exit-code            1
# env-file             /home/opam/.opam/log/datakit-7-6d07ae.env
# output-file          /home/opam/.opam/log/datakit-7-6d07ae.out
### output ###
#     ocamldep src/datakit/bin/main.depends.ocamldep-output
#     ocamldep src/datakit/datakit.depends.ocamldep-output
#     ocamldep src/datakit/datakit.dependsi.ocamldep-output
#     ocamldep src/datakit-conduit/datakit_conduit.depends.ocamldep-output
#     ocamldep src/datakit-io/datakit_io.depends.ocamldep-output
#     ocamldep src/datakit-log/datakit_log.depends.ocamldep-output
#     ocamldep src/datakit-conduit/datakit_conduit.dependsi.ocamldep-output
#     ocamldep src/datakit-io/datakit_io.dependsi.ocamldep-output
#     ocamldep src/datakit-log/datakit_log.dependsi.ocamldep-output
#       ocamlc src/datakit-conduit/datakit_conduit.{cmi,cmti} (exit 2)
# (cd _build/default && /usr/bin/ocamlc.opt -w -40 -g -bin-annot -I /home/opam/.opam/default/lib/asetmap -I /home/opam/.opam/default/lib/astring -I /home/opam/.opam/default/lib/bos -I /home/opam/.opam/default/lib/bytes -I /home/opam/.opam/default/lib/cstruct -I /home/opam/.opam/default/lib/datakit-server-9p -I /home/opam/.opam/default/lib/duration -I /home/opam/.opam/default/lib/fmt -I /home/opam/.opam/default/lib/fpath -I /home/opam/.opam/default/lib/hvsock -I /home/opam/.opam/default/lib/io-page -I /home/opam/.opam/default/lib/logs -I /home/opam/.opam/default/lib/lwt -I /home/opam/.opam/default/lib/mirage-channel-lwt -I /home/opam/.opam/default/lib/mirage-device -I /home/opam/.opam/default/lib/mirage-flow -I /home/opam/.opam/default/lib/mirage-flow-lwt -I /home/opam/.opam/default/lib/mirage-kv -I /home/opam/.opam/default/lib/mirage-kv-lwt -I /home/opam/.opam/default/lib/mirage-time -I /home/opam/.opam/default/lib/mirage-time-lwt -I /home/opam/.opam/default/lib/named-pipe -I /home/opam/.opam/default/lib/ocplib-endian -I /home/opam/.opam/default/lib/prometheus -I /home/opam/.opam/default/lib/protocol-9p -I /home/opam/.opam/default/lib/protocol-9p-unix -I /home/opam/.opam/default/lib/re -I /home/opam/.opam/default/lib/result -I /home/opam/.opam/default/lib/rresult -I /home/opam/.opam/default/lib/sexplib -I /home/opam/.opam/default/lib/sexplib/0 -I /home/opam/.opam/default/lib/stringext -I /home/opam/.opam/default/lib/uchar -I /home/opam/.opam/default/lib/uri -I /usr/lib/ocaml -I /usr/lib/ocaml/threads -no-alias-deps -I src/datakit-conduit -o src/datakit-conduit/datakit_conduit.cmi -c -intf src/datakit-conduit/datakit_conduit.mli)
# File "src/datakit-conduit/datakit_conduit.mli", line 24, characters 57-66:
# Error: Unbound module Vfs

[0m# Run eval `opam env` to update the current shell environment
[91m'opam install datakit -ytv' failed.
[0mThe command '/bin/sh -c opam install datakit -ytv' returned a non-zero code: 4
[2017-05-09 12:17.49] Failed: Command "docker" "build" "--pull" "-f" "Dockerfile" "." exited with status 4
