=== Docker build Dockerfile.ci
[2017-02-17 17:21.12] Starting...
Cloning into '/tmp/with_clone3de70be3'...
done.
HEAD is now at 80184b9 ci: batch up status history writes
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 6.128 MBSending build context to Docker daemon 6.685 MBSending build context to Docker daemon 7.079 MB
Step 1/19 : FROM ocaml/opam:alpine-3.5_ocaml-4.04.0
alpine-3.5_ocaml-4.04.0: Pulling from ocaml/opam
Digest: sha256:209b7003457af0d1eb7cbcf09d8bc1b3a816bd210e34b67b700e99b4f2e50db1
Status: Image is up to date for ocaml/opam:alpine-3.5_ocaml-4.04.0
 ---> 4c087fe6eabb
Step 2/19 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> a1f971f59d01
Step 3/19 : RUN sudo apk add tzdata
 ---> Using cache
 ---> ed9c79177110
Step 4/19 : RUN opam depext -i opam-devel && sudo cp $(opam config var "opam-devel:lib")/opam /usr/bin/opam
 ---> Using cache
 ---> 004174b5ae1f
Step 5/19 : RUN rm -rf ~/.opam
 ---> Using cache
 ---> 90ce9b4eb632
Step 6/19 : RUN opam init -y
 ---> Using cache
 ---> 1f7d352993b1
Step 7/19 : RUN opam install ocaml -y
 ---> Using cache
 ---> b43634fa493e
Step 8/19 : RUN opam install depext -y
 ---> Using cache
 ---> 6e4579807d43
Step 9/19 : RUN opam pin add -yn datakit-client.dev https://github.com/docker/datakit.git
 ---> Using cache
 ---> 7558fdce58bc
Step 10/19 : ADD datakit-ci.opam /tmp/deps/opam
 ---> Using cache
 ---> cbc0589817db
Step 11/19 : RUN opam pin add -y tmp /tmp/deps/opam -n
 ---> Using cache
 ---> 6c602d7c70fd
Step 12/19 : RUN opam depext tmp -y
 ---> Using cache
 ---> d19affb4670a
Step 13/19 : RUN opam install --deps-only tmp -y
 ---> Using cache
 ---> 459932b3017c
Step 14/19 : ADD . /home/opam/datakit
 ---> 44da247ac484
Removing intermediate container 7d984e320800
Step 15/19 : RUN sudo chown opam /home/opam/datakit
 ---> Running in e0dde8e23e4b
 ---> d9f0a04b9935
Removing intermediate container e0dde8e23e4b
Step 16/19 : RUN opam pin add -k git datakit-client.dev /home/opam/datakit -y
 ---> Running in 2c175f2f48c3
[91m[NOTE] Will pin to 'master' using git
[0m[91m[NOTE] Package datakit-client is currently pinned to git+https://github.com/docker/datakit.git (version dev).
[0mProceed and change pinning target ? [Y/n] y
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-client/datakit-client.opam from 1.2 to 2.0~beta
[0mdatakit-client is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - recompile datakit-client dev*
  - recompile datakit-github 0.9.0                              [uses datakit-client]
===== 2 to recompile =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-github.0.9.0] found in cache
[datakit-client.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> removed   datakit-github.0.9.0
-> removed   datakit-client.dev
-> installed datakit-client.dev
-> installed datakit-github.0.9.0
Done.
# Run eval `opam env` to update the current shell environment
 ---> bf21561f0d08
Removing intermediate container 2c175f2f48c3
Step 17/19 : RUN opam pin add -k git datakit-ci.dev /home/opam/datakit -y
 ---> Running in 1e2e57bd476e
[91m[NOTE] Will pin to 'master' using git
[0m[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-ci/datakit-ci.opam from 1.2 to 2.0~beta
[0mdatakit-ci is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-ci dev*
[datakit-ci.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-ci.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> 502ee90f3c01
Removing intermediate container 1e2e57bd476e
Step 18/19 : RUN opam pin add -k git datakit-github.dev /home/opam/datakit -yn
 ---> Running in b276f70856a7
[91m[NOTE] Will pin to 'master' using git
[0m[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-github/datakit-github.opam from 1.2 to 2.0~beta
[0mdatakit-github is now pinned to git+file:///home/opam/datakit#master (version dev)
 ---> 5e7e612b3800
Removing intermediate container b276f70856a7
Step 19/19 : VOLUME /secrets
 ---> Running in 905283e1df0c
 ---> ef5598cf7f57
Removing intermediate container 905283e1df0c
Successfully built ef5598cf7f57
[2017-02-17 17:22.16] Success
