=== docker build -f "Dockerfile"
[2017-01-13 14:05.59] Starting...
Cloning into '/tmp/with_clone35e92436'...
done.
HEAD is now at b450d04 Merge pull request #285 from samoht/master
[2017-01-13 14:14.18] Rewrite Dockerfile's first line to:
FROM sha256:1802b8f7af500347888378c484a389e07693b6f83542d932efc48774040482dd
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 3.974 MB
Step 1 : FROM sha256:1802b8f7af500347888378c484a389e07693b6f83542d932efc48774040482dd
 ---> 1802b8f7af50
Step 2 : COPY opam /home/opam/src/datakit/opam
 ---> 215417555fa3
Removing intermediate container 4b7195701b45
Step 3 : RUN opam pin add datakit.dev /home/opam/src/datakit -n
 ---> Running in ee92b2f06596
datakit is now path-pinned to /home/opam/src/datakit

[datakit: local]
[datakit] /home/opam/src/datakit/ synchronized
[datakit] Installing new package description from /home/opam/src/datakit

 ---> 20c1970a1546
Removing intermediate container ee92b2f06596
Step 4 : RUN opam depext datakit && opam install datakit --deps
 ---> Running in f4cc4d5c9af0
# Detecting depexts using flags: x86_64 linux alpine
# The following system packages are needed:
#  - linux-headers
#  - m4
#  - ncurses-dev
#  - openssl-dev
#  - pkgconfig
#  - zlib-dev
m4
ncurses-dev
pkgconfig
# The following new OS packages need to be installed: linux-headers openssl-dev zlib-dev
The following command needs to be run through "sudo":
    apk add linux-headers openssl-dev zlib-dev
(1/3) Installing linux-headers (4.4.6-r1)
(2/3) Installing zlib-dev (1.2.8-r2)
(3/3) Installing openssl-dev (1.0.2j-r0)
OK: 435 MiB in 87 packages
# OS packages installation successful

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit: local] Command started
[datakit] /home/opam/src/datakit/ already up-to-date
The following actions will be performed:
  - install mtime           0.8.3         
  - install bin_prot        113.33.00+4.03
  - install conduit         0.14.4        
  - install uchar           0.0.1         
  - install magic-mime      1.0.0         
  - install asl             0.10          
  - install camlzip         1.06          
  - install base64          2.1.2         
  - install irmin-watcher   0.2.0         
  - install mstruct         1.3.2         
  - install crunch          1.4.1         
  - install mirage-flow     1.1.0         
  - install hex             1.0.0         
  - install win-eventlog    0.1           
  - install fieldslib       113.24.00     
  - install duration        0.1.0         
  - install ocamlgraph      1.8.7         
  - install uutf            1.0.0         
  - install ppx_fields_conv 113.33.00+4.03
  - install hvsock          0.11.1        
  - install jsonm           1.0.0         
  - install cohttp          0.21.0        
  - install ezjsonm         0.4.3         
  - install git             1.9.3         
  - install mirage-tc       0.3.0         
  - install irmin           0.12.0        
===== 26 to install =====
Do you want to continue ? [Y/n] y

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[asl: http] Command started
[base64: http] Command started
[bin_prot: http] Command started
[base64: http] Command started
[base64.2.1.2] https://github.com/mirage/ocaml-base64/releases/download/v2.1.2/base64-2.1.2.tbz downloaded
[camlzip: http] Command started
[asl: http] Command started
[asl.0.10] https://github.com/mirage/ocaml-asl/archive/v0.10.tar.gz downloaded
[cohttp: http] Command started
[bin_prot: http] Command started
[bin_prot.113.33.00+4.03] https://ocaml.janestreet.com/ocaml-core/113.33/files/bin_prot-113.33.00+4.03.tar.gz downloaded
[conduit: http] Command started
[camlzip: http] Command started
[camlzip.1.06] https://forge.ocamlcore.org/frs/download.php/1616/camlzip-1.06.tar.gz downloaded
[crunch: http] Command started
[cohttp: http] Command started
[cohttp.0.21.0] https://github.com/mirage/ocaml-cohttp/archive/v0.21.0.tar.gz downloaded
[duration: http] Command started
[conduit: http] Command started
[conduit.0.14.4] https://github.com/mirage/ocaml-conduit/archive/v0.14.4.tar.gz downloaded
[ezjsonm: http] Command started
[crunch: http] Command started
[crunch.1.4.1] https://github.com/mirage/ocaml-crunch/archive/v1.4.1.tar.gz downloaded
[fieldslib: http] Command started
[duration: http] Command started
[duration.0.1.0] https://github.com/hannesm/duration/releases/download/0.1.0/duration-0.1.0.tbz downloaded
[git: http] Command started
[fieldslib: http] Command started
[fieldslib.113.24.00] https://ocaml.janestreet.com/ocaml-core/113.24/files/fieldslib-113.24.00.tar.gz downloaded
[hex: http] Command started
[ezjsonm: http] Command started
[ezjsonm.0.4.3] https://github.com/mirage/ezjsonm/archive/0.4.3.tar.gz downloaded
[hvsock: http] Command started
[hex: http] Command started
[hex.1.0.0] https://github.com/mirage/ocaml-hex/archive/1.0.0.tar.gz downloaded
[irmin: http] Command started
[hvsock: http] Command started
[hvsock.0.11.1] https://github.com/mirage/ocaml-hvsock/archive/v0.11.1.tar.gz downloaded
[irmin-watcher: http] Command started
[git: http] Command started
[git.1.9.3] https://github.com/mirage/ocaml-git/releases/download/1.9.3/git-1.9.3.tbz downloaded
[jsonm: http] Command started
[jsonm: http] Command started
[jsonm.1.0.0] http://erratique.ch/software/jsonm/releases/jsonm-1.0.0.tbz downloaded
[magic-mime: http] Command started
[irmin-watcher: http] Command started
[irmin-watcher.0.2.0] https://github.com/samoht/irmin-watcher/releases/download/0.2.0/irmin-watcher-0.2.0.tbz downloaded
[mirage-flow: http] Command started
[irmin: http] Command started
[irmin.0.12.0] https://github.com/mirage/irmin/releases/download/0.12.0/irmin-0.12.0.tbz downloaded
[mirage-tc: http] Command started
[magic-mime: http] Command started
[magic-mime.1.0.0] https://github.com/mirage/ocaml-magic-mime/archive/v1.0.0.tar.gz downloaded
[mstruct: http] Command started
[mirage-flow: http] Command started
[mirage-flow.1.1.0] https://github.com/mirage/mirage-flow/archive/v1.1.0.tar.gz downloaded
[mtime: http] Command started
[mtime: http] Command started
[mtime.0.8.3] http://erratique.ch/software/mtime/releases/mtime-0.8.3.tbz downloaded
[ocamlgraph: http] Command started
[mirage-tc: http] Command started
[mirage-tc.0.3.0] https://github.com/mirage/mirage-tc/archive/0.3.0.tar.gz downloaded
[ppx_fields_conv: http] Command started
[mstruct: http] Command started
[mstruct.1.3.2] https://github.com/mirage/ocaml-mstruct/archive/1.3.2.tar.gz downloaded
[uchar: http] Command started
[ocamlgraph: http] Command started
[ocamlgraph.1.8.7] http://ocamlgraph.lri.fr/download/ocamlgraph-1.8.7.tar.gz downloaded
[uutf: http] Command started
[uutf: http] Command started
[uutf.1.0.0] http://erratique.ch/software/uutf/releases/uutf-1.0.0.tbz downloaded
[win-eventlog: http] Command started
[ppx_fields_conv: http] Command started
[ppx_fields_conv.113.33.00+4.03] https://ocaml.janestreet.com/ocaml-core/113.33/files/ppx_fields_conv-113.33.00+4.03.tar.gz downloaded
[uchar: http] Command started
[uchar.0.0.1] https://github.com/ocaml/uchar/releases/download/v0.0.1/uchar-0.0.1.tbz downloaded
[win-eventlog: http] Command started
[win-eventlog.0.1] https://github.com/djs55/ocaml-win-eventlog/archive/v0.1.tar.gz downloaded

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[asl: make] Command started
[base64: ocaml build] Command started
[bin_prot: ./configure] Command started
[camlzip: make all] Command started
-> installed base64.2.1.2
[conduit: ./configure] Command started
[conduit: make] Command started
[camlzip: make allopt] Command started
[camlzip: make install-findlib] Command started
-> installed camlzip.1.06
[crunch: ocaml setup.ml] Command started
[bin_prot: make] Command started
[crunch: ocaml setup.ml] Command started
[crunch: ocaml setup.ml] Command started
[asl: make install] Command started
-> installed crunch.1.4.1
[duration: ocaml build] Command started
-> installed asl.0.10
[fieldslib: ./configure] Command started
-> installed duration.0.1.0
[hex: ./configure] Command started
[conduit: make install] Command started
-> installed conduit.0.14.4
[irmin-watcher: ocaml build] Command started
-> installed bin_prot.113.33.00+4.03
[magic-mime: ./configure] Command started
[fieldslib: make] Command started
[hex: make] Command started
[magic-mime: make] Command started
-> installed irmin-watcher.0.2.0
[mirage-flow: ./configure] Command started
-> installed fieldslib.113.24.00
[mstruct: ./configure] Command started
[hex: make install] Command started
[mirage-flow: make] Command started
[magic-mime: make install] Command started
[mstruct: make] Command started
-> installed hex.1.0.0
[mtime: ocaml] Command started
[mtime: ocaml] Command started
-> installed magic-mime.1.0.0
[ocamlgraph: touch] Command started
[ocamlgraph: ./configure] Command started
[ocamlgraph: make] Command started
-> installed mtime.0.8.3
[ppx_fields_conv: ./configure] Command started
[mstruct: make install] Command started
[mirage-flow: make install] Command started
[ppx_fields_conv: make] Command started
-> installed mstruct.1.3.2
[uchar: ocaml] Command started
[uchar: ocaml] Command started
-> installed mirage-flow.1.1.0
[hvsock: ocaml setup.ml] Command started
-> installed uchar.0.0.1
[uutf: ocaml build] Command started
-> installed uutf.1.0.0
[jsonm: ocaml build] Command started
[hvsock: make] Command started
-> installed ppx_fields_conv.113.33.00+4.03
[cohttp: make] Command started
-> installed jsonm.1.0.0
[ezjsonm: ./configure] Command started
[ezjsonm: make] Command started
[ocamlgraph: make install-findlib] Command started
-> installed ocamlgraph.1.8.7
[win-eventlog: make] Command started
[ezjsonm: make install] Command started
[hvsock: make install] Command started
-> installed ezjsonm.0.4.3
[mirage-tc: ./configure] Command started
-> installed hvsock.0.11.1
[mirage-tc: make] Command started
[win-eventlog: make install] Command started
-> installed win-eventlog.0.1
[mirage-tc: make install] Command started
-> installed mirage-tc.0.3.0
[cohttp: make install] Command started
-> installed cohttp.0.21.0
[git: ocaml build] Command started
-> installed git.1.9.3
[irmin: ocaml build] Command started
-> installed irmin.0.12.0
Done.
 ---> 867e5a34a45d
Removing intermediate container f4cc4d5c9af0
Step 5 : COPY . /home/opam/src/datakit
 ---> 137ec1cb5c06
Removing intermediate container a6d8474451cb
Step 6 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in 075ff7013e92
 ---> c8c30ad3c4d2
Removing intermediate container 075ff7013e92
Step 7 : RUN cd /home/opam/src/datakit &&     git diff && git status --porcelain &&     git checkout . && scripts/watermark.sh &&     git status --porcelain
 ---> Running in 5e1eabf364b9
diff --git a/Dockerfile b/Dockerfile
index d363c11..b825a48 100644
--- a/Dockerfile
+++ b/Dockerfile
@@ -1,4 +1,4 @@
-FROM docker/datakit:server
+FROM sha256:1802b8f7af500347888378c484a389e07693b6f83542d932efc48774040482dd
 
 COPY opam /home/opam/src/datakit/opam
 RUN opam pin add datakit.dev /home/opam/src/datakit -n
 M Dockerfile
 M src/version.ml
 ---> 3df98c957f34
Removing intermediate container 5e1eabf364b9
Step 8 : RUN opam update datakit
 ---> Running in 378608b4a4e1

=-=- Synchronizing development packages -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit: local] Command started
[datakit] /home/opam/src/datakit/ synchronized
 ---> 371869cda243
Removing intermediate container 378608b4a4e1
Step 9 : RUN opam install datakit.dev -vv
 ---> Running in 2e7dfe5b7ed2

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.03.0/packages.dev/datakit"
- sending incremental file list
- ./
- api/
- src/
- 
- sent 4,516 bytes  received 47 bytes  9,126.00 bytes/sec
- total size is 532,091  speedup is 116.61
[datakit] /home/opam/src/datakit/ synchronized
The following actions will be performed:
  - install datakit dev*

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/4.03.0/packages.dev/datakit"
- sending incremental file list
- ./
- 
- sent 4,510 bytes  received 41 bytes  9,102.00 bytes/sec
- total size is 532,091  speedup is 116.92
[datakit.dev] /home/opam/src/datakit/ already up-to-date

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit: ocaml build] Command started
+ ocaml "pkg/pkg.ml" "build" "--pinned" "true" "--tests" "false" (CWD=/home/opam/.opam/4.03.0/build/datakit.dev)
- ocamlfind ocamldep -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/ivfs/ivfs.ml > src/ivfs/ivfs.ml.depends
- ocamlfind ocamldep -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/ivfs/ivfs.mli > src/ivfs/ivfs.mli.depends
- ocamlfind ocamldep -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/ivfs/ivfs_tree.mli > src/ivfs/ivfs_tree.mli.depends
- ocamlfind ocamldep -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/ivfs/ivfs_blob.mli > src/ivfs/ivfs_blob.mli.depends
- ocamlfind ocamldep -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/vfs/vfs.mli > src/vfs/vfs.mli.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/vfs -I src -I src/ivfs -I src/conduit -I src/client -I src/log -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/vfs/vfs.cmi src/vfs/vfs.mli
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/ivfs -I src -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/ivfs/ivfs_blob.cmi src/ivfs/ivfs_blob.mli
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/ivfs -I src -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/ivfs/ivfs_tree.cmi src/ivfs/ivfs_tree.mli
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/ivfs -I src -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/ivfs/ivfs.cmi src/ivfs/ivfs.mli
- ocamlfind ocamldep -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/ivfs/ivfs_blob.ml > src/ivfs/ivfs_blob.ml.depends
- ocamlfind ocamldep -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/vfs/vfs.ml > src/vfs/vfs.ml.depends
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/vfs -I src -I src/ivfs -I src/conduit -I src/client -I src/log -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/vfs/vfs.cmx src/vfs/vfs.ml
- ocamlfind ocamldep -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/ivfs/ivfs_debug.ml > src/ivfs/ivfs_debug.ml.depends
- ocamlfind ocamldep -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/ivfs/ivfs_debug.mli > src/ivfs/ivfs_debug.mli.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/ivfs -I src -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/ivfs/ivfs_debug.cmi src/ivfs/ivfs_debug.mli
- ocamlfind ocamldep -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/ivfs/ivfs_merge.ml > src/ivfs/ivfs_merge.ml.depends
- ocamlfind ocamldep -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/ivfs/ivfs_merge.mli > src/ivfs/ivfs_merge.mli.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/ivfs -I src -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/ivfs/ivfs_merge.cmi src/ivfs/ivfs_merge.mli
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/ivfs -I src -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/ivfs/ivfs_blob.cmx src/ivfs/ivfs_blob.ml
- ocamlfind ocamldep -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/ivfs/ivfs_tree.ml > src/ivfs/ivfs_tree.ml.depends
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/ivfs -I src -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/ivfs/ivfs_tree.cmx src/ivfs/ivfs_tree.ml
- ocamlfind ocamldep -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/ivfs/ivfs_remote.ml > src/ivfs/ivfs_remote.ml.depends
- ocamlfind ocamldep -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/ivfs/ivfs_remote.mli > src/ivfs/ivfs_remote.mli.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/ivfs -I src -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/ivfs/ivfs_remote.cmi src/ivfs/ivfs_remote.mli
- ocamlfind ocamldep -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/ivfs/ivfs_rw.ml > src/ivfs/ivfs_rw.ml.depends
- ocamlfind ocamldep -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/ivfs/ivfs_rw.mli > src/ivfs/ivfs_rw.mli.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/ivfs -I src -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/ivfs/ivfs_rw.cmi src/ivfs/ivfs_rw.mli
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/ivfs -I src -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/ivfs/ivfs_debug.cmx src/ivfs/ivfs_debug.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/ivfs -I src -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/ivfs/ivfs_merge.cmx src/ivfs/ivfs_merge.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/ivfs -I src -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/ivfs/ivfs_remote.cmx src/ivfs/ivfs_remote.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/ivfs -I src -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/ivfs/ivfs_rw.cmx src/ivfs/ivfs_rw.ml
- ocamlfind ocamlopt -c -g -bin-annot -safe-string -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/ivfs -I src -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/ivfs/ivfs.cmx src/ivfs/ivfs.ml
- ocamlfind ocamlopt -a -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' src/ivfs/ivfs_blob.cmx src/ivfs/ivfs_debug.cmx src/ivfs/ivfs_tree.cmx src/ivfs/ivfs_merge.cmx src/ivfs/ivfs_remote.cmx src/ivfs/ivfs_rw.cmx src/ivfs/ivfs.cmx -o src/ivfs/datakit-ivfs.cmxa
- ocamlfind ocamlopt -shared -linkall -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' src/ivfs/datakit-ivfs.cmxa -o src/ivfs/datakit-ivfs.cmxs
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/ivfs -I src -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/ivfs/ivfs.cmo src/ivfs/ivfs.ml
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/ivfs -I src -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/ivfs/ivfs_debug.cmo src/ivfs/ivfs_debug.ml
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/ivfs -I src -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/ivfs/ivfs_tree.cmo src/ivfs/ivfs_tree.ml
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/ivfs -I src -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/ivfs/ivfs_remote.cmo src/ivfs/ivfs_remote.ml
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/ivfs -I src -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/ivfs/ivfs_blob.cmo src/ivfs/ivfs_blob.ml
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/ivfs -I src -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/ivfs/ivfs_merge.cmo src/ivfs/ivfs_merge.ml
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/ivfs -I src -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/ivfs/ivfs_rw.cmo src/ivfs/ivfs_rw.ml
- ocamlfind ocamlc -a -package 'irmin tc' -package 'bytes lwt astring logs result cstruct fmt rresult' src/ivfs/ivfs_blob.cmo src/ivfs/ivfs_debug.cmo src/ivfs/ivfs_tree.cmo src/ivfs/ivfs_merge.cmo src/ivfs/ivfs_remote.cmo src/ivfs/ivfs_rw.cmo src/ivfs/ivfs.cmo -o src/ivfs/datakit-ivfs.cma
- ocamlfind ocamldep -package protocol-9p.unix -package 'asl win-eventlog cmdliner mtime.os logs.cli' -package 'hvsock.lwt-unix named-pipe.lwt uri mirage-flow' -package 'threads conduit.lwt-unix hvsock.lwt' -package 'cmdliner fmt.cli fmt.tty logs.fmt' -package 'protocol-9p.unix camlzip' -package 'irmin.http cohttp.lwt' -package 'git irmin irmin.git irmin.mem irmin-watcher' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/bin/main.ml > src/bin/main.ml.depends
- ocamlfind ocamldep -package protocol-9p.unix -package 'hvsock.lwt-unix named-pipe.lwt uri mirage-flow' -package 'threads conduit.lwt-unix hvsock.lwt' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/conduit/datakit_conduit.mli > src/conduit/datakit_conduit.mli.depends
- ocamlfind ocamldep -package 'asl win-eventlog cmdliner logs.cli' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/log/datakit_log.mli > src/log/datakit_log.mli.depends
- ocamlfind ocamldep -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/irmin-io/ir_io.mli > src/irmin-io/ir_io.mli.depends
- ocamlfind ocamldep -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/version.ml > src/version.ml.depends
- ocamlfind ocamlc -c -g -bin-annot -safe-string -thread -package protocol-9p.unix -package 'hvsock.lwt-unix named-pipe.lwt uri mirage-flow' -package 'threads conduit.lwt-unix hvsock.lwt' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/conduit -I src -I src/ivfs -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/conduit/datakit_conduit.cmi src/conduit/datakit_conduit.mli
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'asl win-eventlog cmdliner logs.cli' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/log -I src -I src/ivfs -I src/conduit -I src/client -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/log/datakit_log.cmi src/log/datakit_log.mli
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/irmin-io -I src -I src/ivfs -I src/conduit -I src/client -I src/log -I src/vfs -I src/fs9p -I bridge/github/src -o src/irmin-io/ir_io.cmi src/irmin-io/ir_io.mli
- ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src -I src/ivfs -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/version.cmo src/version.ml
- ocamlfind ocamlc -c -g -bin-annot -safe-string -thread -package protocol-9p.unix -package 'asl win-eventlog cmdliner mtime.os logs.cli' -package 'hvsock.lwt-unix named-pipe.lwt uri mirage-flow' -package 'threads conduit.lwt-unix hvsock.lwt' -package 'cmdliner fmt.cli fmt.tty logs.fmt' -package 'protocol-9p.unix camlzip' -package 'irmin.http cohttp.lwt' -package 'git irmin irmin.git irmin.mem irmin-watcher' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/bin -I src -I src/ivfs -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/bin/main.cmo src/bin/main.ml
- + ocamlfind ocamlc -c -g -bin-annot -safe-string -thread -package protocol-9p.unix -package 'asl win-eventlog cmdliner mtime.os logs.cli' -package 'hvsock.lwt-unix named-pipe.lwt uri mirage-flow' -package 'threads conduit.lwt-unix hvsock.lwt' -package 'cmdliner fmt.cli fmt.tty logs.fmt' -package 'protocol-9p.unix camlzip' -package 'irmin.http cohttp.lwt' -package 'git irmin irmin.git irmin.mem irmin-watcher' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/bin -I src -I src/ivfs -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/bin/main.cmo src/bin/main.ml
- File "src/bin/main.ml", line 57, characters 45-71:
- Error: Unbound value Irmin_watcher_polling.hook
- Command exited with code 2.
- pkg.ml: [ERROR] cmd ['ocamlbuild' '-use-ocamlfind' '-classic-display' '-tag' 'debug'
-      '-build-dir' '_build' 'CHANGES.md' 'LICENSE.md' 'README.md' 'pkg/META'
-      'opam' 'src/ivfs/datakit-ivfs.a' 'src/ivfs/datakit-ivfs.cmxs'
-      'src/ivfs/datakit-ivfs.cmxa' 'src/ivfs/datakit-ivfs.cma'
-      'src/ivfs/ivfs_rw.cmx' 'src/ivfs/ivfs_rw.cmi' 'src/ivfs/ivfs_rw.mli'
-      'src/ivfs/ivfs_merge.cmx' 'src/ivfs/ivfs_merge.cmi'
-      'src/ivfs/ivfs_merge.mli' 'src/ivfs/ivfs_blob.cmx'
-      'src/ivfs/ivfs_blob.cmi' 'src/ivfs/ivfs_blob.mli'
-      'src/ivfs/ivfs_remote.cmx' 'src/ivfs/ivfs_remote.cmi'
-      'src/ivfs/ivfs_remote.mli' 'src/ivfs/ivfs_tree.cmx'
-      'src/ivfs/ivfs_tree.cmi' 'src/ivfs/ivfs_tree.mli'
-      'src/ivfs/ivfs_debug.cmx' 'src/ivfs/ivfs_debug.cmi'
-      'src/ivfs/ivfs_debug.mli' 'src/ivfs/ivfs.cmx' 'src/ivfs/ivfs.cmi'
-      'src/ivfs/ivfs.mli' 'src/bin/main.native' 'src/bin/mount.native']: exited with 10
[91m[ERROR] The compilation of datakit failed at "ocaml pkg/pkg.ml build --pinned
        true --tests false".
[0m
[91m
#=== ERROR while installing datakit.dev =======================================#
# opam-version         1.2.2 (58ef3b8213100953848d362f7120a30356d7f77d)
# os                   linux
# command              ocaml pkg/pkg.ml build --pinned true --tests false
# path                 /home/opam/.opam/4.03.0/build/datakit.dev
# compiler             4.03.0
# exit-code            1
# env-file             /home/opam/.opam/4.03.0/build/datakit.dev/datakit-7-ffb3fd.env
# stdout-file          /home/opam/.opam/4.03.0/build/datakit.dev/datakit-7-ffb3fd.out
# stderr-file          /home/opam/.opam/4.03.0/build/datakit.dev/datakit-7-ffb3fd.err
### stdout ###
# [...]
# ocamlfind ocamldep -package 'bytes lwt astring logs result cstruct fmt rresult' -modules src/version.ml > src/version.ml.depends
# ocamlfind ocamlc -c -g -bin-annot -safe-string -thread -package protocol-9p.unix -package 'hvsock.lwt-unix named-pipe.lwt uri mirage-flow' -package 'threads conduit.lwt-unix hvsock.lwt' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/conduit -I src -I src/ivfs -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/conduit/datakit_conduit.cmi src/conduit/datakit_conduit.mli
# ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'asl win-eventlog cmdliner logs.cli' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/log -I src -I src/ivfs -I src/conduit -I src/client -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/log/datakit_log.cmi src/log/datakit_log.mli
# ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'conduit.lwt-unix irmin lwt.unix uri camlzip git tc' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/irmin-io -I src -I src/ivfs -I src/conduit -I src/client -I src/log -I src/vfs -I src/fs9p -I bridge/github/src -o src/irmin-io/ir_io.cmi src/irmin-io/ir_io.mli
# ocamlfind ocamlc -c -g -bin-annot -safe-string -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src -I src/ivfs -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/version.cmo src/version.ml
# ocamlfind ocamlc -c -g -bin-annot -safe-string -thread -package protocol-9p.unix -package 'asl win-eventlog cmdliner mtime.os logs.cli' -package 'hvsock.lwt-unix named-pipe.lwt uri mirage-flow' -package 'threads conduit.lwt-unix hvsock.lwt' -package 'cmdliner fmt.cli fmt.tty logs.fmt' -package 'protocol-9p.unix camlzip' -package 'irmin.http cohttp.lwt' -package 'git irmin irmin.git irmin.mem irmin-watcher' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/bin -I src -I src/ivfs -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/bin/main.cmo src/bin/main.ml
# + ocamlfind ocamlc -c -g -bin-annot -safe-string -thread -package protocol-9p.unix -package 'asl win-eventlog cmdliner mtime.os logs.cli' -package 'hvsock.lwt-unix named-pipe.lwt uri mirage-flow' -package 'threads conduit.lwt-unix hvsock.lwt' -package 'cmdliner fmt.cli fmt.tty logs.fmt' -package 'protocol-9p.unix camlzip' -package 'irmin.http cohttp.lwt' -package 'git irmin irmin.git irmin.mem irmin-watcher' -package 'bytes lwt astring logs result cstruct fmt rresult' -warn-error +1..49 -w A-3-4-41-44 -I src/bin -I src -I src/ivfs -I src/conduit -I src/client -I src/log -I src/vfs -I src/irmin-io -I src/fs9p -I bridge/github/src -o src/bin/main.cmo src/bin/main.ml
# File "src/bin/main.ml", line 57, characters 45-71:
# Error: Unbound value Irmin_watcher_polling.hook
# Command exited with code 2.
### stderr ###
# pkg.ml: [ERROR] cmd ['ocamlbuild' '-use-ocamlfind' '-classic-display' '-tag' 'debug'
# [...]
#      'src/ivfs/ivfs_merge.cmx' 'src/ivfs/ivfs_merge.cmi'
#      'src/ivfs/ivfs_merge.mli' 'src/ivfs/ivfs_blob.cmx'
#      'src/ivfs/ivfs_blob.cmi' 'src/ivfs/ivfs_blob.mli'
#      'src/ivfs/ivfs_remote.cmx' 'src/ivfs/ivfs_remote.cmi'
#      'src/ivfs/ivfs_remote.mli' 'src/ivfs/ivfs_tree.cmx'
#      'src/ivfs/ivfs_tree.cmi' 'src/ivfs/ivfs_tree.mli'
#      'src/ivfs/ivfs_debug.cmx' 'src/ivfs/ivfs_debug.cmi'
#      'src/ivfs/ivfs_debug.mli' 'src/ivfs/ivfs.cmx' 'src/ivfs/ivfs.cmi'
#      'src/ivfs/ivfs.mli' 'src/bin/main.native' 'src/bin/mount.native']: exited with 10

[0m
=-=- Error report -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
The following actions failed
  - install datakit dev
No changes have been performed
[91m'opam install datakit.dev -vv' failed.
[0mThe command '/bin/sh -c opam install datakit.dev -vv' returned a non-zero code: 4
[2017-01-13 14:16.43] Failed: Command "docker" "build" "-f" "Dockerfile" "." exited with status 1
