=== Run docker-build-github on commit 10975c398c4125407133c158db22978ec29e2941
[2016-11-02 15:32.11] Starting...
Cloning into '/tmp/with_clone2a22c1a4'...
done.
HEAD is now at 10975c3 github: Fix update/creation of tags
[2016-11-02 15:32.11] Running "docker" "build" "-f" "Dockerfile.github" "."...
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.436 MB
Step 1 : FROM docker/datakit:server
 ---> b6891c5e3730
Step 2 : COPY datakit-github.opam /home/opam/src/datakit/datakit-github.opam
 ---> Using cache
 ---> 59d9a06ab84d
Step 3 : RUN opam pin add github.dev https://github.com/samoht/ocaml-github.git#push-event-head-commit
 ---> Running in c364a82436b2
github is now git-pinned to https://github.com/samoht/ocaml-github.git#push-event-head-commit

[github: git]
[github: git]
[github: git]
[github: git]
[github: git]
[github: git]
[github] https://github.com/samoht/ocaml-github.git#push-event-head-commit updated

github needs to be installed.
The following actions will be performed:
  - install conf-perl        1                                  [required by zarith]
  - install ocamlmod         0.0.8                              [required by oasis]
  - install magic-mime       1.0.0                              [required by cohttp]
  - install menhir           20160825                           [required by atd]
  - install fieldslib        113.33.03                          [required by cohttp]
  - install easy-format      1.2.0                              [required by biniou, atd, yojson]
  - install base64           2.1.2                              [required by cohttp]
  - install conf-which       1                                  [required by biniou]
  - install mirage-no-xen    1                                  [required by nocrypto]
  - install conf-gmp         1                                  [required by zarith]
  - install ocamlify         0.0.1                              [required by oasis]
  - install ppx_fields_conv  113.33.03                          [required by cohttp]
  - install atd              1.2.0                              [required by atdgen]
  - install biniou           1.0.12                             [required by atdgen]
  - install zarith           1.4.1                              [required by nocrypto]
  - install oasis            0.4.7                              [required by tls]
  - install yojson           1.3.3                              [required by github]
  - install asn1-combinators 0.1.2                              [required by x509]
  - install nocrypto         0.5.3                              [required by tls]
  - install atdgen           1.10.0                             [required by github]
  - install x509             0.5.3                              [required by tls]
  - install tls              0.7.1                              [required by github]
  - install conduit          0.13.0                             [required by cohttp]
  - install cohttp           0.21.0                             [required by github]
  - install github           dev*     
===== 25 to install =====
Do you want to continue ? [Y/n] y

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[asn1-combinators: http] Command started
[atd: http] Command started
[atdgen: http] Command started
[atd: http] Command started
[atd.1.2.0] https://github.com/mjambon/atd/archive/v1.2.0.tar.gz downloaded
[base64: http] Command started
[atdgen: http] Command started
[atdgen.1.10.0] https://github.com/mjambon/atdgen/archive/v1.10.0.tar.gz downloaded
[biniou: http] Command started
[asn1-combinators: http] Command started
[asn1-combinators.0.1.2] https://github.com/mirleft/ocaml-asn1-combinators/archive/0.1.2.tar.gz downloaded
[cohttp: http] Command started
[base64: http] Command started
[base64.2.1.2] https://github.com/mirage/ocaml-base64/releases/download/v2.1.2/base64-2.1.2.tbz downloaded
[conduit: http] Command started
[biniou: http] Command started
[biniou.1.0.12] https://github.com/mjambon/biniou/archive/v1.0.12.tar.gz downloaded
[easy-format: http] Command started
[cohttp: http] Command started
[cohttp.0.21.0] https://github.com/mirage/ocaml-cohttp/archive/v0.21.0.tar.gz downloaded
[fieldslib: http] Command started
[conduit: http] Command started
[easy-format: http] Command started
[conduit.0.13.0] https://github.com/mirage/ocaml-conduit/archive/v0.13.0.tar.gz downloaded
[github: git] Command started
[easy-format.1.2.0] https://github.com/mjambon/easy-format/archive/v1.2.0.tar.gz downloaded
[magic-mime: http] Command started
[github: git] Command started
[fieldslib: http] Command started
[fieldslib.113.33.03] https://ocaml.janestreet.com/ocaml-core/113.33/files/fieldslib-113.33.03.tar.gz downloaded
[menhir: http] Command started
[menhir: http] Command started
[menhir.20160825] http://gallium.inria.fr/~fpottier/menhir/menhir-20160825.tar.gz downloaded
[nocrypto: http] Command started
[github: git] Command started
[github: git] Command started
[github] https://github.com/samoht/ocaml-github.git#push-event-head-commit already up-to-date
[oasis: http] Command started
[magic-mime: http] Command started
[magic-mime.1.0.0] https://github.com/mirage/ocaml-magic-mime/archive/v1.0.0.tar.gz downloaded
[ocamlify: http] Command started
[ocamlify: http] Command started
[ocamlify.0.0.1] http://forge.ocamlcore.org/frs/download.php/379/ocamlify-0.0.1.tar.gz downloaded
[ocamlmod: http] Command started
[ocamlmod: http] Command started
[ocamlmod.0.0.8] https://forge.ocamlcore.org/frs/download.php/1544/ocamlmod-0.0.8.tar.gz downloaded
[ppx_fields_conv: http] Command started
[oasis: http] Command started
[oasis.0.4.7] https://forge.ocamlcore.org/frs/download.php/1635/oasis-0.4.7.tar.gz downloaded
[tls: http] Command started
[ppx_fields_conv: http] Command started
[ppx_fields_conv.113.33.03] https://ocaml.janestreet.com/ocaml-core/113.33/files/ppx_fields_conv-113.33.03.tar.gz downloaded
[x509: http] Command started
[x509: http] Command started
[x509.0.5.3] https://github.com/mirleft/ocaml-x509/archive/0.5.3.tar.gz downloaded
[yojson: http] Command started
[nocrypto: http] Command started
[nocrypto.0.5.3] https://github.com/mirleft/ocaml-nocrypto/archive/v0.5.3.tar.gz downloaded
[zarith: http] Command started
[zarith: http] Command started
[zarith.1.4.1] https://forge.ocamlcore.org/frs/download.php/1574/zarith-1.4.1.tgz downloaded
[tls: http] Command started
[tls.0.7.1] https://github.com/mirleft/ocaml-tls/archive/0.7.1.tar.gz downloaded
[yojson: http] Command started
[yojson.1.3.3] https://github.com/mjambon/yojson/archive/v1.3.3.tar.gz downloaded

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[base64: ocaml build] Command started
[conf-gmp: sh] Command started
[conf-perl: perl] Command started
[conf-which: which which] Command started
[91m[ERROR] The compilation of conf-perl failed at "perl --version".
[0m[easy-format: make] Command started
[91m[ERROR] The compilation of conf-gmp failed at "sh -exc cc -c $CFLAGS
        -I/usr/local/include test.c".
[0m[fieldslib: ./configure] Command started
-> installed conf-which.1
[magic-mime: ./configure] Command started
-> installed base64.2.1.2
[menhir: make Makefile] Command started
[easy-format: make install] Command started
-> installed easy-format.1.2.0
[biniou: make] Command started
[fieldslib: make] Command started
[magic-mime: make] Command started
[biniou: make install] Command started
-> installed biniou.1.0.12
-> installed mirage-no-xen.1
[ocamlify: ocaml setup.ml] Command started
-> installed fieldslib.113.33.03
[ocamlmod: ocaml setup.ml] Command started
[magic-mime: make install] Command started
[ocamlify: ocaml setup.ml] Command started
[ocamlmod: ocaml setup.ml] Command started
-> installed magic-mime.1.0.0
[ppx_fields_conv: ./configure] Command started
[ocamlify: ocaml setup.ml] Command started
-> installed ocamlify.0.0.1
[yojson: make] Command started
[ppx_fields_conv: make] Command started
[ocamlmod: ocaml setup.ml] Command started
-> installed ocamlmod.0.0.8
[oasis: ocaml setup.ml] Command started
-> installed ppx_fields_conv.113.33.03
[oasis: ocaml setup.ml] Command started
[yojson: make install-lib] Command started
-> installed yojson.1.3.3
[menhir: make Makefile] Command started
-> installed menhir.20160825
[atd: make] Command started
[atd: make install] Command started
-> installed atd.1.2.0
[atdgen: make] Command started
[atdgen: make findlib-install] Command started
-> installed atdgen.1.10.0
[oasis: ocaml setup.ml] Command started
-> installed oasis.0.4.7
[91m
#=== ERROR while installing conf-gmp.1 ========================================#
# opam-version         1.2.2
# os                   linux
# command              sh -exc cc -c $CFLAGS -I/usr/local/include test.c
# path                 /home/opam/.opam/system/build/conf-gmp.1
# compiler             system (4.02.3)
# exit-code            1
# env-file             /home/opam/.opam/system/build/conf-gmp.1/conf-gmp-7-af3201.env
# stdout-file          /home/opam/.opam/system/build/conf-gmp.1/conf-gmp-7-af3201.out
# stderr-file          /home/opam/.opam/system/build/conf-gmp.1/conf-gmp-7-af3201.err
### stderr ###
# + cc -c -I/usr/local/include test.c
# test.c:1:17: fatal error: gmp.h: No such file or directory
# compilation terminated.


#=== ERROR while installing conf-perl.1 =======================================#
# opam-version         1.2.2
# os                   linux
# command              perl --version
# path                 /home/opam/.opam/system/build/conf-perl.1
# compiler             system (4.02.3)
# exit-code            127
# env-file             /home/opam/.opam/system/build/conf-perl.1/conf-perl-7-4197d2.env
# stdout-file          /home/opam/.opam/system/build/conf-perl.1/conf-perl-7-4197d2.out
# stderr-file          /home/opam/.opam/system/build/conf-perl.1/conf-perl-7-4197d2.err

[0m

=-=- Error report -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
The following actions were aborted
  - install asn1-combinators 0.1.2 
  - install cohttp           0.21.0
  - install conduit          0.13.0
  - install github           dev   
  - install nocrypto         0.5.3 
  - install tls              0.7.1 
  - install x509             0.5.3 
  - install zarith           1.4.1 
The following actions failed
  - install conf-gmp  1
  - install conf-perl 1
The following changes have been performed
  - install atd             1.2.0    
  - install atdgen          1.10.0   
  - install base64          2.1.2    
  - install biniou          1.0.12   
  - install conf-which      1        
  - install easy-format     1.2.0    
  - install fieldslib       113.33.03
  - install magic-mime      1.0.0    
  - install menhir          20160825 
  - install mirage-no-xen   1        
  - install oasis           0.4.7    
  - install ocamlify        0.0.1    
  - install ocamlmod        0.0.8    
  - install ppx_fields_conv 113.33.03
  - install yojson          1.3.3    

=-=- conf-gmp.1 troobleshooting -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
=> This package relies on external (system) dependencies that may be missing.
   `opam depext conf-gmp.1' may help you find the correct installation for your
   system.

=-=- conf-perl.1 troobleshooting =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
=> This package relies on external (system) dependencies that may be missing.
   `opam depext conf-perl.1' may help you find the correct installation for
   your system.
[91m[NOTE] Pinning command successful, but your installed packages may be out of
       sync.
[0m[91m
The former state can be restored with:
    opam switch import "~/.opam/system/backup/state-20161002153213.export"
[0mThe command '/bin/sh -c opam pin add github.dev https://github.com/samoht/ocaml-github.git#push-event-head-commit' returned a non-zero code: 4
[2016-11-02 15:33.27] Failed: Command "docker" "build" "-f" "Dockerfile.github" "." exited with status 1
