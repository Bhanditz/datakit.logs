=== Docker build Dockerfile.client
[2017-05-09 10:40.15] Starting...
Cloning into '/tmp/with_clone316df155'...
done.
warning: remote HEAD refers to nonexistent ref, unable to checkout.

HEAD is now at 5ff5aca client/server: split the libraires between core API and 9p transport
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon  6.08 MB
Step 1/15 : FROM ocaml/opam@sha256:5a6371c3a9f43dcac9b700e9dffa81ade05a792d853772cdd6c92a15e3939820
sha256:5a6371c3a9f43dcac9b700e9dffa81ade05a792d853772cdd6c92a15e3939820: Pulling from ocaml/opam
Digest: sha256:5a6371c3a9f43dcac9b700e9dffa81ade05a792d853772cdd6c92a15e3939820
Status: Image is up to date for ocaml/opam@sha256:5a6371c3a9f43dcac9b700e9dffa81ade05a792d853772cdd6c92a15e3939820
 ---> d69406d7ecdf
Step 2/15 : RUN git -C /home/opam/opam-repository pull origin master && opam update
 ---> Using cache
 ---> 914cd1f594e0
Step 3/15 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> ff1843c009cf
Step 4/15 : RUN opam depext -ui lwt alcotest conf-libev
 ---> Using cache
 ---> 8d3ad9ec3a8d
Step 5/15 : COPY datakit-client.opam /home/opam/src/datakit/datakit-client.opam
 ---> Using cache
 ---> 71e6c58174c0
Step 6/15 : RUN opam pin add datakit-client.dev /home/opam/src/datakit -n
 ---> Using cache
 ---> 9281d01e5d56
Step 7/15 : RUN opam depext datakit-client &&     opam install datakit-client --deps
 ---> Using cache
 ---> 98fa1050a8e2
Step 8/15 : COPY . /home/opam/src/datakit
 ---> 824fe750dcf6
Error removing intermediate container 95a3f06a03de: Driver aufs failed to remove root filesystem 95a3f06a03de9c61ead0e0da94a3412610330ee5ab887a4e025693fcb01aaf1c: rename /var/lib/docker/aufs/mnt/0bc5ae0c65792f6fbb202340cf71dcd5b3a23958f6bb0f2096f165133ceaa67b /var/lib/docker/aufs/mnt/0bc5ae0c65792f6fbb202340cf71dcd5b3a23958f6bb0f2096f165133ceaa67b-removing: device or resource busy
Step 9/15 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in decb466cb325
 ---> adcef366938f
Error removing intermediate container 95a3f06a03de: No such container: 95a3f06a03de9c61ead0e0da94a3412610330ee5ab887a4e025693fcb01aaf1c
Step 10/15 : RUN cd /home/opam/src/datakit &&     scripts/watermark.sh &&     git status --porcelain
 ---> Running in 603fe991de29
 M src/version.ml
 ---> 453ab51039d6
Error removing intermediate container 95a3f06a03de: No such container: 95a3f06a03de9c61ead0e0da94a3412610330ee5ab887a4e025693fcb01aaf1c
Step 11/15 : RUN opam update datakit-client
 ---> Running in 0f32ccf6b656

=-=- Synchronizing development packages -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
[datakit-client] /home/opam/src/datakit/ synchronized
 ---> 48574b2ec897
Error removing intermediate container 95a3f06a03de: No such container: 95a3f06a03de9c61ead0e0da94a3412610330ee5ab887a4e025693fcb01aaf1c
Step 12/15 : RUN opam info datakit-client --raw
 ---> Running in a676ac041d7f
opam-version: "1.2"
name: "datakit-client"
version: "dev"
maintainer: "thomas@gazagnaire.org"
authors: [
  "Thomas Leonard" "Magnus Skjegstad" "David Scott" "Thomas Gazagnaire"
]
homepage: "https://github.com/moby/datakit"
bug-reports: "https://github.com/moby/datakit/issues"
license: "Apache"
doc: "https://docker.github.io/datakit/"
dev-repo: "https://github.com/moby/datakit.git"
build: ["jbuilder" "build" "-p" name "-j" jobs]
depends: [
  "jbuilder" {build}
  "astring"
  "result"
  "fmt"
  "cstruct" {> "2.2.0"}
]
 ---> 8c351acaac04
Error removing intermediate container 95a3f06a03de: No such container: 95a3f06a03de9c61ead0e0da94a3412610330ee5ab887a4e025693fcb01aaf1c
Step 13/15 : RUN opam install datakit-client.dev -vv
 ---> Running in f05a3a543455

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/system/packages.dev/datakit-client"
- sending incremental file list
- 
- sent 8,445 bytes  received 50 bytes  16,990.00 bytes/sec
- total size is 1,276,401  speedup is 150.25
[datakit-client] /home/opam/src/datakit/ already up-to-date
The following actions will be performed:
  - install datakit-client dev*

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: local] Command started
+ rsync "-rLptgoDrvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--delete" "/home/opam/src/datakit/" "/home/opam/.opam/system/packages.dev/datakit-client"
- sending incremental file list
- 
- sent 8,445 bytes  received 50 bytes  16,990.00 bytes/sec
- total size is 1,276,401  speedup is 150.25
[datakit-client.dev] /home/opam/src/datakit/ already up-to-date

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-client: jbuilder build] Command started
+ jbuilder "build" "-p" "datakit-client" "-j" "4" (CWD=/home/opam/.opam/system/build/datakit-client.dev)
-     ocamldep api/ocaml/9p/mount/mount.depends.ocamldep-output
-     ocamldep api/ocaml/datakit_client.dependsi.ocamldep-output
-     ocamldep api/ocaml/datakit_client.depends.ocamldep-output
-       ocamlc api/ocaml/9p/mount/version.{cmi,cmo,cmt}
-       ocamlc api/ocaml/datakit_path.{cmi,cmti}
-       ocamlc api/ocaml/9p/mount/mount.{cmi,cmo,cmt}
-     ocamlopt api/ocaml/9p/mount/version.{cmx,o}
-       ocamlc api/ocaml/datakit_path.{cmo,cmt}
-       ocamlc api/ocaml/datakit_S.{cmi,cmo,cmt}
-       ocamlc api/ocaml/datakit_client.cma
-     ocamlopt api/ocaml/datakit_path.{cmx,o}
-     ocamlopt api/ocaml/9p/mount/mount.{cmx,o}
-     ocamlopt api/ocaml/datakit_S.{cmx,o}
-     ocamlopt api/ocaml/datakit_client.{a,cmxa}
-     ocamlopt api/ocaml/datakit_client.cmxs
-     ocamlopt api/ocaml/9p/mount/mount.exe
+ install "-m" "0755" "/home/opam/.opam/system/build/datakit-client.dev/_build/install/default/bin/datakit-mount" "/home/opam/.opam/system/bin/datakit-mount"
+ install "-m" "0644" "/home/opam/.opam/system/build/datakit-client.dev/_build/install/default/lib/datakit-client/META" "/home/opam/.opam/system/lib/datakit-client/META"
+ install "-m" "0644" "/home/opam/.opam/system/build/datakit-client.dev/_build/install/default/lib/datakit-client/opam" "/home/opam/.opam/system/lib/datakit-client/opam"
+ install "-m" "0644" "/home/opam/.opam/system/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_S.cmi" "/home/opam/.opam/system/lib/datakit-client/datakit_S.cmi"
+ install "-m" "0644" "/home/opam/.opam/system/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_S.cmx" "/home/opam/.opam/system/lib/datakit-client/datakit_S.cmx"
+ install "-m" "0644" "/home/opam/.opam/system/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_S.cmt" "/home/opam/.opam/system/lib/datakit-client/datakit_S.cmt"
+ install "-m" "0644" "/home/opam/.opam/system/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_S.ml" "/home/opam/.opam/system/lib/datakit-client/datakit_S.ml"
+ install "-m" "0644" "/home/opam/.opam/system/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.cmi" "/home/opam/.opam/system/lib/datakit-client/datakit_path.cmi"
+ install "-m" "0644" "/home/opam/.opam/system/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.cmx" "/home/opam/.opam/system/lib/datakit-client/datakit_path.cmx"
+ install "-m" "0644" "/home/opam/.opam/system/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.cmt" "/home/opam/.opam/system/lib/datakit-client/datakit_path.cmt"
+ install "-m" "0644" "/home/opam/.opam/system/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.cmti" "/home/opam/.opam/system/lib/datakit-client/datakit_path.cmti"
+ install "-m" "0644" "/home/opam/.opam/system/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_path.mli" "/home/opam/.opam/system/lib/datakit-client/datakit_path.mli"
+ install "-m" "0644" "/home/opam/.opam/system/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.cma" "/home/opam/.opam/system/lib/datakit-client/datakit_client.cma"
+ install "-m" "0644" "/home/opam/.opam/system/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.cmxa" "/home/opam/.opam/system/lib/datakit-client/datakit_client.cmxa"
+ install "-m" "0644" "/home/opam/.opam/system/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.a" "/home/opam/.opam/system/lib/datakit-client/datakit_client.a"
+ install "-m" "0644" "/home/opam/.opam/system/build/datakit-client.dev/_build/install/default/lib/datakit-client/datakit_client.cmxs" "/home/opam/.opam/system/lib/datakit-client/datakit_client.cmxs"
+ install "-m" "0644" "/home/opam/.opam/system/build/datakit-client.dev/_build/install/default/doc/datakit-client/README.md" "/home/opam/.opam/system/doc/datakit-client/README.md"
+ install "-m" "0644" "/home/opam/.opam/system/build/datakit-client.dev/_build/install/default/doc/datakit-client/LICENSE.md" "/home/opam/.opam/system/doc/datakit-client/LICENSE.md"
+ install "-m" "0644" "/home/opam/.opam/system/build/datakit-client.dev/_build/install/default/doc/datakit-client/CHANGES.md" "/home/opam/.opam/system/doc/datakit-client/CHANGES.md"
-> installed datakit-client.dev
Done.
 ---> b35f43e3e8b1
Removing intermediate container decb466cb325
Removing intermediate container 603fe991de29
Removing intermediate container 0f32ccf6b656
Removing intermediate container a676ac041d7f
Error removing intermediate container f05a3a543455: Driver aufs failed to remove root filesystem f05a3a543455ef61ad4a64eb7f7dc50bbfcb8d127485da0dcaf577717145f310: rename /var/lib/docker/aufs/mnt/e6e684f02b2e98285b0e8d8afa5064364bb1edbfb0f6cbb142c917366122c47d /var/lib/docker/aufs/mnt/e6e684f02b2e98285b0e8d8afa5064364bb1edbfb0f6cbb142c917366122c47d-removing: device or resource busy
Step 14/15 : RUN sudo mkdir /data && sudo chown opam.nogroup /data && chmod 700 /data &&     sudo cp $(opam config exec -- which datakit-mount) /usr/bin/datakit-mount
 ---> Running in eea4955ffa02
 ---> c6b37d6cfd59
Error removing intermediate container f05a3a543455: No such container: f05a3a543455ef61ad4a64eb7f7dc50bbfcb8d127485da0dcaf577717145f310
Step 15/15 : CMD bash -c "/usr/bin/datakit-mount -h $(getent hosts datakit | awk '{print $1}')";     bash
 ---> Running in 582f2ca99d15
 ---> ed2d135a9984
Error removing intermediate container f05a3a543455: No such container: f05a3a543455ef61ad4a64eb7f7dc50bbfcb8d127485da0dcaf577717145f310
Successfully built ed2d135a9984
[2017-05-09 10:41.05] Success
