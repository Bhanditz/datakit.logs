=== Docker build Dockerfile.ci
[2017-02-20 16:48.29] Starting...
Cloning into '/tmp/with_clonedc76649'...
done.
HEAD is now at 076af8b ci: indicate when something can be rebuilt
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 6.128 MBSending build context to Docker daemon 6.685 MBSending build context to Docker daemon 7.242 MBSending build context to Docker daemon  7.25 MB
Step 1/19 : FROM ocaml/opam:alpine-3.5_ocaml-4.04.0
alpine-3.5_ocaml-4.04.0: Pulling from ocaml/opam
Digest: sha256:209b7003457af0d1eb7cbcf09d8bc1b3a816bd210e34b67b700e99b4f2e50db1
Status: Image is up to date for ocaml/opam:alpine-3.5_ocaml-4.04.0
 ---> 4c087fe6eabb
Step 2/19 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> f802d8339ebd
Step 3/19 : RUN sudo apk add tzdata
 ---> Using cache
 ---> 1122323da1d4
Step 4/19 : RUN opam depext -i opam-devel && sudo cp $(opam config var "opam-devel:lib")/opam /usr/bin/opam
 ---> Using cache
 ---> 264ef86c03c5
Step 5/19 : RUN rm -rf ~/.opam
 ---> Using cache
 ---> c1630c4fdd1a
Step 6/19 : RUN opam init -y
 ---> Using cache
 ---> 358470cd2ce3
Step 7/19 : RUN opam install ocaml -y
 ---> Using cache
 ---> ed9a7fe6bd75
Step 8/19 : RUN opam install depext -y
 ---> Using cache
 ---> a19fde183c3a
Step 9/19 : RUN opam pin add -yn datakit-client.dev https://github.com/docker/datakit.git
 ---> Using cache
 ---> 1cb0d9d1c06c
Step 10/19 : ADD datakit-ci.opam /tmp/deps/opam
 ---> Using cache
 ---> fa127a5b9c4b
Step 11/19 : RUN opam pin add -y tmp /tmp/deps/opam -n
 ---> Using cache
 ---> bc699cb3a2e1
Step 12/19 : RUN opam depext tmp -y
 ---> Using cache
 ---> 315e30ddfe09
Step 13/19 : RUN opam install --deps-only tmp -y
 ---> Using cache
 ---> 57f5f0db9193
Step 14/19 : ADD . /home/opam/datakit
 ---> 46bdf3203b1f
Removing intermediate container 9376d2d4702e
Step 15/19 : RUN sudo chown opam /home/opam/datakit
 ---> Running in 924bc2f289c5
 ---> 1fbf01a6bbba
Removing intermediate container 924bc2f289c5
Step 16/19 : RUN opam pin add -k git datakit-client.dev /home/opam/datakit -y
 ---> Running in 340ac1922ab0
[91m[NOTE] Will pin to 'master' using git
[0mProceed and change pinning target ? [Y/n] y
[91m[NOTE] Package datakit-client is currently pinned to git+https://github.com/docker/datakit.git (version dev).
[0m[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev: git]
[datakit-client.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-client/datakit-client.opam from 1.2 to 2.0~beta
[0mdatakit-client is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - recompile datakit-client dev*
  - recompile datakit-github 0.9.0                              [uses datakit-client]
===== 2 to recompile =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-github.0.9.0] found in cache
[datakit-client.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> removed   datakit-github.0.9.0
-> removed   datakit-client.dev
-> installed datakit-client.dev
-> installed datakit-github.0.9.0
Done.
# Run eval `opam env` to update the current shell environment
 ---> 0226c0bdfe4f
Removing intermediate container 340ac1922ab0
Step 17/19 : RUN opam pin add -k git datakit-ci.dev /home/opam/datakit -y
 ---> Running in 0f10a4ba0d6d
[91m[NOTE] Will pin to 'master' using git
[0m[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev: git]
[datakit-ci.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-ci/datakit-ci.opam from 1.2 to 2.0~beta
[0mdatakit-ci is now pinned to git+file:///home/opam/datakit#master (version dev)

The following actions will be performed:
  - install datakit-ci dev*
[datakit-ci.dev] synchronised from git+file:///home/opam/datakit#master

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
-> installed datakit-ci.dev
Done.
# Run eval `opam env` to update the current shell environment
 ---> fbdb1c0cf2d8
Removing intermediate container 0f10a4ba0d6d
Step 18/19 : RUN opam pin add -k git datakit-github.dev /home/opam/datakit -yn
 ---> Running in 0902bc5e5daa
[91m[NOTE] Will pin to 'master' using git
[0m[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev: git]
[datakit-github.dev] synchronised from git+file:///home/opam/datakit#master
[91m[NOTE] Converting format of /home/opam/.opam/default/.opam-switch/sources/datakit-github/datakit-github.opam from 1.2 to 2.0~beta
[0mdatakit-github is now pinned to git+file:///home/opam/datakit#master (version dev)
 ---> 85497daf173f
Removing intermediate container 0902bc5e5daa
Step 19/19 : VOLUME /secrets
 ---> Running in 6845c0ec14d6
 ---> c68eef2cf071
Removing intermediate container 6845c0ec14d6
Successfully built c68eef2cf071
[2017-02-20 16:49.20] Success
