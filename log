=== Docker build
[2017-01-22 17:23.33] Starting...
Cloning into '/tmp/with_clone1d793ede'...
done.
HEAD is now at 229520a datakit: require mirage-types >= 3.0.0 for the mirage-dev branch
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 5.577 MB
Step 1 : FROM ocaml/opam:alpine
alpine: Pulling from ocaml/opam
b7f33cc0b48e: Already exists
0ff1504156be: Already exists
7133e79c6c2b: Pulling fs layer
d1b80a7bc20d: Pulling fs layer
7133e79c6c2b: Verifying Checksum
7133e79c6c2b: Download complete
7133e79c6c2b: Pull complete
d1b80a7bc20d: Verifying Checksum
d1b80a7bc20d: Download complete
d1b80a7bc20d: Pull complete
Digest: sha256:5255f60453abe4ffc2183f4017ad34433d50d8721c73a1d64d2e890167f0a6c9
Status: Downloaded newer image for ocaml/opam:alpine
 ---> d324fe5ffcfb
Step 2 : RUN cd /home/opam/opam-repository && git pull && opam update -y
 ---> Running in 168866acd116
[91mFrom git://github.com/ocaml/opam-repository
   0f17b35..9a3c69a  master     -> origin/master
[0mUpdating 0f17b35..9a3c69a
Fast-forward
 compilers/4.05.0/4.05.0+pr1016/4.05.0+pr1016.comp  | 11 +++++++
 compilers/4.05.0/4.05.0+pr1016/4.05.0+pr1016.descr |  1 +
 compilers/4.05.0/4.05.0+pr1017/4.05.0+pr1017.comp  | 11 +++++++
 compilers/4.05.0/4.05.0+pr1017/4.05.0+pr1017.descr |  1 +
 packages/camlpdf/camlpdf.2.2.1/descr               |  1 +
 packages/camlpdf/camlpdf.2.2.1/opam                | 10 ++++++
 packages/camlpdf/camlpdf.2.2.1/url                 |  2 ++
 packages/cpdf/cpdf.2.2.1/descr                     |  2 ++
 packages/cpdf/cpdf.2.2.1/files/cpdf.install        |  1 +
 packages/cpdf/cpdf.2.2.1/findlib                   |  1 +
 packages/cpdf/cpdf.2.2.1/opam                      | 14 +++++++++
 packages/cpdf/cpdf.2.2.1/url                       |  2 ++
 packages/graphicspdf/graphicspdf.1.1/opam          |  2 +-
 packages/graphicspdf/graphicspdf.2.2.1/descr       |  1 +
 packages/graphicspdf/graphicspdf.2.2.1/findlib     |  1 +
 packages/graphicspdf/graphicspdf.2.2.1/opam        | 13 ++++++++
 packages/graphicspdf/graphicspdf.2.2.1/url         |  2 ++
 packages/omd/omd.1.3.0/opam                        |  1 +
 packages/opamfind/opamfind.1.1.2/descr             |  4 +++
 packages/opamfind/opamfind.1.1.2/opam              | 29 +++++++++++++++++
 packages/opamfind/opamfind.1.1.2/url               |  2 ++
 packages/owl/owl.0.2.0/descr                       |  2 ++
 packages/owl/owl.0.2.0/files/owl.install           |  6 ++++
 packages/owl/owl.0.2.0/findlib                     |  1 +
 packages/owl/owl.0.2.0/opam                        | 36 ++++++++++++++++++++++
 packages/owl/owl.0.2.0/url                         |  2 ++
 packages/posix-types/posix-types.0.1.1/descr       |  5 +++
 packages/posix-types/posix-types.0.1.1/opam        | 16 ++++++++++
 packages/posix-types/posix-types.0.1.1/url         |  2 ++
 packages/ppx_meta_conv/ppx_meta_conv.2.5.0/url     |  2 +-
 packages/ppx_monadic/ppx_monadic.1.0.5/descr       | 10 ++++++
 packages/ppx_monadic/ppx_monadic.1.0.5/opam        | 27 ++++++++++++++++
 packages/ppx_monadic/ppx_monadic.1.0.5/url         |  2 ++
 packages/ppx_orakuda/ppx_orakuda.3.0.0/opam        |  2 +-
 packages/tiny_json/tiny_json.1.1.3/descr           |  3 ++
 packages/tiny_json/tiny_json.1.1.3/opam            | 24 +++++++++++++++
 packages/tiny_json/tiny_json.1.1.3/url             |  2 ++
 packages/treeprint/treeprint.2.1.1/descr           |  4 +++
 packages/treeprint/treeprint.2.1.1/opam            | 27 ++++++++++++++++
 packages/treeprint/treeprint.2.1.1/url             |  2 ++
 packages/tsdl-image/tsdl-image.0.2.0/descr         |  4 +++
 packages/tsdl-image/tsdl-image.0.2.0/opam          | 28 +++++++++++++++++
 packages/tsdl-image/tsdl-image.0.2.0/url           |  2 ++
 packages/tsdl-mixer/tsdl-mixer.0.2/descr           |  4 +++
 packages/tsdl-mixer/tsdl-mixer.0.2/opam            | 27 ++++++++++++++++
 packages/tsdl-mixer/tsdl-mixer.0.2/url             |  2 ++
 packages/tsdl-ttf/tsdl-ttf.0.2/descr               |  3 ++
 packages/tsdl-ttf/tsdl-ttf.0.2/opam                | 31 +++++++++++++++++++
 packages/tsdl-ttf/tsdl-ttf.0.2/url                 |  2 ++
 packages/unix-dirent/unix-dirent.0.3.5/descr       | 13 ++++++++
 packages/unix-dirent/unix-dirent.0.3.5/opam        | 25 +++++++++++++++
 packages/unix-dirent/unix-dirent.0.3.5/url         |  2 ++
 packages/unix-errno/unix-errno.0.5.2/descr         | 10 ++++++
 packages/unix-errno/unix-errno.0.5.2/opam          | 25 +++++++++++++++
 packages/unix-errno/unix-errno.0.5.2/url           |  2 ++
 packages/unix-fcntl/unix-fcntl.0.3.5/descr         | 16 ++++++++++
 packages/unix-fcntl/unix-fcntl.0.3.5/opam          | 22 +++++++++++++
 packages/unix-fcntl/unix-fcntl.0.3.5/url           |  2 ++
 packages/unix-sys-stat/unix-sys-stat.0.5.2/descr   | 12 ++++++++
 packages/unix-sys-stat/unix-sys-stat.0.5.2/opam    | 25 +++++++++++++++
 packages/unix-sys-stat/unix-sys-stat.0.5.2/url     |  2 ++
 packages/unix-unistd/unix-unistd.0.3.1/descr       |  7 +++++
 packages/unix-unistd/unix-unistd.0.3.1/opam        | 31 +++++++++++++++++++
 packages/unix-unistd/unix-unistd.0.3.1/url         |  2 ++
 64 files changed, 583 insertions(+), 3 deletions(-)
 create mode 100644 compilers/4.05.0/4.05.0+pr1016/4.05.0+pr1016.comp
 create mode 100644 compilers/4.05.0/4.05.0+pr1016/4.05.0+pr1016.descr
 create mode 100644 compilers/4.05.0/4.05.0+pr1017/4.05.0+pr1017.comp
 create mode 100644 compilers/4.05.0/4.05.0+pr1017/4.05.0+pr1017.descr
 create mode 100644 packages/camlpdf/camlpdf.2.2.1/descr
 create mode 100644 packages/camlpdf/camlpdf.2.2.1/opam
 create mode 100644 packages/camlpdf/camlpdf.2.2.1/url
 create mode 100644 packages/cpdf/cpdf.2.2.1/descr
 create mode 100644 packages/cpdf/cpdf.2.2.1/files/cpdf.install
 create mode 100644 packages/cpdf/cpdf.2.2.1/findlib
 create mode 100644 packages/cpdf/cpdf.2.2.1/opam
 create mode 100644 packages/cpdf/cpdf.2.2.1/url
 create mode 100644 packages/graphicspdf/graphicspdf.2.2.1/descr
 create mode 100644 packages/graphicspdf/graphicspdf.2.2.1/findlib
 create mode 100644 packages/graphicspdf/graphicspdf.2.2.1/opam
 create mode 100644 packages/graphicspdf/graphicspdf.2.2.1/url
 create mode 100644 packages/opamfind/opamfind.1.1.2/descr
 create mode 100644 packages/opamfind/opamfind.1.1.2/opam
 create mode 100644 packages/opamfind/opamfind.1.1.2/url
 create mode 100644 packages/owl/owl.0.2.0/descr
 create mode 100644 packages/owl/owl.0.2.0/files/owl.install
 create mode 100644 packages/owl/owl.0.2.0/findlib
 create mode 100644 packages/owl/owl.0.2.0/opam
 create mode 100644 packages/owl/owl.0.2.0/url
 create mode 100644 packages/posix-types/posix-types.0.1.1/descr
 create mode 100644 packages/posix-types/posix-types.0.1.1/opam
 create mode 100644 packages/posix-types/posix-types.0.1.1/url
 create mode 100644 packages/ppx_monadic/ppx_monadic.1.0.5/descr
 create mode 100644 packages/ppx_monadic/ppx_monadic.1.0.5/opam
 create mode 100644 packages/ppx_monadic/ppx_monadic.1.0.5/url
 create mode 100644 packages/tiny_json/tiny_json.1.1.3/descr
 create mode 100644 packages/tiny_json/tiny_json.1.1.3/opam
 create mode 100644 packages/tiny_json/tiny_json.1.1.3/url
 create mode 100644 packages/treeprint/treeprint.2.1.1/descr
 create mode 100644 packages/treeprint/treeprint.2.1.1/opam
 create mode 100644 packages/treeprint/treeprint.2.1.1/url
 create mode 100644 packages/tsdl-image/tsdl-image.0.2.0/descr
 create mode 100644 packages/tsdl-image/tsdl-image.0.2.0/opam
 create mode 100644 packages/tsdl-image/tsdl-image.0.2.0/url
 create mode 100644 packages/tsdl-mixer/tsdl-mixer.0.2/descr
 create mode 100644 packages/tsdl-mixer/tsdl-mixer.0.2/opam
 create mode 100644 packages/tsdl-mixer/tsdl-mixer.0.2/url
 create mode 100644 packages/tsdl-ttf/tsdl-ttf.0.2/descr
 create mode 100644 packages/tsdl-ttf/tsdl-ttf.0.2/opam
 create mode 100644 packages/tsdl-ttf/tsdl-ttf.0.2/url
 create mode 100644 packages/unix-dirent/unix-dirent.0.3.5/descr
 create mode 100644 packages/unix-dirent/unix-dirent.0.3.5/opam
 create mode 100644 packages/unix-dirent/unix-dirent.0.3.5/url
 create mode 100644 packages/unix-errno/unix-errno.0.5.2/descr
 create mode 100644 packages/unix-errno/unix-errno.0.5.2/opam
 create mode 100644 packages/unix-errno/unix-errno.0.5.2/url
 create mode 100644 packages/unix-fcntl/unix-fcntl.0.3.5/descr
 create mode 100644 packages/unix-fcntl/unix-fcntl.0.3.5/opam
 create mode 100644 packages/unix-fcntl/unix-fcntl.0.3.5/url
 create mode 100644 packages/unix-sys-stat/unix-sys-stat.0.5.2/descr
 create mode 100644 packages/unix-sys-stat/unix-sys-stat.0.5.2/opam
 create mode 100644 packages/unix-sys-stat/unix-sys-stat.0.5.2/url
 create mode 100644 packages/unix-unistd/unix-unistd.0.3.1/descr
 create mode 100644 packages/unix-unistd/unix-unistd.0.3.1/opam
 create mode 100644 packages/unix-unistd/unix-unistd.0.3.1/url

=-=- Updating package repositories =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[default: local] Command started
[default: local] Command started
[default: local] Command started
[default] /home/opam/opam-repository synchronized
 ---> 0ba15477eddf
Removing intermediate container 168866acd116
Step 3 : RUN opam depext -ui lwt inotify alcotest conf-libev lambda-term
 ---> Running in bdf95e0d7da9
# Detecting depexts using flags: x86_64 linux alpine
# The following system packages are needed:
#  - libev-dev
#  - m4
#  - ncurses-dev
#  - pkgconfig
ncurses-dev
pkgconfig
# The following new OS packages need to be installed: libev-dev m4
The following command needs to be run through "sudo":
    apk update
fetch http://dl-cdn.alpinelinux.org/alpine/v3.4/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.4/community/x86_64/APKINDEX.tar.gz
fetch http://www.cl.cam.ac.uk/~avsm2/alpine-ocaml/3.4/x86_64/APKINDEX.tar.gz
v3.4.6-53-g66239fe [http://dl-cdn.alpinelinux.org/alpine/v3.4/main]
v3.4.6-33-g38ef2d2 [http://dl-cdn.alpinelinux.org/alpine/v3.4/community]
testing v3.3.0-55-g55836a9 [http://www.cl.cam.ac.uk/~avsm2/alpine-ocaml/3.4]
OK: 5976 distinct packages available
# OS package update successful
The following command needs to be run through "sudo":
    apk add libev-dev m4
(1/3) Installing libev (4.22-r0)
(2/3) Installing libev-dev (4.22-r0)
(3/3) Installing m4 (1.4.17-r1)
Executing busybox-1.24.2-r13.trigger
OK: 422 MiB in 84 packages
# OS packages installation successful
# Now letting OPAM install the packages
The following actions will be performed:
  - install conf-m4     1                                       [required by ocamlfind]
  - install result      1.2                                     [required by alcotest, lwt]
  - install conf-libev  4-11      
  - install ocamlfind   1.7.1                                   [required by lambda-term, alcotest, inotify, lwt]
  - install topkg       0.8.1                                   [required by alcotest]
  - install react       1.2.0                                   [required by lambda-term, lwt]
  - install ppx_tools   5.0+4.03.0                              [required by lwt]
  - install base-bytes  base                                    [required by inotify]
  - install fmt         0.8.0                                   [required by alcotest]
  - install astring     0.8.3                                   [required by alcotest]
  - install lwt         2.7.0     
       For module Lwt_react, please install package lwt_react
  - install cppo        1.4.1                                   [required by camomile]
  - install alcotest    0.7.2     
  - install inotify     2.3       
  - install camomile    0.8.5                                   [required by zed]
  - install zed         1.4                                     [required by lambda-term]
  - install lambda-term 1.10.1    
===== 17 to install =====
Do you want to continue ? [Y/n] y

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[alcotest: http] Command started
[astring: http] Command started
[camomile: http] Command started
[astring: http] Command started
[astring.0.8.3] http://erratique.ch/software/astring/releases/astring-0.8.3.tbz downloaded
[cppo: http] Command started
[alcotest: http] Command started
[alcotest.0.7.2] https://github.com/mirage/alcotest/releases/download/0.7.2/alcotest-0.7.2.tbz downloaded
[fmt: http] Command started
[cppo: http] Command started
[cppo.1.4.1] https://github.com/mjambon/cppo/archive/v1.4.1.tar.gz downloaded
[inotify: http] Command started
[fmt: http] Command started
[fmt.0.8.0] http://erratique.ch/software/fmt/releases/fmt-0.8.0.tbz downloaded
[lambda-term: http] Command started
[inotify: http] Command started
[inotify.2.3] https://github.com/whitequark/ocaml-inotify/archive/v2.3.tar.gz downloaded
[lwt: http] Command started
[lambda-term: http] Command started
[lambda-term.1.10.1] https://github.com/diml/lambda-term/archive/1.10.1.tar.gz downloaded
[ocamlfind: http] Command started
[ocamlfind: http] Command started
[ocamlfind.1.7.1] http://download.camlcity.org/download/findlib-1.7.1.tar.gz downloaded
[ppx_tools: http] Command started
[camomile: http] Command started
[camomile.0.8.5] https://github.com/yoriyuki/Camomile/releases/download/rel-0.8.5/camomile-0.8.5.tar.bz2 downloaded
[react: http] Command started
[react: http] Command started
[react.1.2.0] http://erratique.ch/software/react/releases/react-1.2.0.tbz downloaded
[result: http] Command started
[lwt: http] Command started
[lwt.2.7.0] https://github.com/ocsigen/lwt/archive/2.7.0.tar.gz downloaded
[topkg: http] Command started
[ppx_tools: http] Command started
[ppx_tools.5.0+4.03.0] https://github.com/alainfrisch/ppx_tools/archive/5.0+4.03.0.tar.gz downloaded
[zed: http] Command started
[topkg: http] Command started
[topkg.0.8.1] http://erratique.ch/software/topkg/releases/topkg-0.8.1.tbz downloaded
[result: http] Command started
[result.1.2] https://github.com/janestreet/result/archive/1.2.tar.gz downloaded
[zed: http] Command started
[zed.1.4] https://github.com/diml/zed/archive/1.4.tar.gz downloaded

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[conf-libev: sh] Command started
[conf-m4: sh echo | m4] Command started
[result: make] Command started
-> installed conf-m4.1
[ocamlfind: ./configure] Command started
-> installed conf-libev.4-11
-> installed result.1.2
[ocamlfind: make all] Command started
[ocamlfind: make opt] Command started
[ocamlfind: make install] Command started
-> installed ocamlfind.1.7.1
-> installed base-bytes.base
[cppo: make opt] Command started
[ppx_tools: make all] Command started
[react: ocaml] Command started
[topkg: ocaml build] Command started
[react: ocaml] Command started
[cppo: make ocamlbuild] Command started
-> installed react.1.2.0
[cppo: make install-lib] Command started
-> installed cppo.1.4.1
[camomile: ./configure] Command started
[camomile: make] Command started
[ppx_tools: make install] Command started
-> installed ppx_tools.5.0+4.03.0
[lwt: make setup] Command started
-> installed topkg.0.8.1
[astring: ocaml build] Command started
[fmt: ocaml build] Command started
[lwt: ocaml setup.ml] Command started
-> installed fmt.0.8.0
-> installed astring.0.8.3
[alcotest: ocaml build] Command started
-> installed alcotest.0.7.2
[lwt: make build] Command started
[lwt: make install] Command started
-> installed lwt.2.7.0
[inotify: ocaml setup.ml] Command started
[inotify: ocaml setup.ml] Command started
[inotify: ocaml setup.ml] Command started
-> installed inotify.2.3
[camomile: make install] Command started
-> installed camomile.0.8.5
[zed: ocaml setup.ml] Command started
[zed: ocaml setup.ml] Command started
[zed: ocaml setup.ml] Command started
-> installed zed.1.4
[lambda-term: ocaml setup.ml] Command started
[lambda-term: ocaml setup.ml] Command started
[lambda-term: ocaml setup.ml] Command started
-> installed lambda-term.1.10.1
Done.

=-=- lwt.2.7.0 installed successfully -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
=> The future Lwt 3.0.0 will make minor breaking changes near 1 April 2017. See
     https://github.com/ocsigen/lwt/issues/308
 ---> 649be362bcc1
Removing intermediate container bdf95e0d7da9
Step 4 : COPY datakit-server.opam /home/opam/src/datakit/datakit-server.opam
 ---> 46fa2f30a27b
Removing intermediate container e52e33459d7a
Step 5 : COPY prometheus.opam /home/opam/src/datakit/prometheus.opam
 ---> 8b8a13f7e1d3
Removing intermediate container 25fc1487b2da
Step 6 : COPY prometheus-app.opam /home/opam/src/datakit/prometheus-app.opam
 ---> f5e3260e1c77
Removing intermediate container b0e71ce09916
Step 7 : RUN opam pin add prometheus.dev /home/opam/src/datakit -n
 ---> Running in 1937c22f64e1
Package prometheus does not exist, create as a NEW package ? [Y/n] y
prometheus is now path-pinned to /home/opam/src/datakit

[prometheus: local]
[prometheus] /home/opam/src/datakit/ synchronized
[prometheus] Installing new package description from /home/opam/src/datakit

 ---> a019247ed442
Removing intermediate container 1937c22f64e1
Step 8 : RUN opam pin add prometheus-app.dev /home/opam/src/datakit -n
 ---> Running in afc48c9c2d9f
Package prometheus-app does not exist, create as a NEW package ? [Y/n] y
prometheus-app is now path-pinned to /home/opam/src/datakit

[prometheus-app: local]
[prometheus-app] /home/opam/src/datakit/ synchronized
[prometheus-app] Installing new package description from /home/opam/src/datakit

 ---> c1f7db7ce866
Removing intermediate container afc48c9c2d9f
Step 9 : RUN opam pin add datakit-server.dev /home/opam/src/datakit -n
 ---> Running in 3a96eeba9493
datakit-server is now path-pinned to /home/opam/src/datakit

[datakit-server: local]
[datakit-server] /home/opam/src/datakit/ synchronized
[datakit-server] Installing new package description from /home/opam/src/datakit

 ---> b7079bde5085
Removing intermediate container 3a96eeba9493
Step 10 : RUN opam depext datakit-server && opam install datakit-server --deps
 ---> Running in 47c99c174474
# Detecting depexts using flags: x86_64 linux alpine
# The following system packages are needed:
#  - m4
#  - ncurses-dev
#  - pkgconfig
m4
ncurses-dev
pkgconfig
# All required OS packages found.

=-=- Synchronising pinned packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[datakit-server: local] Command started
[datakit-server] /home/opam/src/datakit/ already up-to-date
The following dependencies couldn't be met:
  - datakit-server -> mirage-flow-lwt
Your request can't be satisfied:
  - No package named mirage-flow-lwt found.

No solution found, exiting
The command '/bin/sh -c opam depext datakit-server && opam install datakit-server --deps' returned a non-zero code: 3
[2017-01-22 17:26.03] Failed: Command "docker" "build" "--pull" "-f" "Dockerfile.server" "." exited with status 1
